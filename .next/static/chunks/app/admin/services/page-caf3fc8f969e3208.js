(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6255],{13717:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(19946).A)("square-pen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]])},14186:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(19946).A)("clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},19946:(e,t,s)=>{"use strict";s.d(t,{A:()=>m});var r=s(12115);let i=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),a=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,s)=>s?s.toUpperCase():t.toLowerCase()),c=e=>{let t=a(e);return t.charAt(0).toUpperCase()+t.slice(1)},l=function(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return t.filter((e,t,s)=>!!e&&""!==e.trim()&&s.indexOf(e)===t).join(" ").trim()},o=e=>{for(let t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0};var n={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let d=(0,r.forwardRef)((e,t)=>{let{color:s="currentColor",size:i=24,strokeWidth:a=2,absoluteStrokeWidth:c,className:d="",children:m,iconNode:x,...u}=e;return(0,r.createElement)("svg",{ref:t,...n,width:i,height:i,stroke:s,strokeWidth:c?24*Number(a)/Number(i):a,className:l("lucide",d),...!m&&!o(u)&&{"aria-hidden":"true"},...u},[...x.map(e=>{let[t,s]=e;return(0,r.createElement)(t,s)}),...Array.isArray(m)?m:[m]])}),m=(e,t)=>{let s=(0,r.forwardRef)((s,a)=>{let{className:o,...n}=s;return(0,r.createElement)(d,{ref:a,iconNode:t,className:l("lucide-".concat(i(c(e))),"lucide-".concat(e),o),...n})});return s.displayName=c(e),s}},35818:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>f});var r=s(95155),i=s(12115),a=s(84616),c=s(51154),l=s(53904),o=s(85339),n=s(40646),d=s(54861),m=s(55868),x=s(14186),u=s(75525),h=s(62525),p=s(13717);function f(){let[e,t]=(0,i.useState)([]),[s,f]=(0,i.useState)(!0),[v,y]=(0,i.useState)(!1),[g,b]=(0,i.useState)(null),[j,N]=(0,i.useState)(!1),[k,w]=(0,i.useState)(null),[A,_]=(0,i.useState)({nombre:"",descripcion:"",precio:"",tiempo_estimado_minutos:"",requiere_identificacion:!1,activo:!0}),C=async()=>{try{y(!0);let e=await fetch("/api/admin/services?onlyActive=false");if(!e.ok)throw Error("Error al cargar los servicios");let s=await e.json();t(s.services||[]),b(null)}catch(e){console.error("Error fetching services:",e),b("Error al cargar los servicios. Intente nuevamente.")}finally{f(!1),y(!1)}};(0,i.useEffect)(()=>{C()},[]);let E=()=>{C()},z=e=>new Intl.NumberFormat("es-MX",{style:"currency",currency:"MXN"}).format(e),q=e=>{if(!e)return"No especificado";if(e<60)return"".concat(e," min");let t=Math.floor(e/60),s=e%60;return 0===s?"".concat(t," hr").concat(t>1?"s":""):"".concat(t," hr").concat(t>1?"s":""," ").concat(s," min")},S=e=>{var t;w(e),_({nombre:e.nombre,descripcion:e.descripcion,precio:e.precio.toString(),tiempo_estimado_minutos:(null===(t=e.tiempo_estimado_minutos)||void 0===t?void 0:t.toString())||"",requiere_identificacion:e.requiere_identificacion,activo:e.activo}),N(!0)},M=()=>{w(null),_({nombre:"",descripcion:"",precio:"",tiempo_estimado_minutos:"",requiere_identificacion:!1,activo:!0}),N(!0)},D=async e=>{try{let t=await fetch("/api/admin/services/".concat(e.servicio_id,"/toggle"),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({activo:!e.activo})});if(!t.ok){let e=await t.json();throw Error(e.error||"Error al actualizar el servicio")}C()}catch(e){console.error("Error toggling service:",e),alert(e.message||"Error al actualizar el servicio")}},L=async e=>{e.preventDefault();try{let e=k?"/api/admin/services/".concat(k.servicio_id):"/api/admin/services",t=k?"PUT":"POST",s=await fetch(e,{method:t,headers:{"Content-Type":"application/json"},body:JSON.stringify({...A,precio:parseFloat(A.precio),tiempo_estimado_minutos:A.tiempo_estimado_minutos?parseInt(A.tiempo_estimado_minutos):null})});if(!s.ok){let e=await s.json();throw Error(e.error||"Error al guardar el servicio")}N(!1),C()}catch(e){console.error("Error saving service:",e),alert(e.message||"Error al guardar el servicio")}},T=async e=>{if(confirm('\xbfEst\xe1s seguro de eliminar el servicio "'.concat(e.nombre,'"?')))try{let t=await fetch("/api/admin/services/".concat(e.servicio_id),{method:"DELETE"});if(!t.ok){let e=await t.json();throw Error(e.error||"Error al eliminar el servicio")}let s=await t.json();alert(s.message),C()}catch(e){console.error("Error deleting service:",e),alert(e.message||"Error al eliminar el servicio")}};return(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"flex flex-col md:flex-row md:justify-between md:items-center gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-xl font-semibold text-[#313D52]",children:"Gesti\xf3n de Servicios"}),(0,r.jsx)("p",{className:"text-sm text-[#6c7a89]",children:"Administra los servicios disponibles"})]}),(0,r.jsxs)("div",{className:"flex flex-wrap gap-3",children:[(0,r.jsxs)("button",{onClick:M,className:"inline-flex items-center px-4 py-2 bg-[#313D52] text-white rounded-lg hover:bg-[#3e4a61] transition-colors",children:[(0,r.jsx)(a.A,{size:16,className:"mr-2"}),"Nuevo Servicio"]}),(0,r.jsx)("button",{className:"inline-flex items-center px-4 py-2 bg-[#78f3d3] text-[#313D52] rounded-lg hover:bg-[#4de0c0] transition-colors disabled:opacity-50 disabled:cursor-not-allowed",onClick:E,disabled:v,children:v?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(c.A,{size:16,className:"mr-2 animate-spin"}),"Actualizando..."]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(l.A,{size:16,className:"mr-2"}),"Actualizar"]})})]})]}),(0,r.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:s?(0,r.jsx)("div",{className:"col-span-full flex justify-center items-center py-20",children:(0,r.jsx)(c.A,{size:40,className:"animate-spin text-[#78f3d3]"})}):g?(0,r.jsxs)("div",{className:"col-span-full text-center py-10 text-red-500",children:[(0,r.jsx)("p",{children:g}),(0,r.jsx)("button",{onClick:E,className:"mt-4 px-4 py-2 bg-[#78f3d3] text-[#313D52] rounded-lg hover:bg-[#4de0c0] transition-colors",children:"Reintentar"})]}):0===e.length?(0,r.jsxs)("div",{className:"col-span-full text-center py-20",children:[(0,r.jsx)(o.A,{size:48,className:"mx-auto text-[#e0e6e5] mb-4"}),(0,r.jsx)("p",{className:"text-[#6c7a89] font-medium",children:"No hay servicios registrados"}),(0,r.jsx)("p",{className:"text-sm text-[#6c7a89]",children:"Crea el primer servicio para comenzar"}),(0,r.jsxs)("button",{onClick:M,className:"inline-flex items-center px-4 py-2 mt-4 bg-[#78f3d3] text-[#313D52] rounded-lg hover:bg-[#4de0c0] transition-colors",children:[(0,r.jsx)(a.A,{size:16,className:"mr-2"}),"Nuevo Servicio"]})]}):e.map(e=>(0,r.jsx)("div",{className:"bg-white rounded-lg border border-[#e0e6e5] overflow-hidden ".concat(e.activo?"":"opacity-60"),children:(0,r.jsxs)("div",{className:"p-4",children:[(0,r.jsxs)("div",{className:"flex justify-between items-start mb-3",children:[(0,r.jsx)("h3",{className:"text-lg font-medium text-[#313D52]",children:e.nombre}),(0,r.jsx)("div",{className:"flex items-center space-x-2",children:e.activo?(0,r.jsx)(n.A,{size:20,className:"text-green-500"}):(0,r.jsx)(d.A,{size:20,className:"text-red-500"})})]}),(0,r.jsx)("p",{className:"text-sm text-[#6c7a89] mb-4",children:e.descripcion}),(0,r.jsxs)("div",{className:"space-y-2 mb-4",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("span",{className:"flex items-center text-sm text-[#6c7a89]",children:[(0,r.jsx)(m.A,{size:16,className:"mr-1"}),"Precio:"]}),(0,r.jsx)("span",{className:"font-medium text-[#313D52]",children:z(e.precio)})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("span",{className:"flex items-center text-sm text-[#6c7a89]",children:[(0,r.jsx)(x.A,{size:16,className:"mr-1"}),"Tiempo:"]}),(0,r.jsx)("span",{className:"text-sm text-[#313D52]",children:q(e.tiempo_estimado_minutos)})]}),e.requiere_identificacion&&(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("span",{className:"flex items-center text-sm text-[#6c7a89]",children:[(0,r.jsx)(u.A,{size:16,className:"mr-1"}),"Requiere ID:"]}),(0,r.jsx)("span",{className:"text-sm text-orange-600",children:"S\xed"})]})]}),(0,r.jsxs)("div",{className:"flex justify-between items-center pt-3 border-t border-[#e0e6e5]",children:[(0,r.jsx)("button",{onClick:()=>D(e),className:"px-3 py-1 rounded text-xs font-medium transition-colors ".concat(e.activo?"bg-red-100 text-red-700 hover:bg-red-200":"bg-green-100 text-green-700 hover:bg-green-200"),children:e.activo?"Desactivar":"Activar"}),(0,r.jsxs)("div",{className:"flex space-x-2",children:[(0,r.jsx)("button",{onClick:()=>T(e),className:"text-red-500 hover:text-red-700 transition-colors",children:(0,r.jsx)(h.A,{size:18})}),(0,r.jsx)("button",{onClick:()=>S(e),className:"text-[#78f3d3] hover:text-[#4de0c0] transition-colors",children:(0,r.jsx)(p.A,{size:18})})]})]})]})},e.servicio_id))}),j&&(0,r.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,r.jsxs)("div",{className:"bg-white rounded-lg p-6 w-full max-w-md mx-4",children:[(0,r.jsx)("h2",{className:"text-lg font-semibold text-[#313D52] mb-4",children:k?"Editar Servicio":"Nuevo Servicio"}),(0,r.jsxs)("form",{onSubmit:L,className:"space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-[#6c7a89] mb-1",children:"Nombre del servicio"}),(0,r.jsx)("input",{type:"text",value:A.nombre,onChange:e=>_({...A,nombre:e.target.value}),className:"w-full px-3 py-2 border border-[#e0e6e5] rounded-lg focus:outline-none focus:ring-2 focus:ring-[#78f3d3]",required:!0})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-[#6c7a89] mb-1",children:"Descripci\xf3n"}),(0,r.jsx)("textarea",{value:A.descripcion,onChange:e=>_({...A,descripcion:e.target.value}),className:"w-full px-3 py-2 border border-[#e0e6e5] rounded-lg focus:outline-none focus:ring-2 focus:ring-[#78f3d3]",rows:3,required:!0})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-[#6c7a89] mb-1",children:"Precio"}),(0,r.jsx)("input",{type:"number",step:"0.01",value:A.precio,onChange:e=>_({...A,precio:e.target.value}),className:"w-full px-3 py-2 border border-[#e0e6e5] rounded-lg focus:outline-none focus:ring-2 focus:ring-[#78f3d3]",required:!0})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-[#6c7a89] mb-1",children:"Tiempo estimado (minutos)"}),(0,r.jsx)("input",{type:"number",value:A.tiempo_estimado_minutos,onChange:e=>_({...A,tiempo_estimado_minutos:e.target.value}),className:"w-full px-3 py-2 border border-[#e0e6e5] rounded-lg focus:outline-none focus:ring-2 focus:ring-[#78f3d3]"})]}),(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("input",{type:"checkbox",id:"requiere_id",checked:A.requiere_identificacion,onChange:e=>_({...A,requiere_identificacion:e.target.checked}),className:"mr-2"}),(0,r.jsx)("label",{htmlFor:"requiere_id",className:"text-sm text-[#6c7a89]",children:"Requiere identificaci\xf3n"})]}),(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("input",{type:"checkbox",id:"activo",checked:A.activo,onChange:e=>_({...A,activo:e.target.checked}),className:"mr-2"}),(0,r.jsx)("label",{htmlFor:"activo",className:"text-sm text-[#6c7a89]",children:"Servicio activo"})]}),(0,r.jsxs)("div",{className:"flex justify-end space-x-3 pt-4",children:[(0,r.jsx)("button",{type:"button",onClick:()=>N(!1),className:"px-4 py-2 text-[#6c7a89] border border-[#e0e6e5] rounded-lg hover:bg-[#f5f9f8] transition-colors",children:"Cancelar"}),(0,r.jsx)("button",{type:"submit",className:"px-4 py-2 bg-[#78f3d3] text-[#313D52] rounded-lg hover:bg-[#4de0c0] transition-colors",children:k?"Actualizar":"Crear"})]})]})]})})]})}},40646:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(19946).A)("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},51154:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(19946).A)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},53904:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(19946).A)("refresh-cw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]])},54861:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(19946).A)("circle-x",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]])},55868:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(19946).A)("dollar-sign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]])},62525:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(19946).A)("trash-2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},75525:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(19946).A)("shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]])},84616:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(19946).A)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},85339:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(19946).A)("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},93941:(e,t,s)=>{Promise.resolve().then(s.bind(s,35818))}},e=>{var t=t=>e(e.s=t);e.O(0,[8441,1684,7358],()=>t(93941)),_N_E=e.O()}]);