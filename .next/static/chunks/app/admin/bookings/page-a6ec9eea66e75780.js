(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6907],{4516:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(19946).A)("map-pin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]])},13052:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(19946).A)("chevron-right",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]])},14186:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(19946).A)("clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},16370:(e,s,t)=>{"use strict";t.d(s,{A:()=>n});var a=t(95155),l=t(12115),c=t(66932);let r=(0,t(19946).A)("check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]),n=e=>{var s;let{selectedStatus:t,onChange:n}=e,[i,d]=(0,l.useState)(!1),o=[{value:"pending",label:"Pendiente",color:"bg-yellow-100 text-yellow-800"},{value:"completed",label:"Completado",color:"bg-green-100 text-green-800"},{value:"cancelled",label:"Cancelado",color:"bg-red-100 text-red-800"}],x=e=>{t.includes(e)?n(t.filter(s=>s!==e)):n([...t,e])};return(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("button",{onClick:()=>d(!i),className:"inline-flex items-center justify-between px-4 py-2 w-48 rounded-lg border border-[#e0e6e5] bg-white hover:bg-[#f5f9f8] focus:outline-none focus:ring-2 focus:ring-[#78f3d3]",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(c.A,{size:16,className:"mr-2 text-[#6c7a89]"}),(0,a.jsx)("span",{className:"text-sm",children:0===t.length?"Todos los estados":1===t.length?null===(s=o.find(e=>e.value===t[0]))||void 0===s?void 0:s.label:"".concat(t.length," estados")})]})}),i&&(0,a.jsx)("div",{className:"absolute mt-1 w-64 bg-white border border-[#e0e6e5] rounded-lg shadow-lg z-10",children:(0,a.jsxs)("div",{className:"p-2",children:[(0,a.jsxs)("button",{onClick:()=>{t.length===o.length?n([]):n(o.map(e=>e.value))},className:"flex items-center justify-between w-full px-3 py-2 text-sm text-left rounded-md hover:bg-[#f5f9f8]",children:[(0,a.jsx)("span",{children:t.length===o.length?"Deseleccionar todos":"Seleccionar todos"}),t.length===o.length&&(0,a.jsx)(r,{size:16,className:"text-[#78f3d3]"})]}),(0,a.jsx)("div",{className:"h-px bg-[#e0e6e5] my-1"}),o.map(e=>(0,a.jsxs)("button",{onClick:()=>x(e.value),className:"flex items-center justify-between w-full px-3 py-2 text-sm text-left rounded-md hover:bg-[#f5f9f8]",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("span",{className:"inline-block w-2 h-2 rounded-full mr-2 ".concat(e.color.split(" ")[0])}),(0,a.jsx)("span",{children:e.label})]}),t.includes(e.value)&&(0,a.jsx)(r,{size:16,className:"text-[#78f3d3]"})]},e.value))]})})]})}},19420:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(19946).A)("phone",[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]])},26097:(e,s,t)=>{Promise.resolve().then(t.bind(t,61205))},28883:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(19946).A)("mail",[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]])},37108:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(19946).A)("package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]])},40646:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(19946).A)("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},42355:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(19946).A)("chevron-left",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]])},44020:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(19946).A)("ellipsis-vertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]])},47924:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(19946).A)("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]])},51154:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(19946).A)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},53904:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(19946).A)("refresh-cw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]])},54416:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(19946).A)("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},54861:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(19946).A)("circle-x",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]])},57434:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(19946).A)("file-text",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]])},61205:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>q});var a=t(95155),l=t(12115),c=t(91788),r=t(51154),n=t(53904),i=t(47924),d=t(42355),o=t(13052),x=t(14186),m=t(40646),h=t(54861),u=t(66474),p=t(44020),f=t(92657),j=t(37108);let b=(0,t(19946).A)("pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]);var g=t(62525),v=t(6874),y=t.n(v),N=t(54416),k=t(71007),w=t(28883),A=t(19420),z=t(4516),C=t(57434),D=t(69074);let _=e=>{let s,{bookingId:t,isOpen:c,onClose:n,onStatusUpdate:i}=e,[d,o]=(0,l.useState)(null),[u,p]=(0,l.useState)(!1),[f,b]=(0,l.useState)(null),[g,v]=(0,l.useState)(!1);(0,l.useEffect)(()=>{c&&t&&y()},[c,t]);let y=async()=>{if(t)try{p(!0),b(null);let e=await fetch("/api/admin/bookings/".concat(t));if(!e.ok){if(404===e.status)throw Error("Reservaci\xf3n no encontrada");throw Error("Error al cargar los detalles")}let s=await e.json();o(s)}catch(e){console.error("Error fetching booking details:",e),b(e instanceof Error?e.message:"Error desconocido")}finally{p(!1)}},_=async e=>{if(d)try{if(v(!0),!(await fetch("/api/admin/bookings/".concat(d.id,"/status"),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:e})})).ok)throw Error("Error al actualizar el estado");await y(),i&&i()}catch(e){console.error("Error updating status:",e),alert("Error al actualizar el estado de la reservaci\xf3n")}finally{v(!1)}},E=e=>e?new Date(e).toLocaleDateString("es-MX",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}):"No especificada";return c?(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,a.jsxs)("div",{className:"bg-white rounded-lg max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-[#e0e6e5]",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-xl font-semibold text-[#313D52]",children:d?"Reservaci\xf3n ".concat(d.booking_reference):"Detalles de Reservaci\xf3n"}),(0,a.jsx)("p",{className:"text-sm text-[#6c7a89]",children:"Informaci\xf3n completa de la reservaci\xf3n"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[d&&(0,a.jsx)("span",{className:"px-3 py-1 rounded-full text-sm font-medium border ".concat((e=>{switch(e){case"pending":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"completed":return"bg-green-100 text-green-800 border-green-200";case"cancelled":return"bg-red-100 text-red-800 border-red-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}})(d.status)),children:(e=>{switch(e){case"pending":return"Pendiente";case"completed":return"Completado";case"cancelled":return"Cancelado";default:return"Desconocido"}})(d.status)}),(0,a.jsx)("button",{onClick:n,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:(0,a.jsx)(N.A,{size:20,className:"text-[#6c7a89]"})})]})]}),(0,a.jsx)("div",{className:"p-6",children:u?(0,a.jsx)("div",{className:"flex justify-center items-center py-12",children:(0,a.jsx)(r.A,{size:40,className:"animate-spin text-[#78f3d3]"})}):f?(0,a.jsxs)("div",{className:"text-center py-12",children:[(0,a.jsx)("div",{className:"text-red-500 mb-4",children:(0,a.jsx)(h.A,{size:48,className:"mx-auto"})}),(0,a.jsx)("h3",{className:"text-lg font-semibold text-[#313D52] mb-2",children:"Error"}),(0,a.jsx)("p",{className:"text-[#6c7a89] mb-4",children:f}),(0,a.jsx)("button",{onClick:y,className:"px-4 py-2 bg-[#78f3d3] text-[#313D52] rounded-lg hover:bg-[#4de0c0] transition-colors",children:"Reintentar"})]}):d?(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,a.jsxs)("div",{className:"lg:col-span-2 space-y-6",children:[(0,a.jsxs)("div",{className:"border border-[#e0e6e5] rounded-lg p-4",children:[(0,a.jsxs)("div",{className:"flex items-center mb-4",children:[(0,a.jsx)(k.A,{size:18,className:"text-[#78f3d3] mr-2"}),(0,a.jsx)("h3",{className:"font-semibold text-[#313D52]",children:"Informaci\xf3n del Cliente"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-xs font-medium text-[#6c7a89] mb-1",children:"Nombre Completo"}),(0,a.jsx)("p",{className:"text-[#313D52]",children:d.full_name})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-xs font-medium text-[#6c7a89] mb-1",children:"Email"}),(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(w.A,{size:14,className:"text-[#6c7a89] mr-2"}),(0,a.jsx)("a",{href:"mailto:".concat(d.client_email),className:"text-[#78f3d3] hover:underline",children:d.client_email})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-xs font-medium text-[#6c7a89] mb-1",children:"Tel\xe9fono"}),(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(A.A,{size:14,className:"text-[#6c7a89] mr-2"}),(0,a.jsx)("a",{href:"tel:".concat(d.client_phone),className:"text-[#78f3d3] hover:underline",children:d.client_phone})]})]}),d.client_address&&(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-xs font-medium text-[#6c7a89] mb-1",children:"Direcci\xf3n"}),(0,a.jsxs)("div",{className:"flex items-start",children:[(0,a.jsx)(z.A,{size:14,className:"text-[#6c7a89] mr-2 mt-0.5"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-[#313D52]",children:d.client_address}),d.client_city&&(0,a.jsxs)("p",{className:"text-xs text-[#6c7a89]",children:[d.client_city,d.client_postal_code&&", ".concat(d.client_postal_code)]})]})]})]})]})]}),(0,a.jsxs)("div",{className:"border border-[#e0e6e5] rounded-lg p-4",children:[(0,a.jsxs)("div",{className:"flex items-center mb-4",children:[(0,a.jsx)(j.A,{size:18,className:"text-[#78f3d3] mr-2"}),(0,a.jsx)("h3",{className:"font-semibold text-[#313D52]",children:"Informaci\xf3n del Servicio"})]}),(0,a.jsxs)("div",{className:"space-y-3 text-sm",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-xs font-medium text-[#6c7a89] mb-1",children:"Servicio"}),(0,a.jsx)("p",{className:"text-[#313D52] font-medium",children:d.service_name}),(0,a.jsx)("p",{className:"text-xs text-[#6c7a89]",children:d.service_description})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-xs font-medium text-[#6c7a89] mb-1",children:"Precio"}),(0,a.jsx)("p",{className:"text-[#313D52] font-semibold",children:(s=d.service_price,new Intl.NumberFormat("es-MX",{style:"currency",currency:"MXN"}).format(s))})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-xs font-medium text-[#6c7a89] mb-1",children:"Duraci\xf3n"}),(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(x.A,{size:14,className:"text-[#6c7a89] mr-1"}),(0,a.jsxs)("p",{className:"text-[#313D52]",children:[d.service_duration," min"]})]})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-xs font-medium text-[#6c7a89] mb-1",children:"Calzado"}),(0,a.jsxs)("p",{className:"text-[#313D52]",children:[d.marca," ",d.modelo]}),d.shoes_description&&(0,a.jsx)("p",{className:"text-xs text-[#6c7a89] mt-1",children:d.shoes_description})]})]})]}),d.notes&&(0,a.jsxs)("div",{className:"border border-[#e0e6e5] rounded-lg p-4",children:[(0,a.jsxs)("div",{className:"flex items-center mb-3",children:[(0,a.jsx)(C.A,{size:18,className:"text-[#78f3d3] mr-2"}),(0,a.jsx)("h3",{className:"font-semibold text-[#313D52]",children:"Notas"})]}),(0,a.jsx)("p",{className:"text-sm text-[#313D52] whitespace-pre-wrap",children:d.notes})]})]}),(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"border border-[#e0e6e5] rounded-lg p-4",children:[(0,a.jsx)("h3",{className:"font-semibold text-[#313D52] mb-4",children:"Acciones"}),(0,a.jsxs)("div",{className:"space-y-2",children:["pending"!==d.status&&(0,a.jsxs)("button",{onClick:()=>_("pending"),disabled:g,className:"w-full flex items-center justify-center px-3 py-2 bg-yellow-100 text-yellow-800 rounded-md hover:bg-yellow-200 transition-colors disabled:opacity-50 text-sm",children:[(0,a.jsx)(x.A,{size:14,className:"mr-2"}),"Pendiente"]}),"completed"!==d.status&&(0,a.jsxs)("button",{onClick:()=>_("completed"),disabled:g,className:"w-full flex items-center justify-center px-3 py-2 bg-green-100 text-green-800 rounded-md hover:bg-green-200 transition-colors disabled:opacity-50 text-sm",children:[(0,a.jsx)(m.A,{size:14,className:"mr-2"}),"Completado"]}),"cancelled"!==d.status&&(0,a.jsxs)("button",{onClick:()=>_("cancelled"),disabled:g,className:"w-full flex items-center justify-center px-3 py-2 bg-red-100 text-red-800 rounded-md hover:bg-red-200 transition-colors disabled:opacity-50 text-sm",children:[(0,a.jsx)(h.A,{size:14,className:"mr-2"}),"Cancelar"]})]})]}),(0,a.jsxs)("div",{className:"border border-[#e0e6e5] rounded-lg p-4",children:[(0,a.jsxs)("div",{className:"flex items-center mb-4",children:[(0,a.jsx)(D.A,{size:18,className:"text-[#78f3d3] mr-2"}),(0,a.jsx)("h3",{className:"font-semibold text-[#313D52]",children:"Fechas"})]}),(0,a.jsxs)("div",{className:"space-y-3 text-sm",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-xs font-medium text-[#6c7a89] mb-1",children:"Reservaci\xf3n"}),(0,a.jsx)("p",{className:"text-[#313D52]",children:E(d.booking_date)})]}),d.estimated_delivery&&(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-xs font-medium text-[#6c7a89] mb-1",children:"Entrega Estimada"}),(0,a.jsx)("p",{className:"text-[#313D52]",children:E(d.estimated_delivery)})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-xs font-medium text-[#6c7a89] mb-1",children:"Creado"}),(0,a.jsx)("p",{className:"text-[#313D52]",children:E(d.created_at)})]})]})]})]})]}):null})]})}):null},E=e=>{let s=(0,l.useRef)(null);return(0,l.useEffect)(()=>{let t=t=>{s.current&&!s.current.contains(t.target)&&e()};return document.addEventListener("mousedown",t),()=>{document.removeEventListener("mousedown",t)}},[e]),s},M=e=>{let{bookings:s=[],onStatusChange:t}=e,[c,n]=(0,l.useState)("booking_date"),[i,d]=(0,l.useState)("desc"),[o,v]=(0,l.useState)(null),[N,k]=(0,l.useState)(null),[w,A]=(0,l.useState)(null),[z,C]=(0,l.useState)(!1),D=E(()=>v(null)),M=e=>{switch(e){case"pending":return"bg-yellow-100 text-yellow-800";case"completed":return"bg-green-100 text-green-800";case"cancelled":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},S=e=>{switch(e){case"pending":return"Pendiente";case"completed":return"Completado";case"cancelled":return"Cancelado";default:return"Desconocido"}},q=e=>{switch(e){case"pending":default:return(0,a.jsx)(x.A,{size:14});case"completed":return(0,a.jsx)(m.A,{size:14});case"cancelled":return(0,a.jsx)(h.A,{size:14})}},P=e=>e?new Date(e).toLocaleDateString("es-MX",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"",R=e=>{c===e?d("asc"===i?"desc":"asc"):(n(e),d("asc"))},L=e=>{v(o===e?null:e)},H=e=>{A(e),C(!0),v(null)},I=async e=>{if(confirm("\xbfEst\xe1s seguro de que deseas eliminar esta reservaci\xf3n?"))try{k(e),console.log("Deleting booking with ID: ".concat(e)),t&&t()}catch(e){console.error("Error al eliminar la reserva:",e),alert("Error al eliminar la reserva")}finally{v(null),k(null)}},F=async(e,s)=>{try{if(k(e),!(await fetch("/api/admin/bookings/".concat(e,"/status"),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:s})})).ok)throw Error("Error al actualizar el estado de la reserva");t&&t()}catch(e){console.error("Error al actualizar el estado de la reserva:",e),alert("Error al actualizar el estado de la reserva")}finally{v(null),k(null)}},V=e=>{switch(e){case"basic":return"Limpieza B\xe1sica";case"premium":return"Limpieza Premium";default:return e}};return 0===s.length?(0,a.jsx)("div",{className:"text-center py-10 text-[#6c7a89]",children:"No se encontraron reservaciones que coincidan con los criterios de b\xfasqueda"}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"overflow-x-auto",style:{minHeight:"400px"},children:(0,a.jsxs)("table",{className:"min-w-full divide-y divide-[#e0e6e5]",children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-[#6c7a89] uppercase tracking-wider cursor-pointer hover:bg-[#f5f9f8]",onClick:()=>R("booking_reference"),children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("span",{children:"Referencia"}),"booking_reference"===c&&(0,a.jsx)(u.A,{size:16,className:"ml-1 transform ".concat("asc"===i?"rotate-180":"")})]})}),(0,a.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-[#6c7a89] uppercase tracking-wider cursor-pointer hover:bg-[#f5f9f8]",onClick:()=>R("full_name"),children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("span",{children:"Cliente"}),"full_name"===c&&(0,a.jsx)(u.A,{size:16,className:"ml-1 transform ".concat("asc"===i?"rotate-180":"")})]})}),(0,a.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-[#6c7a89] uppercase tracking-wider cursor-pointer hover:bg-[#f5f9f8]",onClick:()=>R("service_type"),children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("span",{children:"Servicio"}),"service_type"===c&&(0,a.jsx)(u.A,{size:16,className:"ml-1 transform ".concat("asc"===i?"rotate-180":"")})]})}),(0,a.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-[#6c7a89] uppercase tracking-wider cursor-pointer hover:bg-[#f5f9f8]",onClick:()=>R("booking_date"),children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("span",{children:"Fecha"}),"booking_date"===c&&(0,a.jsx)(u.A,{size:16,className:"ml-1 transform ".concat("asc"===i?"rotate-180":"")})]})}),(0,a.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-[#6c7a89] uppercase tracking-wider cursor-pointer hover:bg-[#f5f9f8]",onClick:()=>R("status"),children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("span",{children:"Estado"}),"status"===c&&(0,a.jsx)(u.A,{size:16,className:"ml-1 transform ".concat("asc"===i?"rotate-180":"")})]})}),(0,a.jsx)("th",{className:"px-4 py-3 text-right text-xs font-medium text-[#6c7a89] uppercase tracking-wider",children:"Acciones"})]})}),(0,a.jsx)("tbody",{className:"bg-white divide-y divide-[#e0e6e5]",children:s.map(e=>(0,a.jsxs)("tr",{className:"hover:bg-[#f5f9f8] ".concat(N===e.id?"opacity-50":""),children:[(0,a.jsx)("td",{className:"px-4 py-3 whitespace-nowrap text-sm font-medium text-[#313D52]",children:e.booking_reference}),(0,a.jsxs)("td",{className:"px-4 py-3 whitespace-nowrap",children:[(0,a.jsx)("div",{className:"text-sm font-medium text-[#313D52]",children:e.full_name}),(0,a.jsx)("div",{className:"text-xs text-[#6c7a89]",children:e.email})]}),(0,a.jsxs)("td",{className:"px-4 py-3 whitespace-nowrap",children:[(0,a.jsx)("div",{className:"text-sm text-[#313D52]",children:V(e.service_type)}),(0,a.jsxs)("div",{className:"text-xs text-[#6c7a89]",children:[e.marca," ",e.modelo]})]}),(0,a.jsx)("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-[#6c7a89]",children:P(e.booking_date)}),(0,a.jsx)("td",{className:"px-4 py-3 whitespace-nowrap",children:N===e.id?(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(r.A,{size:16,className:"animate-spin mr-2 text-[#78f3d3]"}),(0,a.jsx)("span",{className:"text-[#6c7a89] text-xs",children:"Actualizando..."})]}):(0,a.jsxs)("span",{className:"px-2 py-1 inline-flex items-center text-xs leading-5 font-semibold rounded-full ".concat(M(e.status)),children:[(0,a.jsx)("span",{className:"mr-1",children:q(e.status)}),S(e.status)]})}),(0,a.jsx)("td",{className:"px-4 py-3 whitespace-nowrap text-right text-sm font-medium",children:(0,a.jsxs)("div",{className:"relative inline-block text-left",ref:o===e.id?D:null,children:[(0,a.jsx)("button",{onClick:()=>L(e.id),className:"p-1 rounded-full hover:bg-[#e0e6e5] text-[#6c7a89]",disabled:N===e.id,children:(0,a.jsx)(p.A,{size:16})}),o===e.id&&(0,a.jsxs)("div",{className:"absolute right-0 mt-2 w-56 rounded-md shadow-lg bg-white z-50 ring-1 ring-[#e0e6e5] divide-y divide-[#e0e6e5]",children:[(0,a.jsxs)("div",{className:"py-1",children:[(0,a.jsxs)("button",{onClick:()=>H(e.id),className:"flex items-center px-4 py-2 text-sm text-[#313D52] hover:bg-[#f5f9f8] w-full text-left",children:[(0,a.jsx)(f.A,{size:16,className:"mr-3 text-[#6c7a89]"}),"Ver detalles"]}),(0,a.jsxs)(y(),{href:"/admin/bookings/".concat(e.id),className:"flex items-center px-4 py-2 text-sm text-[#313D52] hover:bg-[#f5f9f8]",children:[(0,a.jsx)(j.A,{size:16,className:"mr-3 text-[#6c7a89]"}),"P\xe1gina completa"]}),(0,a.jsxs)(y(),{href:"/admin/bookings/".concat(e.id,"/edit"),className:"flex items-center px-4 py-2 text-sm text-[#313D52] hover:bg-[#f5f9f8]",children:[(0,a.jsx)(b,{size:16,className:"mr-3 text-[#6c7a89]"}),"Editar"]})]}),(0,a.jsxs)("div",{className:"py-1",children:[(0,a.jsxs)("button",{onClick:()=>F(e.id,"pending"),className:"flex items-center px-4 py-2 text-sm text-[#313D52] hover:bg-[#f5f9f8] w-full text-left",disabled:"pending"===e.status,children:[(0,a.jsx)("span",{className:"w-4 h-4 mr-3 rounded-full bg-yellow-100 flex items-center justify-center",children:(0,a.jsx)(x.A,{size:12,className:"text-yellow-800"})}),"Marcar como Pendiente"]}),(0,a.jsxs)("button",{onClick:()=>F(e.id,"completed"),className:"flex items-center px-4 py-2 text-sm text-[#313D52] hover:bg-[#f5f9f8] w-full text-left",disabled:"completed"===e.status,children:[(0,a.jsx)("span",{className:"w-4 h-4 mr-3 rounded-full bg-green-100 flex items-center justify-center",children:(0,a.jsx)(m.A,{size:12,className:"text-green-800"})}),"Marcar como Completado"]}),(0,a.jsxs)("button",{onClick:()=>F(e.id,"cancelled"),className:"flex items-center px-4 py-2 text-sm text-red-600 hover:bg-red-50 w-full text-left",disabled:"cancelled"===e.status,children:[(0,a.jsx)("span",{className:"w-4 h-4 mr-3 rounded-full bg-red-100 flex items-center justify-center",children:(0,a.jsx)(h.A,{size:12,className:"text-red-800"})}),"Cancelar Reservaci\xf3n"]})]}),(0,a.jsx)("div",{className:"py-1",children:(0,a.jsxs)("button",{onClick:()=>I(e.id),className:"flex items-center px-4 py-2 text-sm text-red-600 hover:bg-red-50 w-full text-left",children:[(0,a.jsx)(g.A,{size:16,className:"mr-3"}),"Eliminar"]})})]})]})})]},e.id))})]})}),(0,a.jsx)(_,{bookingId:w,isOpen:z,onClose:()=>{C(!1),A(null)},onStatusUpdate:()=>{t&&t()}})]})};var S=t(16370);function q(){let[e,s]=(0,l.useState)(""),[t,x]=(0,l.useState)(1),[m,h]=(0,l.useState)([]),[u,p]=(0,l.useState)({start:"",end:""}),[f,j]=(0,l.useState)([]),[b,g]=(0,l.useState)(0),[v,y]=(0,l.useState)(1),[N]=(0,l.useState)(10),[k,w]=(0,l.useState)(!0),[A,z]=(0,l.useState)(!1),[C,D]=(0,l.useState)(null),_=async function(){let s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:m,l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e,c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:u;try{z(!0);let e="/api/admin/bookings?page=".concat(s,"&pageSize=").concat(N);a&&a.length>0&&(e+="&status=".concat(a.join(","))),l&&(e+="&search=".concat(encodeURIComponent(l))),c.start&&(e+="&startDate=".concat(encodeURIComponent(c.start))),c.end&&(e+="&endDate=".concat(encodeURIComponent(c.end)));let t=await fetch(e);if(!t.ok)throw Error("Error al cargar las reservaciones");let r=await t.json();j(r.bookings||[]),g(r.total||0),y(r.totalPages||1),D(null)}catch(e){console.error("Error fetching bookings:",e),D("Error al cargar las reservaciones. Intente nuevamente.")}finally{w(!1),z(!1)}};(0,l.useEffect)(()=>{_()},[]);let E=s=>{let{name:t,value:a}=s.target,l={...u,[t]:a};p(l),("start"===t&&a&&u.end||"end"===t&&a&&u.start)&&(x(1),_(1,m,e,l))},q=()=>{_(t,m,e,u)};return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex flex-col md:flex-row md:justify-between md:items-center gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-xl font-semibold text-[#313D52]",children:"Administrar Reservaciones"}),(0,a.jsx)("p",{className:"text-sm text-[#6c7a89]",children:"Visualiza y gestiona las reservaciones de los clientes"})]}),(0,a.jsxs)("div",{className:"flex flex-wrap gap-3",children:[(0,a.jsxs)("button",{onClick:()=>{console.log("Exportando datos..."),alert("Funcionalidad de exportaci\xf3n no implementada a\xfan")},className:"inline-flex items-center px-4 py-2 bg-[#f5f9f8] text-[#313D52] rounded-lg border border-[#e0e6e5] hover:bg-[#e0e6e5] transition-colors",children:[(0,a.jsx)(c.A,{size:16,className:"mr-2"}),"Exportar"]}),(0,a.jsx)("button",{className:"inline-flex items-center px-4 py-2 bg-[#78f3d3] text-[#313D52] rounded-lg hover:bg-[#4de0c0] transition-colors disabled:opacity-50 disabled:cursor-not-allowed",onClick:q,disabled:A,children:A?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(r.A,{size:16,className:"mr-2 animate-spin"}),"Actualizando..."]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.A,{size:16,className:"mr-2"}),"Actualizar"]})})]})]}),(0,a.jsx)("div",{className:"bg-white rounded-lg border border-[#e0e6e5] p-4",children:(0,a.jsxs)("div",{className:"flex flex-col md:flex-row gap-4",children:[(0,a.jsx)("div",{className:"md:flex-1",children:(0,a.jsxs)("form",{onSubmit:s=>{s.preventDefault(),x(1),_(1,m,e,u)},className:"flex items-center relative",children:[(0,a.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,a.jsx)(i.A,{size:18,className:"text-[#6c7a89]"})}),(0,a.jsx)("input",{type:"text",placeholder:"Buscar por cliente, referencia o tipo de servicio...",value:e,onChange:e=>{s(e.target.value)},className:"py-2 pl-10 pr-4 rounded-lg border border-[#e0e6e5] focus:outline-none focus:ring-2 focus:ring-[#78f3d3] text-sm w-full"})]})}),(0,a.jsx)("div",{className:"flex-shrink-0",children:(0,a.jsx)(S.A,{selectedStatus:m,onChange:s=>{h(s),x(1),_(1,s,e,u)}})}),(0,a.jsxs)("div",{className:"flex-shrink-0 flex flex-col sm:flex-row gap-2",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"startDate",className:"block text-xs text-[#6c7a89] mb-1",children:"Desde"}),(0,a.jsx)("input",{type:"date",id:"startDate",name:"start",value:u.start,onChange:E,className:"py-2 px-3 rounded-lg border border-[#e0e6e5] focus:outline-none focus:ring-2 focus:ring-[#78f3d3] text-sm w-full"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"endDate",className:"block text-xs text-[#6c7a89] mb-1",children:"Hasta"}),(0,a.jsx)("input",{type:"date",id:"endDate",name:"end",value:u.end,onChange:E,className:"py-2 px-3 rounded-lg border border-[#e0e6e5] focus:outline-none focus:ring-2 focus:ring-[#78f3d3] text-sm w-full"})]})]})]})}),(0,a.jsxs)("div",{className:"bg-white rounded-lg border border-[#e0e6e5] overflow-hidden",children:[k?(0,a.jsx)("div",{className:"flex justify-center items-center py-20",children:(0,a.jsx)(r.A,{size:40,className:"animate-spin text-[#78f3d3]"})}):C?(0,a.jsxs)("div",{className:"text-center py-10 text-red-500",children:[(0,a.jsx)("p",{children:C}),(0,a.jsx)("button",{onClick:q,className:"mt-4 px-4 py-2 bg-[#78f3d3] text-[#313D52] rounded-lg hover:bg-[#4de0c0] transition-colors",children:"Reintentar"})]}):0===f.length?(0,a.jsx)("div",{className:"text-center py-10 text-[#6c7a89]",children:(0,a.jsx)("p",{children:"No se encontraron reservaciones"})}):(0,a.jsx)(M,{bookings:f,onStatusChange:q}),!k&&!C&&f.length>0&&(0,a.jsxs)("div",{className:"px-4 py-3 flex items-center justify-between border-t border-[#e0e6e5]",children:[(0,a.jsxs)("div",{className:"text-sm text-[#6c7a89]",children:["Mostrando ",(0,a.jsx)("span",{className:"font-medium",children:(t-1)*N+1})," a ",(0,a.jsx)("span",{className:"font-medium",children:Math.min(t*N,b)})," de ",(0,a.jsx)("span",{className:"font-medium",children:b})," resultados"]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("button",{onClick:()=>{if(t>1){let s=t-1;x(s),_(s,m,e,u)}},disabled:1===t,className:"p-2 rounded-lg ".concat(1===t?"text-[#e0e6e5] cursor-not-allowed":"text-[#313D52] hover:bg-[#f5f9f8]"),children:(0,a.jsx)(d.A,{size:20})}),(0,a.jsxs)("span",{className:"text-sm text-[#313D52]",children:["P\xe1gina ",(0,a.jsx)("span",{className:"font-medium",children:t})," de ",(0,a.jsx)("span",{className:"font-medium",children:v})]}),(0,a.jsx)("button",{onClick:()=>{if(t<v){let s=t+1;x(s),_(s,m,e,u)}},disabled:t===v,className:"p-2 rounded-lg ".concat(t===v?"text-[#e0e6e5] cursor-not-allowed":"text-[#313D52] hover:bg-[#f5f9f8]"),children:(0,a.jsx)(o.A,{size:20})})]})]})]})]})}},62525:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(19946).A)("trash-2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},66474:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(19946).A)("chevron-down",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]])},66932:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(19946).A)("funnel",[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]])},69074:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(19946).A)("calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]])},71007:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(19946).A)("user",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},91788:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(19946).A)("download",[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]])},92657:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(19946).A)("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])}},e=>{var s=s=>e(e.s=s);e.O(0,[95,8441,1684,7358],()=>s(26097)),_N_E=e.O()}]);