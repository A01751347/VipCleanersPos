(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6543],{14186:(e,s,a)=>{"use strict";a.d(s,{A:()=>t});let t=(0,a(19946).A)("clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},19946:(e,s,a)=>{"use strict";a.d(s,{A:()=>m});var t=a(12115);let l=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),r=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,s,a)=>a?a.toUpperCase():s.toLowerCase()),i=e=>{let s=r(e);return s.charAt(0).toUpperCase()+s.slice(1)},c=function(){for(var e=arguments.length,s=Array(e),a=0;a<e;a++)s[a]=arguments[a];return s.filter((e,s,a)=>!!e&&""!==e.trim()&&a.indexOf(e)===s).join(" ").trim()},n=e=>{for(let s in e)if(s.startsWith("aria-")||"role"===s||"title"===s)return!0};var d={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let o=(0,t.forwardRef)((e,s)=>{let{color:a="currentColor",size:l=24,strokeWidth:r=2,absoluteStrokeWidth:i,className:o="",children:m,iconNode:x,...h}=e;return(0,t.createElement)("svg",{ref:s,...d,width:l,height:l,stroke:a,strokeWidth:i?24*Number(r)/Number(l):r,className:c("lucide",o),...!m&&!n(h)&&{"aria-hidden":"true"},...h},[...x.map(e=>{let[s,a]=e;return(0,t.createElement)(s,a)}),...Array.isArray(m)?m:[m]])}),m=(e,s)=>{let a=(0,t.forwardRef)((a,r)=>{let{className:n,...d}=a;return(0,t.createElement)(o,{ref:r,iconNode:s,className:c("lucide-".concat(l(i(e))),"lucide-".concat(e),n),...d})});return a.displayName=i(e),a}},28883:(e,s,a)=>{"use strict";a.d(s,{A:()=>t});let t=(0,a(19946).A)("mail",[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]])},35971:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>w});var t=a(95155),l=a(12115),r=a(19946);let i=(0,r.A)("message-circle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);var c=a(28883),n=a(40646),d=a(38564),o=a(47924),m=a(51154),x=a(85339),h=a(97362),u=a(71007),p=a(39022),j=a(14186);let b=(0,r.A)("reply",[["path",{d:"M20 18v-2a4 4 0 0 0-4-4H4",key:"5vmcpk"}],["path",{d:"m9 17-5-5 5-5",key:"nvlc11"}]]);var f=a(54416),g=a(78749),y=a(92657),N=a(69074),v=a(57434),k=a(90105);let A=e=>{let{isOpen:s,onClose:a,message:r,onReplySuccess:i}=e,[d,o]=(0,l.useState)(""),[h,p]=(0,l.useState)(!0),[j,b]=(0,l.useState)(!0),[A,w]=(0,l.useState)(!0),[z,D]=(0,l.useState)(!1),[S,M]=(0,l.useState)(!1),[C,E]=(0,l.useState)(!1),[_,R]=(0,l.useState)(null),H=(0,l.useRef)(null);(0,l.useEffect)(()=>{s&&H.current&&H.current.focus()},[s]);let L=e=>{o(e.content.replace("{name}",r.name)),H.current&&H.current.focus()},P=async()=>{if(!d.trim()){R("Por favor escribe un mensaje de respuesta");return}M(!0),R(null);try{let e=await fetch("/api/admin/messages/".concat(r.id,"/reply"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({replyMessage:d.trim(),includeOriginalMessage:h,markAsRead:j,saveInDatabase:A})}),s=await e.json();if(!e.ok)throw Error(s.error||"Error al enviar la respuesta");E(!0),i&&i(),setTimeout(()=>{T()},3e3)}catch(e){console.error("Error enviando respuesta:",e),R(e instanceof Error?e.message:"Error al enviar la respuesta")}finally{M(!1)}},T=()=>{S||C||(a(),o(""),R(null),E(!1),p(!0),b(!0),w(!0),D(!1))};return s?(0,t.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,t.jsxs)("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center p-6 border-b border-[#e0e6e5]",children:[(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)(c.A,{size:24,className:"text-[#78f3d3] mr-3"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-lg font-semibold text-[#313D52]",children:"Responder Mensaje"}),(0,t.jsxs)("p",{className:"text-sm text-[#6c7a89]",children:["Para: ",r.name," <",r.email,">"]})]})]}),(0,t.jsx)("button",{onClick:T,disabled:S||C,className:"text-[#6c7a89] hover:text-[#313D52] disabled:opacity-50",children:(0,t.jsx)(f.A,{size:24})})]}),(0,t.jsx)("div",{className:"p-6",children:C?(0,t.jsxs)("div",{className:"text-center py-8",children:[(0,t.jsx)("div",{className:"w-16 h-16 bg-[#e0f7f0] rounded-full flex items-center justify-center mx-auto mb-4",children:(0,t.jsx)(n.A,{size:32,className:"text-[#78f3d3]"})}),(0,t.jsx)("h3",{className:"text-lg font-semibold text-[#313D52] mb-2",children:"\xa1Respuesta Enviada!"}),(0,t.jsx)("p",{className:"text-[#6c7a89] mb-4",children:"Tu respuesta ha sido enviada exitosamente a:"}),(0,t.jsx)("p",{className:"text-[#313D52] font-medium",children:r.email}),(0,t.jsx)("p",{className:"text-sm text-[#6c7a89] mt-2",children:"El mensaje se est\xe1 enviando por email..."})]}):(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-[#6c7a89] mb-2",children:"Mensaje de Respuesta *"}),(0,t.jsx)("textarea",{ref:H,value:d,onChange:e=>o(e.target.value),placeholder:"Escribe tu respuesta aqu\xed...",rows:12,className:"w-full px-3 py-2 rounded-lg border border-[#e0e6e5] focus:outline-none focus:ring-2 focus:ring-[#78f3d3] text-sm resize-y",disabled:S}),(0,t.jsxs)("p",{className:"text-xs text-[#6c7a89] mt-1",children:[d.length," caracteres"]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-[#6c7a89] mb-2",children:"Respuestas R\xe1pidas"}),(0,t.jsx)("div",{className:"grid grid-cols-2 gap-2",children:[{name:"Agradecimiento",content:"Hola {name},\n\nGracias por contactarnos. Hemos recibido tu mensaje y nos pondremos en contacto contigo muy pronto.\n\nSi tienes alguna pregunta urgente, no dudes en llamarnos.\n\nSaludos cordiales,"},{name:"Informaci\xf3n General",content:"Hola {name},\n\nGracias por tu inter\xe9s en nuestros servicios. Te enviamos la informaci\xf3n que solicitas:\n\n[Agregar informaci\xf3n espec\xedfica aqu\xed]\n\nSi necesitas m\xe1s detalles, estaremos encantados de ayudarte.\n\nSaludos,"},{name:"Cotizaci\xf3n",content:"Hola {name},\n\nGracias por tu solicitud de cotizaci\xf3n. Para poder brindarte un presupuesto preciso, necesitar\xedamos algunos detalles adicionales:\n\n• [Detalle 1]\n• [Detalle 2]\n• [Detalle 3]\n\nUna vez que tengamos esta informaci\xf3n, te enviaremos una cotizaci\xf3n detallada.\n\nSaludos,"},{name:"Disculpa por la demora",content:"Hola {name},\n\nPrimero que nada, queremos disculparnos por la demora en responder tu mensaje.\n\n[Respuesta espec\xedfica al mensaje]\n\nApreciamos tu paciencia y esperamos poder ayudarte.\n\nSaludos,"}].map((e,s)=>(0,t.jsx)("button",{onClick:()=>L(e),disabled:S,className:"px-3 py-2 text-xs bg-[#f5f9f8] text-[#313D52] rounded-lg hover:bg-[#e0e6e5] transition-colors disabled:opacity-50 text-left",children:e.name},s))})]}),(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)("input",{type:"checkbox",id:"includeOriginal",checked:h,onChange:e=>p(e.target.checked),disabled:S,className:"mr-3"}),(0,t.jsx)("label",{htmlFor:"includeOriginal",className:"text-sm text-[#313D52]",children:"Incluir mensaje original en la respuesta"})]}),(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)("input",{type:"checkbox",id:"markAsRead",checked:j,onChange:e=>b(e.target.checked),disabled:S,className:"mr-3"}),(0,t.jsx)("label",{htmlFor:"markAsRead",className:"text-sm text-[#313D52]",children:"Marcar mensaje como le\xeddo"})]}),(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)("input",{type:"checkbox",id:"saveInDatabase",checked:A,onChange:e=>w(e.target.checked),disabled:S,className:"mr-3"}),(0,t.jsx)("label",{htmlFor:"saveInDatabase",className:"text-sm text-[#313D52]",children:"Guardar respuesta en la base de datos"})]})]}),_&&(0,t.jsxs)("div",{className:"p-3 bg-red-50 text-red-600 rounded-lg flex items-start",children:[(0,t.jsx)(x.A,{size:16,className:"mt-0.5 mr-2 flex-shrink-0"}),(0,t.jsx)("span",{className:"text-sm",children:_})]})]}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-[#6c7a89]",children:"Mensaje Original"}),(0,t.jsx)("button",{onClick:()=>D(!z),className:"flex items-center text-xs text-[#6c7a89] hover:text-[#313D52]",children:z?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(g.A,{size:14,className:"mr-1"}),"Ocultar Vista Previa"]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(y.A,{size:14,className:"mr-1"}),"Mostrar Vista Previa"]})})]}),(0,t.jsx)("div",{className:"bg-[#f5f9f8] border border-[#e0e6e5] rounded-lg p-4",children:(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)(u.A,{size:16,className:"text-[#6c7a89] mr-2"}),(0,t.jsx)("span",{className:"text-sm font-medium text-[#313D52]",children:r.name})]}),(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)(c.A,{size:16,className:"text-[#6c7a89] mr-2"}),(0,t.jsx)("span",{className:"text-sm text-[#313D52]",children:r.email})]}),(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)(N.A,{size:16,className:"text-[#6c7a89] mr-2"}),(0,t.jsx)("span",{className:"text-sm text-[#6c7a89]",children:new Date(r.created_at).toLocaleDateString("es-MX",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})})]}),(0,t.jsx)("div",{children:(0,t.jsxs)("div",{className:"flex items-center mb-2",children:[(0,t.jsx)(v.A,{size:16,className:"text-[#6c7a89] mr-2"}),(0,t.jsxs)("span",{className:"text-sm font-medium text-[#313D52]",children:["Asunto: ",r.subject]})]})}),(0,t.jsx)("div",{className:"bg-white rounded-lg p-3 border border-[#e0e6e5]",children:(0,t.jsx)("p",{className:"text-sm text-[#313D52] whitespace-pre-wrap leading-relaxed",children:r.message})})]})}),z&&h&&(0,t.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[(0,t.jsx)("h4",{className:"text-sm font-medium text-blue-800 mb-2",children:"Vista Previa del Email"}),(0,t.jsxs)("div",{className:"text-xs text-blue-700 space-y-1",children:[(0,t.jsxs)("p",{children:[(0,t.jsx)("strong",{children:"Para:"})," ",r.email]}),(0,t.jsxs)("p",{children:[(0,t.jsx)("strong",{children:"Asunto:"})," Re: ",r.subject]}),(0,t.jsx)("p",{children:(0,t.jsx)("strong",{children:"Incluir\xe1:"})}),(0,t.jsxs)("ul",{className:"list-disc list-inside ml-2 space-y-1",children:[(0,t.jsx)("li",{children:"Tu mensaje de respuesta"}),(0,t.jsx)("li",{children:"El mensaje original del cliente"}),(0,t.jsx)("li",{children:"Informaci\xf3n de contacto de la empresa"}),(0,t.jsx)("li",{children:"Formato profesional HTML + texto plano"})]})]})]}),(0,t.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4",children:[(0,t.jsx)("h4",{className:"text-sm font-medium text-[#313D52] mb-2",children:"\uD83D\uDCA1 Consejos para una buena respuesta:"}),(0,t.jsxs)("ul",{className:"text-xs text-[#6c7a89] space-y-1",children:[(0,t.jsx)("li",{children:"• Saluda al cliente por su nombre"}),(0,t.jsx)("li",{children:"• S\xe9 espec\xedfico y claro en tu respuesta"}),(0,t.jsx)("li",{children:"• Incluye informaci\xf3n de contacto si es relevante"}),(0,t.jsx)("li",{children:"• Mant\xe9n un tono profesional y amigable"}),(0,t.jsx)("li",{children:"• Agradece al cliente por su inter\xe9s"})]})]})]})]})}),!C&&(0,t.jsxs)("div",{className:"flex justify-end space-x-3 p-6 border-t border-[#e0e6e5]",children:[(0,t.jsx)("button",{onClick:T,disabled:S,className:"px-4 py-2 border border-[#e0e6e5] text-[#6c7a89] rounded-lg hover:bg-[#f5f9f8] transition-colors disabled:opacity-50",children:"Cancelar"}),(0,t.jsx)("button",{onClick:P,disabled:S||!d.trim(),className:"px-6 py-2 bg-[#78f3d3] text-[#313D52] font-medium rounded-lg hover:bg-[#4de0c0] transition-colors flex items-center disabled:opacity-50 disabled:hover:bg-[#78f3d3]",children:S?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(m.A,{size:18,className:"animate-spin mr-2"}),"Enviando..."]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(k.A,{size:18,className:"mr-2"}),"Enviar Respuesta"]})})]})]})}):null};function w(){let[e,s]=(0,l.useState)([]),[a,r]=(0,l.useState)({total_mensajes:0,no_leidos:0,respondidos:0,sin_responder:0,destacados:0,archivados:0,promedio_respuesta_horas:0}),[f,g]=(0,l.useState)(!0),[y,N]=(0,l.useState)(null),[v,k]=(0,l.useState)(null),[w,z]=(0,l.useState)(!1),[D,S]=(0,l.useState)(1),[M,C]=(0,l.useState)(1),[E]=(0,l.useState)(10),[_,R]=(0,l.useState)("all"),[H,L]=(0,l.useState)(""),[P,T]=(0,l.useState)("fecha_creacion"),[q,O]=(0,l.useState)("desc"),[F,I]=(0,l.useState)({});(0,l.useEffect)(()=>{G(),V()},[D,_,H,P,q]);let G=async()=>{try{g(!0);let e=new URLSearchParams({page:D.toString(),pageSize:E.toString(),filter:_,searchQuery:H,sortField:P,sortDirection:q}),a=await fetch("/api/admin/messages?".concat(e));if(!a.ok)throw Error("Error al cargar los mensajes");let t=await a.json();s(t.messages),C(t.totalPages),N(null)}catch(e){console.error("Error fetching messages:",e),N(e instanceof Error?e.message:"Error desconocido")}finally{g(!1)}},V=async()=>{try{let e=await fetch("/api/admin/messages/stats");if(e.ok){let s=await e.json();r(s)}}catch(e){console.error("Error fetching stats:",e)}},U=async(e,a,t)=>{try{if(I(s=>({...s,[e]:!0})),!(await fetch("/api/admin/messages/".concat(e,"/status"),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:a,value:t})})).ok)throw Error("Error al actualizar el estado");s(s=>s.map(s=>s.id===e?{...s,["is_".concat(a)]:t}:s)),V()}catch(e){console.error("Error updating status:",e),alert("Error al actualizar el estado del mensaje")}finally{I(s=>({...s,[e]:!1}))}},Z=e=>{e.is_read||U(e.id,"read",!0),k(e),z(!0)},W=e=>new Date(e).toLocaleDateString("es-MX",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),B=e=>{let s=new Date,a=new Date(e),t=Math.floor((s.getTime()-a.getTime())/36e5);if(t<1)return"Hace menos de 1 hora";if(t<24)return"Hace ".concat(t," horas");let l=Math.floor(t/24);return l<7?"Hace ".concat(l," d\xedas"):W(e)},J=function(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100;return e.length<=s?e:e.substring(0,s).trim()+"..."};return(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsx)("div",{className:"flex justify-between items-center",children:(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-2xl font-bold text-[#313D52]",children:"Mensajes de Contacto"}),(0,t.jsx)("p",{className:"text-[#6c7a89] mt-1",children:"Gestiona todos los mensajes recibidos desde el formulario de contacto"})]})}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,t.jsx)("div",{className:"bg-white rounded-lg border border-[#e0e6e5] p-4",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm text-[#6c7a89]",children:"Total Mensajes"}),(0,t.jsx)("p",{className:"text-2xl font-bold text-[#313D52]",children:a.total_mensajes})]}),(0,t.jsx)("div",{className:"p-3 bg-[#e0f7f0] rounded-lg",children:(0,t.jsx)(i,{size:24,className:"text-[#78f3d3]"})})]})}),(0,t.jsx)("div",{className:"bg-white rounded-lg border border-[#e0e6e5] p-4",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm text-[#6c7a89]",children:"No Le\xeddos"}),(0,t.jsx)("p",{className:"text-2xl font-bold text-blue-600",children:a.no_leidos})]}),(0,t.jsx)("div",{className:"p-3 bg-blue-100 rounded-lg",children:(0,t.jsx)(c.A,{size:24,className:"text-blue-600"})})]})}),(0,t.jsx)("div",{className:"bg-white rounded-lg border border-[#e0e6e5] p-4",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm text-[#6c7a89]",children:"Respondidos"}),(0,t.jsx)("p",{className:"text-2xl font-bold text-green-600",children:a.respondidos})]}),(0,t.jsx)("div",{className:"p-3 bg-green-100 rounded-lg",children:(0,t.jsx)(n.A,{size:24,className:"text-green-600"})})]})}),(0,t.jsx)("div",{className:"bg-white rounded-lg border border-[#e0e6e5] p-4",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm text-[#6c7a89]",children:"Destacados"}),(0,t.jsx)("p",{className:"text-2xl font-bold text-yellow-600",children:a.destacados})]}),(0,t.jsx)("div",{className:"p-3 bg-yellow-100 rounded-lg",children:(0,t.jsx)(d.A,{size:24,className:"text-yellow-600"})})]})})]}),(0,t.jsx)("div",{className:"bg-white rounded-lg border border-[#e0e6e5] p-4",children:(0,t.jsxs)("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between space-y-4 lg:space-y-0 lg:space-x-4",children:[(0,t.jsx)("div",{className:"flex-1 max-w-md",children:(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)(o.A,{size:20,className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-[#6c7a89]"}),(0,t.jsx)("input",{type:"text",placeholder:"Buscar mensajes...",value:H,onChange:e=>{L(e.target.value),S(1)},className:"w-full pl-10 pr-4 py-2 border border-[#e0e6e5] rounded-lg focus:outline-none focus:ring-2 focus:ring-[#78f3d3]"})]})}),(0,t.jsx)("div",{className:"flex flex-wrap gap-2",children:[{key:"all",label:"Todos",count:a.total_mensajes},{key:"unread",label:"No Le\xeddos",count:a.no_leidos},{key:"starred",label:"Destacados",count:a.destacados},{key:"archived",label:"Archivados",count:a.archivados}].map(e=>{let{key:s,label:a,count:l}=e;return(0,t.jsxs)("button",{onClick:()=>{R(s),S(1)},className:"px-4 py-2 rounded-lg text-sm font-medium transition-colors ".concat(_===s?"bg-[#78f3d3] text-[#313D52]":"bg-gray-100 text-[#6c7a89] hover:bg-gray-200"),children:[a,l>0&&(0,t.jsx)("span",{className:"ml-2 px-2 py-0.5 rounded-full text-xs ".concat(_===s?"bg-[#313D52] text-white":"bg-white text-[#6c7a89]"),children:l})]},s)})})]})}),(0,t.jsxs)("div",{className:"bg-white rounded-lg border border-[#e0e6e5]",children:[f?(0,t.jsx)("div",{className:"flex justify-center items-center py-12",children:(0,t.jsx)(m.A,{size:40,className:"animate-spin text-[#78f3d3]"})}):y?(0,t.jsxs)("div",{className:"text-center py-12",children:[(0,t.jsx)(x.A,{size:48,className:"text-red-500 mx-auto mb-4"}),(0,t.jsx)("h3",{className:"text-lg font-semibold text-[#313D52] mb-2",children:"Error al cargar mensajes"}),(0,t.jsx)("p",{className:"text-[#6c7a89] mb-4",children:y}),(0,t.jsx)("button",{onClick:G,className:"px-4 py-2 bg-[#78f3d3] text-[#313D52] rounded-lg hover:bg-[#4de0c0] transition-colors",children:"Reintentar"})]}):0===e.length?(0,t.jsxs)("div",{className:"text-center py-12",children:[(0,t.jsx)(c.A,{size:48,className:"text-[#6c7a89] mx-auto mb-4"}),(0,t.jsx)("h3",{className:"text-lg font-semibold text-[#313D52] mb-2",children:"No hay mensajes"}),(0,t.jsx)("p",{className:"text-[#6c7a89]",children:"all"===_?"No se han recibido mensajes a\xfan.":"No hay mensajes ".concat("unread"===_?"no le\xeddos":"starred"===_?"destacados":"archivados",".")})]}):(0,t.jsx)("div",{className:"divide-y divide-[#e0e6e5]",children:e.map(e=>(0,t.jsx)("div",{className:"p-4 hover:bg-[#f5f9f8] transition-colors ".concat(e.is_read?"":"bg-blue-50"),children:(0,t.jsxs)("div",{className:"flex items-start justify-between",children:[(0,t.jsxs)("div",{className:"flex-1 min-w-0 mr-4",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-3 mb-2",children:[(0,t.jsx)("div",{className:"flex items-center",children:e.is_read?(0,t.jsx)(h.A,{size:16,className:"text-[#6c7a89]"}):(0,t.jsx)(c.A,{size:16,className:"text-blue-600"})}),(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)(u.A,{size:14,className:"text-[#6c7a89] mr-1"}),(0,t.jsx)("span",{className:"font-semibold text-[#313D52]",children:e.name})]}),(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)(c.A,{size:14,className:"text-[#6c7a89] mr-1"}),(0,t.jsx)("span",{className:"text-sm text-[#6c7a89]",children:e.email})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-1",children:[e.is_starred?(0,t.jsx)(d.A,{size:14,className:"text-yellow-500"}):[null],e.is_archived?(0,t.jsx)(p.A,{size:14,className:"text-[#6c7a89]"}):[null]]})]}),(0,t.jsx)("h3",{className:"font-semibold text-[#313D52] mb-1",children:e.subject}),(0,t.jsx)("p",{className:"text-[#6c7a89] text-sm mb-2 leading-relaxed",children:J(e.message,120)}),(0,t.jsxs)("div",{className:"flex items-center text-xs text-[#6c7a89]",children:[(0,t.jsx)(j.A,{size:12,className:"mr-1"}),(0,t.jsx)("span",{children:B(e.created_at)})]})]}),(0,t.jsxs)("div",{className:"flex flex-col space-y-2",children:[(0,t.jsx)("div",{className:"flex space-x-2",children:(0,t.jsxs)("button",{onClick:()=>Z(e),className:"flex items-center px-3 py-1.5 bg-[#78f3d3] text-[#313D52] rounded-lg hover:bg-[#4de0c0] transition-colors text-sm font-medium",title:"Responder mensaje",children:[(0,t.jsx)(b,{size:14,className:"mr-1"}),"Responder"]})}),(0,t.jsxs)("div",{className:"flex space-x-1",children:[!e.is_read&&(0,t.jsx)("button",{onClick:()=>U(e.id,"read",!0),disabled:F[e.id],className:"p-1.5 text-blue-600 hover:bg-blue-100 rounded transition-colors",title:"Marcar como le\xeddo",children:(0,t.jsx)(n.A,{size:14})}),(0,t.jsx)("button",{onClick:()=>U(e.id,"starred",!e.is_starred),disabled:F[e.id],className:"p-1.5 rounded transition-colors ".concat(e.is_starred?"text-yellow-600 hover:bg-yellow-100":"text-[#6c7a89] hover:bg-gray-100"),title:e.is_starred?"Quitar destacado":"Destacar",children:(0,t.jsx)(d.A,{size:14})}),(0,t.jsx)("button",{onClick:()=>U(e.id,"archived",!e.is_archived),disabled:F[e.id],className:"p-1.5 text-[#6c7a89] hover:bg-gray-100 rounded transition-colors",title:e.is_archived?"Desarchivar":"Archivar",children:(0,t.jsx)(p.A,{size:14})})]})]})]})},e.id))}),M>1&&(0,t.jsxs)("div",{className:"flex justify-between items-center px-4 py-3 border-t border-[#e0e6e5]",children:[(0,t.jsxs)("p",{className:"text-sm text-[#6c7a89]",children:["P\xe1gina ",D," de ",M]}),(0,t.jsxs)("div",{className:"flex space-x-2",children:[(0,t.jsx)("button",{onClick:()=>S(e=>Math.max(1,e-1)),disabled:1===D,className:"px-3 py-1 border border-[#e0e6e5] rounded text-sm disabled:opacity-50 disabled:cursor-not-allowed hover:bg-[#f5f9f8]",children:"Anterior"}),(0,t.jsx)("button",{onClick:()=>S(e=>Math.min(M,e+1)),disabled:D===M,className:"px-3 py-1 border border-[#e0e6e5] rounded text-sm disabled:opacity-50 disabled:cursor-not-allowed hover:bg-[#f5f9f8]",children:"Siguiente"})]})]})]}),v&&(0,t.jsx)(A,{isOpen:w,onClose:()=>{z(!1),k(null)},message:v,onReplySuccess:()=>{G(),V(),z(!1),k(null)}})]})}},38564:(e,s,a)=>{"use strict";a.d(s,{A:()=>t});let t=(0,a(19946).A)("star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]])},39022:(e,s,a)=>{"use strict";a.d(s,{A:()=>t});let t=(0,a(19946).A)("archive",[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]])},40646:(e,s,a)=>{"use strict";a.d(s,{A:()=>t});let t=(0,a(19946).A)("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},47924:(e,s,a)=>{"use strict";a.d(s,{A:()=>t});let t=(0,a(19946).A)("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]])},51154:(e,s,a)=>{"use strict";a.d(s,{A:()=>t});let t=(0,a(19946).A)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},54416:(e,s,a)=>{"use strict";a.d(s,{A:()=>t});let t=(0,a(19946).A)("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},57434:(e,s,a)=>{"use strict";a.d(s,{A:()=>t});let t=(0,a(19946).A)("file-text",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]])},69074:(e,s,a)=>{"use strict";a.d(s,{A:()=>t});let t=(0,a(19946).A)("calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]])},71007:(e,s,a)=>{"use strict";a.d(s,{A:()=>t});let t=(0,a(19946).A)("user",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},78749:(e,s,a)=>{"use strict";a.d(s,{A:()=>t});let t=(0,a(19946).A)("eye-off",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]])},85339:(e,s,a)=>{"use strict";a.d(s,{A:()=>t});let t=(0,a(19946).A)("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},90105:(e,s,a)=>{"use strict";a.d(s,{A:()=>t});let t=(0,a(19946).A)("send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]])},92657:(e,s,a)=>{"use strict";a.d(s,{A:()=>t});let t=(0,a(19946).A)("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},94489:(e,s,a)=>{Promise.resolve().then(a.bind(a,35971))},97362:(e,s,a)=>{"use strict";a.d(s,{A:()=>t});let t=(0,a(19946).A)("mail-open",[["path",{d:"M21.2 8.4c.5.38.8.97.8 1.6v10a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V10a2 2 0 0 1 .8-1.6l8-6a2 2 0 0 1 2.4 0l8 6Z",key:"1jhwl8"}],["path",{d:"m22 10-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 10",key:"1qfld7"}]])}},e=>{var s=s=>e(e.s=s);e.O(0,[8441,1684,7358],()=>s(94489)),_N_E=e.O()}]);