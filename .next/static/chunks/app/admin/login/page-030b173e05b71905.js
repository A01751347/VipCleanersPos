(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2116],{3366:(e,s,t)=>{Promise.resolve().then(t.bind(t,5823))},5823:(e,s,t)=>{"use strict";t.d(s,{default:()=>h});var r=t(95155),a=t(12115),i=t(35695),l=t(12108),n=t(51154),c=t(19946);let d=(0,c.A)("shield-alert",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]]);var o=t(28883);let u=(0,c.A)("lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);var m=t(78749),x=t(92657);function h(){var e;let[s,t]=(0,a.useState)(""),[c,h]=(0,a.useState)(""),[f,p]=(0,a.useState)(!1),[v,b]=(0,a.useState)(""),[j,g]=(0,a.useState)(!1),y=(0,i.useSearchParams)(),N=(0,i.useRouter)(),{data:w,status:k,update:A}=(0,l.useSession)();(0,a.useEffect)(()=>{(null==y?void 0:y.get("error"))&&b("Error de autenticaci\xf3n. Por favor, verifica tus credenciales.")},[y]),(0,a.useEffect)(()=>{var e;"authenticated"===k&&(null==w?void 0:null===(e=w.user)||void 0===e?void 0:e.role)==="admin"&&N.replace("/admin")},[w,k,N]);let C=async e=>{if(e.preventDefault(),!s||!c){b("Por favor, ingresa tu correo y contrase\xf1a");return}try{g(!0),b("");let e=await (0,l.signIn)("credentials",{email:s,password:c,redirect:!1});if(null==e?void 0:e.error)b("Email o contrase\xf1a incorrectos");else if(null==e?void 0:e.ok){var t;await A();let e=await (0,l.getSession)();(null==e?void 0:null===(t=e.user)||void 0===t?void 0:t.role)==="admin"?window.location.href="/admin":b("No tienes permisos de administrador")}else b("Error inesperado al iniciar sesi\xf3n")}catch(e){console.error("\uD83D\uDCA5 Error en handleSubmit:",e),b("Ocurri\xf3 un error al iniciar sesi\xf3n.")}finally{g(!1)}};return"loading"===k?(0,r.jsxs)("div",{className:"min-h-screen flex flex-col justify-center items-center px-4 bg-[#f5f9f8]",children:[(0,r.jsx)(n.A,{size:50,className:"animate-spin text-[#78f3d3]"}),(0,r.jsx)("p",{className:"mt-4 text-[#313D52]",children:"Verificando sesi\xf3n..."})]}):(null==w?void 0:null===(e=w.user)||void 0===e?void 0:e.role)==="admin"?(0,r.jsx)("div",{className:"min-h-screen flex flex-col justify-center items-center px-4 bg-[#f5f9f8]",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"w-16 h-16 bg-[#e0f7f0] rounded-full flex items-center justify-center mx-auto mb-4",children:(0,r.jsx)(d,{size:32,className:"text-[#78f3d3]"})}),(0,r.jsx)("h2",{className:"text-xl font-semibold text-[#313D52] mb-2",children:"Ya est\xe1s conectado"}),(0,r.jsx)("p",{className:"text-[#6c7a89] mb-4",children:"Redirigiendo al panel de administraci\xf3n..."}),(0,r.jsx)(n.A,{size:24,className:"animate-spin text-[#78f3d3] mx-auto"}),(0,r.jsx)("button",{onClick:()=>window.location.href="/admin",className:"mt-4 px-4 py-2 bg-[#78f3d3] text-[#313D52] rounded-lg hover:bg-[#4de0c0] transition-colors",children:"Ir al Panel"})]})}):(0,r.jsxs)("div",{className:"min-h-screen flex flex-col justify-center items-center px-4 bg-[#f5f9f8]",children:[(0,r.jsxs)("div",{className:"max-w-md w-full bg-white rounded-xl shadow-lg p-8",children:[(0,r.jsxs)("div",{className:"text-center mb-8",children:[(0,r.jsxs)("h1",{className:"text-2xl font-bold text-[#313D52] mb-2",children:["Vip",(0,r.jsx)("span",{className:"text-[#78f3d3]",children:"Cleaners"})]}),(0,r.jsx)("p",{className:"text-[#6c7a89]",children:"Panel de Administraci\xf3n"})]}),v&&(0,r.jsxs)("div",{className:"mb-6 p-4 bg-red-50 text-red-700 rounded-lg flex items-center",children:[(0,r.jsx)(d,{size:20,className:"mr-2 flex-shrink-0"}),(0,r.jsx)("p",{children:v})]}),j&&(0,r.jsxs)("div",{className:"mb-6 p-4 bg-blue-50 text-blue-700 rounded-lg flex items-center",children:[(0,r.jsx)(n.A,{size:20,className:"mr-2 flex-shrink-0 animate-spin"}),(0,r.jsx)("p",{children:"Iniciando sesi\xf3n..."})]}),(0,r.jsxs)("form",{onSubmit:C,className:"space-y-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"email",className:"block text-sm font-medium text-[#313D52] mb-2",children:"Correo Electr\xf3nico"}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,r.jsx)(o.A,{size:18,className:"text-[#6c7a89]"})}),(0,r.jsx)("input",{id:"email",name:"email",type:"email",required:!0,value:s,onChange:e=>t(e.target.value),className:"w-full py-3 pl-10 pr-4 border border-[#e0e6e5] rounded-lg focus:outline-none focus:ring-2 focus:ring-[#78f3d3]",placeholder:"admin@vipcleaner.com",disabled:j})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"password",className:"block text-sm font-medium text-[#313D52] mb-2",children:"Contrase\xf1a"}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,r.jsx)(u,{size:18,className:"text-[#6c7a89]"})}),(0,r.jsx)("input",{id:"password",name:"password",type:f?"text":"password",required:!0,value:c,onChange:e=>h(e.target.value),className:"w-full py-3 pl-10 pr-12 border border-[#e0e6e5] rounded-lg focus:outline-none focus:ring-2 focus:ring-[#78f3d3]",placeholder:"••••••••",disabled:j}),(0,r.jsx)("div",{className:"absolute inset-y-0 right-0 pr-3 flex items-center",children:(0,r.jsx)("button",{type:"button",onClick:()=>p(!f),className:"text-[#6c7a89] hover:text-[#313D52] focus:outline-none",disabled:j,children:f?(0,r.jsx)(m.A,{size:18}):(0,r.jsx)(x.A,{size:18})})})]})]}),(0,r.jsx)("button",{type:"submit",disabled:j,className:"w-full py-3 px-4 rounded-lg bg-[#78f3d3] text-[#313D52] font-semibold shadow-sm hover:bg-[#4de0c0] focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-[#78f3d3] flex items-center justify-center ".concat(j?"opacity-70 cursor-not-allowed":""),children:j?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.A,{size:20,className:"mr-2 animate-spin"}),"Iniciando sesi\xf3n..."]}):"Iniciar Sesi\xf3n"})]}),(0,r.jsx)("div",{className:"mt-8 text-center text-sm text-[#6c7a89]",children:(0,r.jsx)("p",{children:"\xbfProblemas para acceder? Contacta al administrador del sistema."})})]}),(0,r.jsx)("div",{className:"mt-8 text-center text-sm text-[#6c7a89]",children:(0,r.jsxs)("p",{children:["\xa9 ",new Date().getFullYear()," VipCleaners. Todos los derechos reservados."]})})]})}},19946:(e,s,t)=>{"use strict";t.d(s,{A:()=>u});var r=t(12115);let a=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),i=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,s,t)=>t?t.toUpperCase():s.toLowerCase()),l=e=>{let s=i(e);return s.charAt(0).toUpperCase()+s.slice(1)},n=function(){for(var e=arguments.length,s=Array(e),t=0;t<e;t++)s[t]=arguments[t];return s.filter((e,s,t)=>!!e&&""!==e.trim()&&t.indexOf(e)===s).join(" ").trim()},c=e=>{for(let s in e)if(s.startsWith("aria-")||"role"===s||"title"===s)return!0};var d={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let o=(0,r.forwardRef)((e,s)=>{let{color:t="currentColor",size:a=24,strokeWidth:i=2,absoluteStrokeWidth:l,className:o="",children:u,iconNode:m,...x}=e;return(0,r.createElement)("svg",{ref:s,...d,width:a,height:a,stroke:t,strokeWidth:l?24*Number(i)/Number(a):i,className:n("lucide",o),...!u&&!c(x)&&{"aria-hidden":"true"},...x},[...m.map(e=>{let[s,t]=e;return(0,r.createElement)(s,t)}),...Array.isArray(u)?u:[u]])}),u=(e,s)=>{let t=(0,r.forwardRef)((t,i)=>{let{className:c,...d}=t;return(0,r.createElement)(o,{ref:i,iconNode:s,className:n("lucide-".concat(a(l(e))),"lucide-".concat(e),c),...d})});return t.displayName=l(e),t}},28883:(e,s,t)=>{"use strict";t.d(s,{A:()=>r});let r=(0,t(19946).A)("mail",[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]])},35695:(e,s,t)=>{"use strict";var r=t(18999);t.o(r,"useParams")&&t.d(s,{useParams:function(){return r.useParams}}),t.o(r,"usePathname")&&t.d(s,{usePathname:function(){return r.usePathname}}),t.o(r,"useRouter")&&t.d(s,{useRouter:function(){return r.useRouter}}),t.o(r,"useSearchParams")&&t.d(s,{useSearchParams:function(){return r.useSearchParams}})},51154:(e,s,t)=>{"use strict";t.d(s,{A:()=>r});let r=(0,t(19946).A)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},78749:(e,s,t)=>{"use strict";t.d(s,{A:()=>r});let r=(0,t(19946).A)("eye-off",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]])},92657:(e,s,t)=>{"use strict";t.d(s,{A:()=>r});let r=(0,t(19946).A)("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])}},e=>{var s=s=>e(e.s=s);e.O(0,[2108,8441,1684,7358],()=>s(3366)),_N_E=e.O()}]);