(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3124],{10976:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>H});var t=a(95155),r=a(12115),i=a(27414),l=a(81586),n=a(53904),c=a(46767),d=a(55868),o=a(40646),m=a(27213),x=a(1243),u=a(42337),h=a(48293),f=a(76028),b=a(13717),p=a(84616),j=a(51154),g=a(35169),N=a(81304),v=a(28883),y=a(71007),w=a(92138),_=a(69074),z=a(86151),D=a(81284),A=a(37108),C=a(14186),k=a(6874),E=a.n(k),S=a(35695),P=a(97108),I=a(29799),F=a(54861),T=a(54416);let M=e=>{var s,a;let{currentStatus:i,onClose:l,onSubmit:n}=e,[c,d]=(0,r.useState)(i),[m,x]=(0,r.useState)(""),[u,h]=(0,r.useState)(!1),f=[{id:9,name:"Pendiente",icon:(0,t.jsx)(A.A,{size:16}),color:"bg-yellow-100 text-yellow-800 border-yellow-200",description:"La orden ha sido creada pero a\xfan no ha sido recibida f\xedsicamente."},{id:1,name:"Recibido",icon:(0,t.jsx)(P.A,{size:16}),color:"bg-blue-100 text-blue-800 border-blue-200",description:"Se ha recibido f\xedsicamente el producto o calzado para servicio."},{id:2,name:"En Proceso",icon:(0,t.jsx)(C.A,{size:16}),color:"bg-orange-100 text-orange-800 border-orange-200",description:"Se est\xe1 trabajando activamente en el servicio o producto."},{id:6,name:"Completado",icon:(0,t.jsx)(o.A,{size:16}),color:"bg-green-100 text-green-800 border-green-200",description:"El servicio ha sido completado y est\xe1 listo para entrega."},{id:7,name:"Entregado",icon:(0,t.jsx)(I.A,{size:16}),color:"bg-green-100 text-green-800 border-green-200",description:"El producto o calzado ha sido entregado al cliente."},{id:8,name:"Cancelado",icon:(0,t.jsx)(F.A,{size:16}),color:"bg-red-100 text-red-800 border-red-200",description:"La orden ha sido cancelada."}],b=f.find(e=>e.id===i),p=async e=>{if(e.preventDefault(),c===i){l();return}try{h(!0),await n(c,m)}catch(e){console.error("Error al actualizar el estado:",e),h(!1)}};return(0,t.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:(0,t.jsxs)("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-lg relative overflow-hidden",children:[(0,t.jsx)("button",{onClick:l,className:"absolute top-4 right-4 text-[#6c7a89] hover:text-[#313D52] p-1 rounded-full hover:bg-[#f5f9f8]",disabled:u,children:(0,t.jsx)(T.A,{size:20})}),(0,t.jsxs)("div",{className:"p-6 border-b border-[#e0e6e5]",children:[(0,t.jsx)("h2",{className:"text-lg font-semibold text-[#313D52]",children:"Actualizar Estado de la Orden"}),(0,t.jsxs)("p",{className:"text-[#6c7a89] text-sm mt-1",children:["Estado actual:",(0,t.jsxs)("span",{className:"ml-2 px-2 py-0.5 rounded-full text-xs font-medium inline-flex items-center ".concat(null==b?void 0:b.color),children:[null==b?void 0:b.icon,(0,t.jsx)("span",{className:"ml-1",children:null==b?void 0:b.name})]})]})]}),(0,t.jsxs)("form",{onSubmit:p,className:"p-6",children:[(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-[#313D52] mb-2",children:"Seleccionar Nuevo Estado"}),(0,t.jsx)("div",{className:"grid grid-cols-2 gap-3",children:f.map(e=>(0,t.jsxs)("button",{type:"button",className:"p-3 rounded-lg border ".concat(c===e.id?"".concat(e.color," border-2"):"border-[#e0e6e5] hover:border-[#78f3d3] hover:bg-[#f5f9f8]"," transition-all flex flex-col items-center text-center"),onClick:()=>d(e.id),disabled:u,children:[(0,t.jsx)("div",{className:"w-8 h-8 rounded-full flex items-center justify-center mb-2 ".concat(e.color.split(" ")[0]),children:e.icon}),(0,t.jsx)("span",{className:"font-medium text-[#313D52]",children:e.name})]},e.id))}),c!==i&&(null===(s=f.find(e=>e.id===c))||void 0===s?void 0:s.description)&&(0,t.jsx)("div",{className:"mt-3 text-sm text-[#6c7a89] bg-[#f5f9f8] p-3 rounded-lg",children:null===(a=f.find(e=>e.id===c))||void 0===a?void 0:a.description})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"comments",className:"block text-sm font-medium text-[#313D52] mb-2",children:"Comentarios (opcional)"}),(0,t.jsx)("textarea",{id:"comments",rows:3,className:"w-full px-3 py-2 border border-[#e0e6e5] rounded-lg focus:outline-none focus:ring-2 focus:ring-[#78f3d3] text-sm resize-none",placeholder:"A\xf1ade comentarios o notas sobre este cambio de estado...",value:m,onChange:e=>x(e.target.value),disabled:u})]})]}),(0,t.jsxs)("div",{className:"mt-6 flex justify-end space-x-3",children:[(0,t.jsx)("button",{type:"button",onClick:l,className:"px-4 py-2 border border-[#e0e6e5] text-[#6c7a89] rounded-lg hover:bg-[#f5f9f8] transition-colors",disabled:u,children:"Cancelar"}),(0,t.jsx)("button",{type:"submit",disabled:u||c===i,className:"px-6 py-2 bg-[#78f3d3] text-[#313D52] font-medium rounded-lg hover:bg-[#4de0c0] transition-colors flex items-center ".concat(u||c===i?"opacity-70 cursor-not-allowed":""),children:u?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(j.A,{size:18,className:"animate-spin mr-2"}),"Actualizando..."]}):"Actualizar Estado"})]})]})]})})},O=e=>{let{total:s,amountPaid:a,onClose:i,onSubmit:o}=e,m=s-a,[x,u]=(0,r.useState)("efectivo"),[h,f]=(0,r.useState)(m.toFixed(2)),[b,p]=(0,r.useState)(""),[g,N]=(0,r.useState)(""),[v,y]=(0,r.useState)(0),[w,_]=(0,r.useState)(!1),[z,D]=(0,r.useState)({}),A=e=>new Intl.NumberFormat("es-MX",{style:"currency",currency:"MXN",minimumFractionDigits:2}).format(e),C=e=>{u(e),p(""),N(""),"efectivo"!==e&&(f(m.toFixed(2)),y(0)),D({})},k=async e=>{e.preventDefault();let s={},a=parseFloat(h);if(!h||isNaN(a)?s.amount="Ingresa un monto v\xe1lido":a<=0?s.amount="El monto debe ser mayor a 0":"efectivo"!==x&&a>m&&(s.amount="El monto no puede ser mayor al pendiente",f(m.toFixed(2))),"transferencia"!==x||b.trim()||(s.reference="Ingresa una referencia para la transferencia"),"tarjeta"!==x||g.trim()||(s.terminalId="Selecciona una terminal"),Object.keys(s).length>0){D(s);return}try{_(!0),await o({monto:a,metodo:x,referencia:b||void 0,terminalId:g||void 0})}catch(e){console.error("Error al registrar el pago:",e),_(!1)}};return(0,t.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:(0,t.jsxs)("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-lg relative overflow-hidden",children:[(0,t.jsx)("button",{onClick:i,className:"absolute top-4 right-4 text-[#6c7a89] hover:text-[#313D52] p-1 rounded-full hover:bg-[#f5f9f8]",disabled:w,children:(0,t.jsx)(T.A,{size:20})}),(0,t.jsx)("div",{className:"p-6 border-b border-[#e0e6e5]",children:(0,t.jsx)("h2",{className:"text-lg font-semibold text-[#313D52]",children:"Registrar Pago"})}),(0,t.jsxs)("form",{onSubmit:k,className:"p-6",children:[(0,t.jsxs)("div",{className:"mb-6",children:[(0,t.jsxs)("div",{className:"text-center mb-8",children:[(0,t.jsx)("div",{className:"text-sm text-[#6c7a89]",children:"Total a pagar"}),(0,t.jsx)("div",{className:"text-3xl font-bold text-[#313D52]",children:A(s)}),(0,t.jsxs)("div",{className:"text-sm text-[#6c7a89] mt-1",children:["Pagado: ",A(a)," | Pendiente: ",A(m)]})]}),(0,t.jsxs)("div",{className:"mb-6",children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-[#6c7a89] mb-2",children:"M\xe9todo de pago"}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,t.jsxs)("button",{type:"button",onClick:()=>C("efectivo"),className:"p-3 rounded-lg flex items-center justify-center border ".concat("efectivo"===x?"bg-[#e0f7f0] border-[#78f3d3] text-[#313D52]":"border-[#e0e6e5] text-[#6c7a89] hover:bg-[#f5f9f8]"),disabled:w,children:[(0,t.jsx)(d.A,{size:20,className:"mr-2"}),"Efectivo"]}),(0,t.jsxs)("button",{type:"button",onClick:()=>C("tarjeta"),className:"p-3 rounded-lg flex items-center justify-center border ".concat("tarjeta"===x?"bg-[#e0f7f0] border-[#78f3d3] text-[#313D52]":"border-[#e0e6e5] text-[#6c7a89] hover:bg-[#f5f9f8]"),disabled:w,children:[(0,t.jsx)(l.A,{size:20,className:"mr-2"}),"Tarjeta"]}),(0,t.jsxs)("button",{type:"button",onClick:()=>C("transferencia"),className:"p-3 rounded-lg flex items-center justify-center border ".concat("transferencia"===x?"bg-[#e0f7f0] border-[#78f3d3] text-[#313D52]":"border-[#e0e6e5] text-[#6c7a89] hover:bg-[#f5f9f8]"),disabled:w,children:[(0,t.jsx)(n.A,{size:20,className:"mr-2"}),"Transferencia"]}),(0,t.jsxs)("button",{type:"button",onClick:()=>C("mercado_pago"),className:"p-3 rounded-lg flex items-center justify-center border ".concat("mercado_pago"===x?"bg-[#e0f7f0] border-[#78f3d3] text-[#313D52]":"border-[#e0e6e5] text-[#6c7a89] hover:bg-[#f5f9f8]"),disabled:w,children:[(0,t.jsx)(c.A,{size:20,className:"mr-2"}),"Mercado Pago"]})]})]}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"amount",className:"block text-sm font-medium text-[#6c7a89] mb-1",children:"efectivo"===x?"Monto recibido":"Monto a cobrar"}),(0,t.jsxs)("div",{className:"mt-1 relative rounded-md shadow-sm",children:[(0,t.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,t.jsx)("span",{className:"text-[#6c7a89] sm:text-sm",children:"$"})}),(0,t.jsx)("input",{type:"number",step:"0.01",min:"efectivo"===x?void 0:"0",max:"efectivo"===x?void 0:m.toString(),id:"amount",value:h,onChange:e=>{let s=e.target.value;if(f(s),"efectivo"===x){let e=parseFloat(s)||0;y(e>m?e-m:0)}z.amount&&D({...z,amount:""})},className:"block w-full pl-8 pr-12 py-3 rounded-lg border ".concat(z.amount?"border-red-300 bg-red-50":"border-[#e0e6e5]"," focus:outline-none focus:ring-2 focus:ring-[#78f3d3]"),placeholder:"0.00",disabled:w}),(0,t.jsx)("div",{className:"absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none",children:(0,t.jsx)("span",{className:"text-[#6c7a89] sm:text-sm",children:"MXN"})})]}),z.amount&&(0,t.jsx)("p",{className:"mt-1 text-xs text-red-500",children:z.amount}),"efectivo"===x&&parseFloat(h)>m&&(0,t.jsxs)("div",{className:"mt-2 text-[#313D52] font-medium flex justify-end",children:[(0,t.jsx)("span",{className:"text-[#6c7a89] mr-2",children:"Cambio:"})," ",A(v)]})]}),"transferencia"===x&&(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"reference",className:"block text-sm font-medium text-[#6c7a89] mb-1",children:"Referencia de transferencia"}),(0,t.jsx)("input",{type:"text",id:"reference",value:b,onChange:e=>{p(e.target.value),z.reference&&D({...z,reference:""})},className:"w-full px-4 py-3 rounded-lg border ".concat(z.reference?"border-red-300 bg-red-50":"border-[#e0e6e5]"," focus:outline-none focus:ring-2 focus:ring-[#78f3d3]"),placeholder:"N\xfamero o ID de transferencia",disabled:w}),z.reference&&(0,t.jsx)("p",{className:"mt-1 text-xs text-red-500",children:z.reference})]}),"tarjeta"===x&&(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"terminalId",className:"block text-sm font-medium text-[#6c7a89] mb-1",children:"Terminal"}),(0,t.jsxs)("select",{id:"terminalId",value:g,onChange:e=>{N(e.target.value),z.terminalId&&D({...z,terminalId:""})},className:"w-full px-4 py-3 rounded-lg border ".concat(z.terminalId?"border-red-300 bg-red-50":"border-[#e0e6e5]"," focus:outline-none focus:ring-2 focus:ring-[#78f3d3]"),disabled:w,children:[(0,t.jsx)("option",{value:"",children:"Seleccionar terminal..."}),(0,t.jsx)("option",{value:"1",children:"Terminal Principal"}),(0,t.jsx)("option",{value:"2",children:"Terminal Secundaria"})]}),z.terminalId&&(0,t.jsx)("p",{className:"mt-1 text-xs text-red-500",children:z.terminalId})]})]})]}),(0,t.jsxs)("div",{className:"flex justify-end space-x-3",children:[(0,t.jsx)("button",{type:"button",onClick:i,disabled:w,className:"px-4 py-2 border border-[#e0e6e5] text-[#6c7a89] rounded-lg hover:bg-[#f5f9f8] transition-colors",children:"Cancelar"}),(0,t.jsx)("button",{type:"submit",disabled:w,className:"px-6 py-2 bg-[#78f3d3] text-[#313D52] font-medium rounded-lg hover:bg-[#4de0c0] transition-colors flex items-center",children:w?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(j.A,{size:18,className:"animate-spin mr-2"}),"Procesando..."]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(d.A,{size:18,className:"mr-2"}),"Registrar Pago"]})})]})]})]})})};var R=a(85339),B=a(29869);let L=e=>{let{onClose:s,onSubmit:a}=e,[i,l]=(0,r.useState)(null),[n,c]=(0,r.useState)(null),[d,o]=(0,r.useState)(!1),[x,u]=(0,r.useState)(null),[h,f]=(0,r.useState)(!1),b=(0,r.useRef)(null),p=e=>{if(!["image/jpeg","image/jpg","image/png","image/webp"].includes(e.type)){u("El formato de archivo no es v\xe1lido. Por favor, sube una imagen (JPEG, JPG, PNG, WEBP)."),l(null),c(null);return}if(e.size>5242880){u("El archivo es demasiado grande. El tama\xf1o m\xe1ximo permitido es 5MB."),l(null),c(null);return}c(URL.createObjectURL(e)),l(e),u(null)},g=async e=>{if(e.preventDefault(),!i){u("Por favor, selecciona un archivo.");return}try{f(!0),await a(i)}catch(e){console.error("Error al subir la identificaci\xf3n:",e),u("Ha ocurrido un error al subir el archivo. Por favor, intenta de nuevo."),f(!1)}};return(0,t.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:(0,t.jsxs)("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-lg relative overflow-hidden",children:[(0,t.jsx)("button",{onClick:s,className:"absolute top-4 right-4 text-[#6c7a89] hover:text-[#313D52] p-1 rounded-full hover:bg-[#f5f9f8]",disabled:h,children:(0,t.jsx)(T.A,{size:20})}),(0,t.jsxs)("div",{className:"p-6 border-b border-[#e0e6e5]",children:[(0,t.jsx)("h2",{className:"text-lg font-semibold text-[#313D52]",children:"Subir Identificaci\xf3n"}),(0,t.jsx)("p",{className:"text-[#6c7a89] text-sm mt-1",children:"Sube una fotograf\xeda o escaneo de una identificaci\xf3n oficial del cliente."})]}),(0,t.jsxs)("form",{onSubmit:g,className:"p-6",children:[(0,t.jsxs)("div",{className:"border-2 border-dashed rounded-lg p-6 text-center cursor-pointer transition-colors ".concat(d?"border-[#78f3d3] bg-[#e0f7f0]":"border-[#e0e6e5] hover:border-[#78f3d3] hover:bg-[#f5f9f8]"," ").concat(h?"opacity-50 cursor-not-allowed":""),onClick:()=>{b.current&&b.current.click()},onDragOver:e=>{e.preventDefault(),o(!0)},onDragLeave:()=>{o(!1)},onDrop:e=>{e.preventDefault(),o(!1),e.dataTransfer.files&&e.dataTransfer.files[0]&&p(e.dataTransfer.files[0])},children:[(0,t.jsx)("input",{type:"file",ref:b,onChange:e=>{e.target.files&&e.target.files[0]&&p(e.target.files[0])},accept:"image/jpeg,image/jpg,image/png,image/webp",className:"hidden",disabled:h}),n?(0,t.jsxs)("div",{className:"mb-4",children:[(0,t.jsx)("div",{className:"relative w-full max-w-xs mx-auto h-48 border border-[#e0e6e5] rounded-lg overflow-hidden",children:(0,t.jsx)("img",{src:n,alt:"Vista previa",className:"w-full h-full object-contain"})}),(0,t.jsxs)("p",{className:"mt-2 text-sm text-[#6c7a89]",children:[null==i?void 0:i.name," (",((null==i?void 0:i.size)||0)/1024<1024?"".concat(Math.round(((null==i?void 0:i.size)||0)/1024)," KB"):"".concat(((null==i?void 0:i.size)||0)/1024/1024<10?(((null==i?void 0:i.size)||0)/1024/1024).toFixed(2):Math.round(((null==i?void 0:i.size)||0)/1024/1024)," MB"),")"]})]}):(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"w-16 h-16 bg-[#f5f9f8] rounded-full flex items-center justify-center mx-auto mb-4",children:(0,t.jsx)(m.A,{size:32,className:"text-[#6c7a89]"})}),(0,t.jsx)("p",{className:"text-[#313D52] font-medium mb-2",children:"Arrastra y suelta una imagen aqu\xed"}),(0,t.jsx)("p",{className:"text-sm text-[#6c7a89] mb-4",children:"O haz clic para seleccionar un archivo"}),(0,t.jsx)("p",{className:"text-xs text-[#6c7a89]",children:"Formatos permitidos: JPG, JPEG, PNG, WEBP. Tama\xf1o m\xe1ximo: 5MB"})]})]}),x&&(0,t.jsxs)("div",{className:"mt-4 p-3 bg-red-50 text-red-600 rounded-lg flex items-start",children:[(0,t.jsx)(R.A,{size:16,className:"mt-0.5 mr-2 flex-shrink-0"}),(0,t.jsx)("span",{className:"text-sm",children:x})]}),(0,t.jsxs)("div",{className:"mt-6 flex justify-end space-x-3",children:[(0,t.jsx)("button",{type:"button",onClick:s,disabled:h,className:"px-4 py-2 border border-[#e0e6e5] text-[#6c7a89] rounded-lg hover:bg-[#f5f9f8] transition-colors",children:"Cancelar"}),(0,t.jsx)("button",{type:"submit",disabled:h||!i,className:"px-6 py-2 bg-[#78f3d3] text-[#313D52] font-medium rounded-lg hover:bg-[#4de0c0] transition-colors flex items-center ".concat(h||!i?"opacity-70 cursor-not-allowed":""),children:h?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(j.A,{size:18,className:"animate-spin mr-2"}),"Subiendo..."]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(B.A,{size:18,className:"mr-2"}),"Subir Archivo"]})})]})]})]})})};var G=a(4229);let J=e=>{let{shoeId:s,shoeName:a,onClose:i,onSubmit:l}=e,[n,c]=(0,r.useState)(""),[d,o]=(0,r.useState)(""),[m,x]=(0,r.useState)(""),[u,h]=(0,r.useState)(!1),[f,b]=(0,r.useState)(null),p=async e=>{if(e.preventDefault(),!n||!d){b("La caja y el c\xf3digo de ubicaci\xf3n son obligatorios");return}h(!0),b(null);try{await l({shoeId:s,boxName:n,locationCode:d,specialNotes:m||void 0})}catch(e){console.error("Error al asignar ubicaci\xf3n:",e),b("Error al guardar la ubicaci\xf3n. Intente nuevamente."),h(!1)}};return(0,t.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:(0,t.jsxs)("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-md relative overflow-hidden",children:[(0,t.jsx)("button",{onClick:i,className:"absolute top-4 right-4 text-[#6c7a89] hover:text-[#313D52] p-1 rounded-full hover:bg-[#f5f9f8]",disabled:u,children:(0,t.jsx)(T.A,{size:20})}),(0,t.jsxs)("div",{className:"p-6 border-b border-[#e0e6e5]",children:[(0,t.jsx)("h2",{className:"text-lg font-semibold text-[#313D52]",children:"Asignar Ubicaci\xf3n de Almacenamiento"}),(0,t.jsxs)("p",{className:"text-[#6c7a89] text-sm mt-1",children:["Asigna una caja y ubicaci\xf3n para: ",(0,t.jsx)("span",{className:"font-medium",children:a})]})]}),(0,t.jsxs)("form",{onSubmit:p,className:"p-6",children:[(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"boxName",className:"block text-sm font-medium text-[#313D52] mb-1",children:"Caja de Almacenamiento"}),(0,t.jsxs)("select",{id:"boxName",value:n,onChange:e=>c(e.target.value),className:"w-full px-3 py-2 rounded-lg border border-[#e0e6e5] focus:outline-none focus:ring-2 focus:ring-[#78f3d3]",disabled:u,children:[(0,t.jsx)("option",{value:"",children:"Seleccionar caja..."}),["A1","A2","A3","B1","B2","B3","C1","C2","C3"].map(e=>(0,t.jsxs)("option",{value:e,children:["Caja ",e]},e)),(0,t.jsx)("option",{value:"custom",children:"Otra..."})]}),"custom"===n&&(0,t.jsx)("input",{type:"text",placeholder:"Nombre personalizado de caja",className:"w-full mt-2 px-3 py-2 rounded-lg border border-[#e0e6e5] focus:outline-none focus:ring-2 focus:ring-[#78f3d3]",value:"custom"===n?"":n,onChange:e=>c(e.target.value),disabled:u})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"locationCode",className:"block text-sm font-medium text-[#313D52] mb-1",children:"C\xf3digo de Ubicaci\xf3n"}),(0,t.jsx)("input",{type:"text",id:"locationCode",placeholder:"Ej: ESTANTE2-FILA3",value:d,onChange:e=>o(e.target.value),className:"w-full px-3 py-2 rounded-lg border border-[#e0e6e5] focus:outline-none focus:ring-2 focus:ring-[#78f3d3]",disabled:u}),(0,t.jsx)("p",{className:"mt-1 text-xs text-[#6c7a89]",children:"C\xf3digo que identifica la ubicaci\xf3n espec\xedfica dentro del almac\xe9n"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"specialNotes",className:"block text-sm font-medium text-[#313D52] mb-1",children:"Notas Especiales (opcional)"}),(0,t.jsx)("textarea",{id:"specialNotes",rows:3,value:m,onChange:e=>x(e.target.value),placeholder:"Instrucciones especiales de almacenamiento o manipulaci\xf3n...",className:"w-full px-3 py-2 rounded-lg border border-[#e0e6e5] focus:outline-none focus:ring-2 focus:ring-[#78f3d3] resize-none",disabled:u})]})]}),f&&(0,t.jsxs)("div",{className:"mt-4 p-3 bg-red-50 text-red-600 rounded-lg flex items-start",children:[(0,t.jsx)(R.A,{size:16,className:"mt-0.5 mr-2 flex-shrink-0"}),(0,t.jsx)("span",{className:"text-sm",children:f})]}),(0,t.jsxs)("div",{className:"mt-6 flex justify-end space-x-3",children:[(0,t.jsx)("button",{type:"button",onClick:i,disabled:u,className:"px-4 py-2 border border-[#e0e6e5] text-[#6c7a89] rounded-lg hover:bg-[#f5f9f8] transition-colors",children:"Cancelar"}),(0,t.jsx)("button",{type:"submit",disabled:u,className:"px-6 py-2 bg-[#78f3d3] text-[#313D52] font-medium rounded-lg hover:bg-[#4de0c0] transition-colors flex items-center",children:u?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(j.A,{size:18,className:"animate-spin mr-2"}),"Guardando..."]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(G.A,{size:18,className:"mr-2"}),"Guardar Ubicaci\xf3n"]})})]})]})]})})};var X=a(81497),U=a(24357),q=a(90105);let V=e=>{let s,{isOpen:a,onClose:i,order:l}=e,[n,c]=(0,r.useState)(!1),[d,x]=(0,r.useState)(!1),[u,h]=(0,r.useState)(null),[f,b]=(0,r.useState)(!1),[p,g]=(0,r.useState)(""),[N,y]=(0,r.useState)(!1),[w,_]=(0,r.useState)(""),z=async()=>{if(!l.cliente_email||""===l.cliente_email.trim()){h("El cliente no tiene un email registrado");return}if(N&&(!w||""===w.trim())){h("Por favor ingresa un email para la copia");return}c(!0),h(null);try{let e=await fetch("/api/admin/orders/".concat(l.orden_id,"/send-ticket"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({includeImages:f,customMessage:p.trim()||null,sendCopy:N,copyEmail:N?w.trim():null})}),s=await e.json();if(!e.ok)throw Error(s.error||"Error al enviar el ticket");x(!0),setTimeout(()=>{i(),x(!1),g(""),_(""),b(!1),y(!1)},3e3)}catch(e){console.error("Error enviando ticket:",e),h(e instanceof Error?e.message:"Error al enviar el ticket")}finally{c(!1)}},D=()=>{n||d||(i(),h(null),g(""),_(""),b(!1),y(!1))};return a?(0,t.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,t.jsxs)("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-md max-h-[90vh] overflow-y-auto",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center p-6 border-b border-[#e0e6e5]",children:[(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)(v.A,{size:24,className:"text-[#78f3d3] mr-3"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-lg font-semibold text-[#313D52]",children:"Enviar Ticket por Email"}),(0,t.jsxs)("p",{className:"text-sm text-[#6c7a89]",children:["Orden: ",l.codigo_orden]})]})]}),(0,t.jsx)("button",{onClick:D,disabled:n||d,className:"text-[#6c7a89] hover:text-[#313D52] disabled:opacity-50",children:(0,t.jsx)(T.A,{size:24})})]}),(0,t.jsx)("div",{className:"p-6",children:d?(0,t.jsxs)("div",{className:"text-center py-8",children:[(0,t.jsx)("div",{className:"w-16 h-16 bg-[#e0f7f0] rounded-full flex items-center justify-center mx-auto mb-4",children:(0,t.jsx)(o.A,{size:32,className:"text-[#78f3d3]"})}),(0,t.jsx)("h3",{className:"text-lg font-semibold text-[#313D52] mb-2",children:"\xa1Ticket Enviado!"}),(0,t.jsx)("p",{className:"text-[#6c7a89] mb-4",children:"El ticket ha sido enviado exitosamente a:"}),(0,t.jsx)("p",{className:"text-[#313D52] font-medium",children:l.cliente_email}),N&&w&&(0,t.jsxs)("p",{className:"text-sm text-[#6c7a89] mt-2",children:["Copia enviada a: ",w]})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"bg-[#f5f9f8] p-4 rounded-lg mb-6",children:[(0,t.jsx)("h3",{className:"font-medium text-[#313D52] mb-2",children:"Informaci\xf3n del Cliente"}),(0,t.jsxs)("div",{className:"space-y-1 text-sm",children:[(0,t.jsxs)("p",{children:[(0,t.jsx)("strong",{children:"Nombre:"})," ",l.cliente_nombre," ",l.cliente_apellidos||""]}),(0,t.jsxs)("p",{children:[(0,t.jsx)("strong",{children:"Email:"})," ",l.cliente_email]}),(0,t.jsxs)("p",{children:[(0,t.jsx)("strong",{children:"Total:"})," ",(s=l.total,new Intl.NumberFormat("es-MX",{style:"currency",currency:"MXN",minimumFractionDigits:2}).format(s||0))]})]})]}),(0,t.jsxs)("div",{className:"space-y-4 mb-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{className:"flex items-center text-sm font-medium text-[#6c7a89] mb-2",children:[(0,t.jsx)(X.A,{size:16,className:"mr-2"}),"Mensaje Personalizado (Opcional)"]}),(0,t.jsx)("textarea",{value:p,onChange:e=>g(e.target.value),placeholder:"Agregue un mensaje personalizado que aparecer\xe1 en el ticket...",rows:3,className:"w-full px-3 py-2 rounded-lg border border-[#e0e6e5] focus:outline-none focus:ring-2 focus:ring-[#78f3d3] text-sm resize-none",disabled:n}),(0,t.jsx)("p",{className:"text-xs text-[#6c7a89] mt-1",children:"M\xe1ximo 500 caracteres"})]}),(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)("input",{type:"checkbox",id:"includeImages",checked:f,onChange:e=>b(e.target.checked),disabled:n,className:"mr-3"}),(0,t.jsxs)("label",{htmlFor:"includeImages",className:"flex items-center text-sm text-[#313D52]",children:[(0,t.jsx)(m.A,{size:16,className:"mr-2 text-[#6c7a89]"}),"Incluir im\xe1genes del calzado (si est\xe1n disponibles)"]})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"flex items-center mb-2",children:[(0,t.jsx)("input",{type:"checkbox",id:"sendCopy",checked:N,onChange:e=>y(e.target.checked),disabled:n,className:"mr-3"}),(0,t.jsxs)("label",{htmlFor:"sendCopy",className:"flex items-center text-sm text-[#313D52]",children:[(0,t.jsx)(U.A,{size:16,className:"mr-2 text-[#6c7a89]"}),"Enviar copia a otro email"]})]}),N&&(0,t.jsx)("input",{type:"email",value:w,onChange:e=>_(e.target.value),placeholder:"email@ejemplo.com",className:"w-full px-3 py-2 rounded-lg border border-[#e0e6e5] focus:outline-none focus:ring-2 focus:ring-[#78f3d3] text-sm",disabled:n})]})]}),u&&(0,t.jsxs)("div",{className:"mb-4 p-3 bg-red-50 text-red-600 rounded-lg flex items-start",children:[(0,t.jsx)(R.A,{size:16,className:"mt-0.5 mr-2 flex-shrink-0"}),(0,t.jsx)("span",{className:"text-sm",children:u})]})]})}),!d&&(0,t.jsxs)("div",{className:"flex justify-end space-x-3 p-6 border-t border-[#e0e6e5]",children:[(0,t.jsx)("button",{onClick:D,disabled:n,className:"px-4 py-2 border border-[#e0e6e5] text-[#6c7a89] rounded-lg hover:bg-[#f5f9f8] transition-colors disabled:opacity-50",children:"Cancelar"}),(0,t.jsx)("button",{onClick:z,disabled:n||!l.cliente_email,className:"px-6 py-2 bg-[#78f3d3] text-[#313D52] font-medium rounded-lg hover:bg-[#4de0c0] transition-colors flex items-center disabled:opacity-50 disabled:hover:bg-[#78f3d3]",children:n?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(j.A,{size:18,className:"animate-spin mr-2"}),"Enviando..."]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(q.A,{size:18,className:"mr-2"}),"Enviar Ticket"]})})]})]})}):null};function H(){let e=(0,S.useParams)().id,[s,a]=(0,r.useState)(null),[k,P]=(0,r.useState)(!0),[I,F]=(0,r.useState)(!1),[T,R]=(0,r.useState)(null),[B,G]=(0,r.useState)(!1),[X,U]=(0,r.useState)(!1),[q,H]=(0,r.useState)(!1),[W,K]=(0,r.useState)(!1),[$,Q]=(0,r.useState)(null),[Y,Z]=(0,r.useState)(!1),ee=async s=>{try{if(!(await fetch("/api/admin/orders/".concat(e,"/shoes/").concat(s.shoeId,"/storage"),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({caja_almacenamiento:s.boxName,codigo_ubicacion:s.locationCode,notas_especiales:s.specialNotes||null})})).ok)throw Error("Error al asignar ubicaci\xf3n de almacenamiento");K(!1),Q(null),ea()}catch(e){throw console.error("Error updating storage location:",e),e}},es=(e,s)=>{Q({id:e,name:s}),K(!0)},ea=async()=>{try{F(!0);let s=await fetch("/api/admin/orders?id=".concat(e));if(!s.ok)throw Error("Error al cargar los detalles de la orden");let t=await s.json();a(t.order),R(null)}catch(e){console.error("Error fetching order details:",e),R("Error al cargar los detalles de la orden. Intente nuevamente.")}finally{P(!1),F(!1)}};(0,r.useEffect)(()=>{ea()},[e]);let et=e=>e?new Date(e).toLocaleDateString("es-MX",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}):"N/A",er=e=>new Intl.NumberFormat("es-MX",{style:"currency",currency:"MXN"}).format(e),ei=e=>{switch(e){case"efectivo":return"Efectivo";case"tarjeta":return"Tarjeta";case"transferencia":return"Transferencia";case"mercado_pago":return"Mercado Pago";default:return e}},el=e=>{switch(e){case"efectivo":return(0,t.jsx)(i.A,{size:16});case"tarjeta":return(0,t.jsx)(l.A,{size:16});case"transferencia":return(0,t.jsx)(n.A,{size:16});case"mercado_pago":return(0,t.jsx)(c.A,{size:16});default:return(0,t.jsx)(d.A,{size:16})}},en=async(s,a)=>{try{console.log("Iniciando actualizaci\xf3n de estado:",{ordenId:e,newStatusId:s,comentario:a});let t=await fetch("/api/admin/orders/".concat(e,"/status"),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({estadoId:s,comentario:a||null})}),r=await t.json();if(console.log("Respuesta del servidor:",r),!t.ok)throw Error(r.error||"Error al actualizar el estado");console.log("Estado actualizado exitosamente:",r),G(!1),await ea()}catch(s){console.error("Error updating status:",s);let e="Error al actualizar el estado de la orden";s instanceof Error&&(e=s.message),alert("Error: ".concat(e))}},ec=async s=>{try{if(!(await fetch("/api/admin/payments",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({ordenId:parseInt(e),...s})})).ok)throw Error("Error al registrar el pago");U(!1),ea()}catch(e){console.error("Error registering payment:",e),alert("Error al registrar el pago")}},ed=async s=>{try{let a=new FormData;if(a.append("file",s),a.append("tipo","identificacion"),a.append("entidadTipo","orden"),a.append("entidadId",e),!(await fetch("/api/admin/upload",{method:"POST",body:a})).ok)throw Error("Error al subir la identificaci\xf3n");H(!1),ea()}catch(e){console.error("Error uploading identification:",e),alert("Error al subir la identificaci\xf3n")}},eo=()=>s&&s.pagos&&0!==s.pagos.length?s.pagos.reduce((e,s)=>e+s.monto,0):0;if(k)return(0,t.jsx)("div",{className:"flex justify-center items-center h-64",children:(0,t.jsx)(j.A,{size:40,className:"animate-spin text-[#78f3d3]"})});if(T)return(0,t.jsxs)("div",{className:"text-center py-10 text-red-500",children:[(0,t.jsx)("p",{children:T}),(0,t.jsxs)(E(),{href:"/admin/orders",className:"mt-4 inline-flex items-center px-4 py-2 bg-[#78f3d3] text-[#313D52] rounded-lg hover:bg-[#4de0c0] transition-colors",children:[(0,t.jsx)(g.A,{size:16,className:"mr-2"}),"Volver a \xf3rdenes"]})]});if(!s)return(0,t.jsxs)("div",{className:"text-center py-10",children:[(0,t.jsx)("p",{className:"text-[#6c7a89]",children:"No se encontr\xf3 la orden"}),(0,t.jsxs)(E(),{href:"/admin/orders",className:"mt-4 inline-flex items-center px-4 py-2 bg-[#78f3d3] text-[#313D52] rounded-lg hover:bg-[#4de0c0] transition-colors",children:[(0,t.jsx)(g.A,{size:16,className:"mr-2"}),"Volver a \xf3rdenes"]})]});let em=(()=>{if(!s)return 0;let e=eo();return s.total-e})(),ex=s.servicios.reduce((e,s)=>e+s.precio_unitario*(s.cantidad||1),0);return(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"flex items-center mb-2",children:[(0,t.jsx)(E(),{href:"/admin/orders",className:"mr-2 text-[#6c7a89] hover:text-[#313D52] transition-colors",children:(0,t.jsx)(g.A,{size:20})}),(0,t.jsxs)("h1",{className:"text-xl font-semibold text-[#313D52]",children:["Orden #",s.codigo_orden]})]}),(0,t.jsxs)("p",{className:"text-sm text-[#6c7a89]",children:["Creada el ",et(s.fecha_recepcion)," por ",s.empleado_recepcion_nombre]})]}),(0,t.jsxs)("div",{className:"flex flex-wrap gap-3",children:[(0,t.jsxs)("button",{onClick:()=>{window.print()},className:"inline-flex items-center px-4 py-2 bg-[#f5f9f8] text-[#313D52] rounded-lg border border-[#e0e6e5] hover:bg-[#e0e6e5] transition-colors",children:[(0,t.jsx)(N.A,{size:16,className:"mr-2"}),"Imprimir"]}),(0,t.jsxs)("button",{onClick:()=>Z(!0),disabled:!(null==s?void 0:s.cliente_email),className:"inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",title:(null==s?void 0:s.cliente_email)?"Enviar ticket por email":"El cliente no tiene email registrado",children:[(0,t.jsx)(v.A,{size:16,className:"mr-2"}),"Enviar Ticket"]}),(0,t.jsxs)("button",{onClick:()=>G(!0),className:"inline-flex items-center px-4 py-2 bg-[#78f3d3] text-[#313D52] rounded-lg hover:bg-[#4de0c0] transition-colors",children:[(0,t.jsx)(b.A,{size:16,className:"mr-2"}),"Cambiar Estado"]}),(0,t.jsxs)("button",{onClick:()=>U(!0),disabled:em<=0,className:"inline-flex items-center px-4 py-2 rounded-lg border ".concat(em<=0?"bg-gray-100 text-gray-400 border-gray-200 cursor-not-allowed":"bg-[#313D52] text-white border-[#313D52] hover:bg-[#3e4a61]"," transition-colors"),children:[(0,t.jsx)(d.A,{size:16,className:"mr-2"}),em<=0?"Pagado":"Registrar Pago"]})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"bg-white rounded-lg border border-[#e0e6e5] overflow-hidden",children:[(0,t.jsx)("div",{className:"px-4 py-3 bg-[#f5f9f8] border-b border-[#e0e6e5]",children:(0,t.jsxs)("h2",{className:"font-medium text-[#313D52] flex items-center",children:[(0,t.jsx)(y.A,{size:18,className:"mr-2 text-[#6c7a89]"}),"Informaci\xf3n del Cliente"]})}),(0,t.jsxs)("div",{className:"p-4",children:[(0,t.jsxs)("div",{className:"mb-4",children:[(0,t.jsxs)("h3",{className:"font-semibold text-[#313D52] text-lg",children:[s.cliente_nombre," ",s.cliente_apellidos]}),(0,t.jsxs)("div",{className:"text-sm text-[#6c7a89]",children:[(0,t.jsxs)("p",{children:["ID: ",s.cliente_id]}),(0,t.jsxs)("p",{children:["Email: ",s.cliente_email||"No registrado"]}),(0,t.jsxs)("p",{children:["Tel\xe9fono: ",s.cliente_telefono||"No registrado"]})]})]}),(0,t.jsxs)(E(),{href:"/admin/clients/".concat(s.cliente_id),className:"text-[#78f3d3] hover:text-[#4de0c0] text-sm font-medium inline-flex items-center",children:["Ver perfil completo",(0,t.jsx)(w.A,{size:16,className:"ml-1"})]})]})]}),(()=>{if(!s)return null;let e=s.imagenes.filter(e=>"identificacion"===e.tipo);return s.requiere_identificacion?e.length>0?(0,t.jsx)("div",{className:"bg-green-50 p-4 rounded-lg border border-green-200",children:(0,t.jsxs)("div",{className:"flex items-start",children:[(0,t.jsx)(o.A,{size:20,className:"mt-0.5 mr-3 text-green-500 flex-shrink-0"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-medium text-green-700",children:"Identificaci\xf3n registrada"}),(0,t.jsx)("p",{className:"text-sm text-green-600 mb-3",children:"El cliente ha proporcionado identificaci\xf3n v\xe1lida para esta orden."}),(0,t.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:e.map(e=>(0,t.jsxs)("div",{className:"bg-white p-2 rounded border border-green-200",children:[(0,t.jsx)("div",{className:"text-xs text-green-700 mb-1",children:new Date(e.fecha_creacion).toLocaleDateString()}),(0,t.jsxs)("a",{href:e.url,target:"_blank",rel:"noopener noreferrer",className:"flex items-center text-blue-600 hover:underline text-sm",children:[(0,t.jsx)(m.A,{size:14,className:"mr-1"}),"Ver imagen"]})]},e.archivo_id))})]})]})}):(0,t.jsx)("div",{className:"bg-amber-50 p-4 rounded-lg border border-amber-200",children:(0,t.jsxs)("div",{className:"flex items-start",children:[(0,t.jsx)(x.A,{size:20,className:"mt-0.5 mr-3 text-amber-500 flex-shrink-0"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-medium text-amber-700",children:"Se requiere identificaci\xf3n"}),(0,t.jsx)("p",{className:"text-sm text-amber-600 mb-3",children:"Esta orden requiere identificaci\xf3n del cliente. Por favor, registra una identificaci\xf3n v\xe1lida."}),(0,t.jsxs)("button",{onClick:()=>H(!0),className:"inline-flex items-center px-3 py-1.5 bg-amber-100 text-amber-700 rounded hover:bg-amber-200 transition-colors text-sm font-medium",children:[(0,t.jsx)(u.A,{size:16,className:"mr-1.5"}),"Subir identificaci\xf3n"]})]})]})}):null})(),(0,t.jsxs)("div",{className:"bg-white rounded-lg border border-[#e0e6e5] overflow-hidden",children:[(0,t.jsx)("div",{className:"px-4 py-3 bg-[#f5f9f8] border-b border-[#e0e6e5]",children:(0,t.jsxs)("h2",{className:"font-medium text-[#313D52] flex items-center",children:[(0,t.jsx)(_.A,{size:18,className:"mr-2 text-[#6c7a89]"}),"Fechas"]})}),(0,t.jsx)("div",{className:"p-4",children:(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-[#6c7a89]",children:"Recepci\xf3n:"}),(0,t.jsx)("span",{className:"text-[#313D52]",children:et(s.fecha_recepcion)})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-[#6c7a89]",children:"Entrega estimada:"}),(0,t.jsx)("span",{className:"text-[#313D52]",children:et(s.fecha_entrega_estimada)})]}),s.fecha_entrega_real&&(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-[#6c7a89]",children:"Entrega real:"}),(0,t.jsx)("span",{className:"text-[#313D52]",children:et(s.fecha_entrega_real)})]})]})})]}),(0,t.jsxs)("div",{className:"bg-white rounded-lg border border-[#e0e6e5] overflow-hidden",children:[(0,t.jsx)("div",{className:"px-4 py-3 bg-[#f5f9f8] border-b border-[#e0e6e5]",children:(0,t.jsxs)("h2",{className:"font-medium text-[#313D52] flex items-center",children:[(0,t.jsx)(i.A,{size:18,className:"mr-2 text-[#6c7a89]"}),"Informaci\xf3n de Pago"]})}),(0,t.jsxs)("div",{className:"p-4",children:[(0,t.jsxs)("div",{className:"mb-3 flex justify-between items-center",children:[(0,t.jsx)("span",{className:"text-[#6c7a89]",children:"Estado:"}),(e=>{switch(e){case"pendiente":return(0,t.jsx)("span",{className:"px-2 py-1 bg-yellow-100 text-yellow-800 rounded-full text-xs font-medium",children:"Pendiente"});case"parcial":return(0,t.jsx)("span",{className:"px-2 py-1 bg-blue-100 text-blue-800 rounded-full text-xs font-medium",children:"Parcial"});case"completado":return(0,t.jsx)("span",{className:"px-2 py-1 bg-green-100 text-green-800 rounded-full text-xs font-medium",children:"Completado"});default:return(0,t.jsx)("span",{className:"px-2 py-1 bg-gray-100 text-gray-800 rounded-full text-xs font-medium",children:e})}})(s.estado_pago)]}),(0,t.jsxs)("div",{className:"mb-3 flex justify-between",children:[(0,t.jsx)("span",{className:"text-[#6c7a89]",children:"M\xe9todo preferido:"}),(0,t.jsxs)("span",{className:"text-[#313D52] flex items-center",children:[el(s.metodo_pago),(0,t.jsx)("span",{className:"ml-1",children:ei(s.metodo_pago)})]})]}),(0,t.jsxs)("div",{className:"border-t border-[#e0e6e5] my-3 pt-3",children:[(0,t.jsxs)("div",{className:"flex justify-between mb-1",children:[(0,t.jsx)("span",{className:"text-[#6c7a89]",children:"Subtotal:"}),(0,t.jsx)("span",{className:"text-[#313D52]",children:er(s.subtotal)})]}),s.descuento>0&&(0,t.jsxs)("div",{className:"flex justify-between mb-1 text-green-600",children:[(0,t.jsx)("span",{children:"Descuento:"}),(0,t.jsxs)("span",{children:["-",er(s.descuento)]})]}),(0,t.jsxs)("div",{className:"flex justify-between mb-3",children:[(0,t.jsx)("span",{className:"text-[#6c7a89]",children:"IVA (16%):"}),(0,t.jsx)("span",{className:"text-[#313D52]",children:er(s.impuestos)})]}),(0,t.jsxs)("div",{className:"flex justify-between font-semibold text-lg",children:[(0,t.jsx)("span",{className:"text-[#313D52]",children:"Total:"}),(0,t.jsx)("span",{className:"text-[#313D52]",children:er(s.total)})]}),(0,t.jsxs)("div",{className:"flex justify-between mt-3 pt-3 border-t border-[#e0e6e5]",children:[(0,t.jsx)("span",{className:"text-[#6c7a89]",children:"Pagado:"}),(0,t.jsx)("span",{className:"text-[#313D52]",children:er(eo())})]}),(0,t.jsxs)("div",{className:"flex justify-between font-medium",children:[(0,t.jsx)("span",{className:em>0?"text-red-600":"text-green-600",children:em>0?"Pendiente:":"Cambio:"}),(0,t.jsx)("span",{className:em>0?"text-red-600":"text-green-600",children:er(Math.abs(em))})]})]}),em>0&&(0,t.jsxs)("button",{onClick:()=>U(!0),className:"w-full mt-4 py-2 bg-[#313D52] text-white rounded-lg flex items-center justify-center hover:bg-[#3e4a61] transition-colors",children:[(0,t.jsx)(d.A,{size:16,className:"mr-2"}),"Registrar Pago"]})]})]})]}),(0,t.jsxs)("div",{className:"space-y-6",children:[(()=>{if(!s||!s.servicios||0===s.servicios.length)return null;let e=s.servicios.filter(e=>e.marca||e.modelo||e.descripcion);return 0===e.length?null:(0,t.jsxs)("div",{className:"bg-white rounded-lg border border-[#e0e6e5] overflow-hidden",children:[(0,t.jsx)("div",{className:"px-4 py-3 bg-[#f5f9f8] border-b border-[#e0e6e5]",children:(0,t.jsxs)("h2",{className:"font-semibold text-[#313D52] flex items-center",children:[(0,t.jsx)(h.A,{size:18,className:"mr-2 text-[#6c7a89]"}),"Detalles del Calzado"]})}),(0,t.jsx)("div",{className:"p-4",children:(0,t.jsx)("div",{className:"space-y-5",children:e.map(e=>(0,t.jsxs)("div",{className:"bg-white p-4 rounded-lg border border-[#e0e6e5] hover:shadow-md transition-shadow",children:[(0,t.jsxs)("div",{className:"flex justify-between items-start",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("h3",{className:"font-semibold text-[#313D52] flex items-center text-lg",children:[(0,t.jsx)(f.A,{size:20,className:"mr-2 text-[#78f3d3]"}),"1x ",e.servicio_nombre]}),(0,t.jsxs)("div",{className:"text-sm text-[#313D52] mt-1 font-medium",children:[e.marca?"".concat(e.marca):"Sin marca registrada"," ",e.modelo?"".concat(e.modelo):""]})]}),(0,t.jsx)("span",{className:"font-bold text-base text-[#313D52] bg-[#f5f9f8] px-3 py-1 rounded-lg",children:er(e.subtotal)})]}),(0,t.jsxs)("div",{className:"mt-3 grid grid-cols-1 md:grid-cols-3 gap-3",children:[(0,t.jsxs)("div",{className:"bg-[#f9fafa] rounded-lg p-3 col-span-2",children:[(0,t.jsx)("h4",{className:"font-medium text-sm text-[#6c7a89] uppercase mb-2",children:"Detalles"}),(0,t.jsx)("div",{className:"mb-2",children:(0,t.jsx)("span",{className:"text-sm text-[#313D52]",children:e.descripcion||"Sin descripci\xf3n adicional"})}),(0,t.jsxs)("div",{className:"flex justify-between text-xs text-[#6c7a89]",children:[(0,t.jsx)("span",{children:"Servicio individual"}),(0,t.jsxs)("span",{children:["Precio: ",er(e.precio_unitario)]})]})]}),(0,t.jsxs)("div",{className:"rounded-lg p-3 relative ".concat(e.caja_almacenamiento?"bg-[#e0f7f0]":"bg-yellow-50"),children:[(0,t.jsxs)("h4",{className:"font-medium text-sm uppercase mb-2 flex items-center",children:[(0,t.jsx)(h.A,{size:14,className:"mr-1"}),(0,t.jsx)("span",{className:e.caja_almacenamiento?"text-[#00a67e]":"text-amber-700",children:"Almacenamiento"})]}),e.caja_almacenamiento?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"mb-2",children:[(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)("span",{className:"font-bold text-[#00a67e] text-lg",children:e.caja_almacenamiento}),(0,t.jsx)("span",{className:"ml-2 px-2 py-0.5 bg-white rounded text-xs text-[#313D52]",children:e.codigo_ubicacion||"Sin c\xf3digo"})]}),e.notas_especiales&&(0,t.jsxs)("div",{className:"mt-1 text-sm text-[#006e54]",children:[(0,t.jsx)("span",{className:"font-medium",children:"Notas:"})," ",e.notas_especiales]})]}),(0,t.jsxs)("button",{onClick:()=>es(e.detalle_servicio_id,"".concat(e.marca||""," ").concat(e.modelo||""," (").concat(e.servicio_nombre,")").trim()),className:"text-xs text-[#006e54] hover:underline flex items-center",children:[(0,t.jsx)(b.A,{size:12,className:"mr-1"}),"Editar ubicaci\xf3n"]})]}):(0,t.jsxs)("div",{className:"flex flex-col items-center justify-center h-full",children:[(0,t.jsx)(x.A,{size:24,className:"mb-2 text-amber-500"}),(0,t.jsx)("p",{className:"text-sm text-amber-700 text-center mb-2",children:"Sin ubicaci\xf3n asignada"}),s.estado_actual_id>=2&&(0,t.jsxs)("button",{onClick:()=>es(e.detalle_servicio_id,"".concat(e.marca||""," ").concat(e.modelo||""," (").concat(e.servicio_nombre,")").trim()),className:"px-3 py-1 bg-white text-amber-700 rounded text-sm font-medium hover:bg-amber-100 transition-colors",children:[(0,t.jsx)(p.A,{size:12,className:"inline mr-1"}),"Asignar ahora"]})]})]})]}),(0,t.jsxs)("div",{className:"mt-3 flex justify-between items-center pt-2 border-t border-[#e0e6e5]",children:[(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)("span",{className:"inline-block w-2 h-2 rounded-full mr-2 ".concat(e.caja_almacenamiento?"bg-green-500":s.estado_actual_id>=2?"bg-yellow-500":"bg-gray-400")}),(0,t.jsx)("span",{className:"text-xs text-[#6c7a89]",children:e.caja_almacenamiento?"Almacenado":s.estado_actual_id>=2?"Pendiente de almacenar":"Pendiente de recepci\xf3n"})]}),(0,t.jsxs)("span",{className:"text-xs bg-[#f5f9f8] px-2 py-1 rounded",children:["ID: ",e.detalle_servicio_id]})]})]},e.detalle_servicio_id))})})]})})(),(0,t.jsx)("div",{className:"",children:(0,t.jsxs)("div",{className:"overflow-hidden rounded-lg border border-[#e0e6e5]",children:[(0,t.jsx)("table",{className:"min-w-full divide-y divide-[#e0e6e5] table-fixed",children:(0,t.jsx)("thead",{className:"bg-[#f5f9f8]",children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{scope:"col",className:"px-3 py-4 text-left text-xs font-medium text-[#6c7a89] uppercase tracking-wider",children:"Servicio"}),(0,t.jsx)("th",{scope:"col",className:"px-3 py-2 text-left text-xs font-medium text-[#6c7a89] uppercase tracking-wider",children:"Detalle de Calzado"}),(0,t.jsx)("th",{scope:"col",className:"px-3 py-2 text-center text-xs font-medium text-[#6c7a89] uppercase tracking-wider",children:"Cant"}),(0,t.jsx)("th",{scope:"col",className:"px-3 py-2 text-right text-xs font-medium text-[#6c7a89] uppercase tracking-wider",children:"Precio"})]})})}),(0,t.jsx)("div",{className:"min-h-[150px]  overflow-y-auto",children:(0,t.jsx)("table",{className:"min-w-full divide-y divide-[#e0e6e5] table-fixed",children:(0,t.jsxs)("tbody",{className:"bg-white divide-y divide-[#e0e6e5]",children:[0===s.servicios.length?(0,t.jsx)("tr",{children:(0,t.jsx)("td",{colSpan:4,className:"py-10 text-center text-sm text-[#6c7a89] italic",children:"No hay servicios registrados en esta orden"})}):s.servicios.map((e,s)=>{var a;return(0,t.jsxs)("tr",{className:s%2==0?"bg-white":"bg-[#f9fafa]",children:[(0,t.jsx)("td",{className:"px-3 py-3 whitespace-nowrap",children:(0,t.jsx)("span",{className:"font-medium text-sm text-[#313D52]",children:e.servicio_nombre})}),(0,t.jsxs)("td",{className:"px-3 py-3 text-sm text-[#6c7a89]",children:[e.marca_calzado&&e.modelo_calzado?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"font-medium text-sm text-[#313D52]",children:[e.marca_calzado," ",e.modelo_calzado]}),e.descripcion&&(0,t.jsx)("div",{className:"block text-xs text-[#6c7a89] mt-1",children:e.descripcion})]}):e.descripcion?(0,t.jsx)("span",{className:"text-sm text-[#313D52]",children:e.descripcion}):(0,t.jsx)("span",{className:"italic text-sm text-[#6c7a89]",children:"Sin detalle"}),e.caja_almacenamiento&&(0,t.jsxs)("div",{className:"mt-1 flex items-center",children:[(0,t.jsx)(h.A,{size:12,className:"text-[#78f3d3] mr-1"}),(0,t.jsxs)("span",{className:"text-xs bg-[#e0f7f0] px-1.5 py-0.5 rounded",children:["Caja ",e.caja_almacenamiento,e.codigo_ubicacion&&" (".concat(e.codigo_ubicacion,")")]})]})]}),(0,t.jsx)("td",{className:"px-3 py-3 text-center text-sm text-[#313D52]",children:null!==(a=e.cantidad)&&void 0!==a?a:1}),(0,t.jsx)("td",{className:"px-3 py-3 text-right text-sm text-[#313D52]",children:er(e.precio_unitario)})]},e.detalle_servicio_id)}),s.servicios.length>0&&(0,t.jsxs)("tr",{className:"bg-[#f5f9f8]",children:[(0,t.jsx)("td",{colSpan:3,className:"px-3 py-2 text-right text-sm font-medium text-[#6c7a89]",children:"Total Servicios:"}),(0,t.jsx)("td",{className:"px-3 py-2 text-right text-sm font-bold text-[#313D52]",children:er(ex)})]})]})})})]})}),(0,t.jsxs)("div",{className:"bg-white rounded-lg border border-[#e0e6e5] overflow-hidden",children:[(0,t.jsx)("div",{className:"px-4 py-3 bg-[#f5f9f8] border-b border-[#e0e6e5]",children:(0,t.jsxs)("h2",{className:"font-medium text-[#313D52] flex items-center",children:[(0,t.jsx)(z.A,{size:18,className:"mr-2 text-[#6c7a89]"}),"Productos"]})}),(0,t.jsx)("div",{className:"p-4",children:0===s.productos.length?(0,t.jsx)("div",{className:"text-center py-4 text-[#6c7a89]",children:(0,t.jsx)("p",{children:"No hay productos registrados en esta orden"})}):(0,t.jsx)("div",{className:"space-y-4",children:s.productos.map(e=>(0,t.jsx)("div",{className:"border-b border-[#e0e6e5] pb-4 last:border-b-0 last:pb-0",children:(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("h3",{className:"font-medium text-[#313D52]",children:e.producto_nombre}),(0,t.jsxs)("div",{className:"text-right",children:[(0,t.jsx)("p",{className:"text-[#313D52] font-medium",children:er(e.subtotal)}),(0,t.jsxs)("p",{className:"text-xs text-[#6c7a89]",children:[e.cantidad," x ",er(e.precio_unitario)]})]})]})},e.detalle_producto_id))})})]}),s.notas&&(0,t.jsxs)("div",{className:"bg-white rounded-lg border border-[#e0e6e5] overflow-hidden",children:[(0,t.jsx)("div",{className:"px-4 py-3 bg-[#f5f9f8] border-b border-[#e0e6e5]",children:(0,t.jsxs)("h2",{className:"font-medium text-[#313D52] flex items-center",children:[(0,t.jsx)(D.A,{size:18,className:"mr-2 text-[#6c7a89]"}),"Notas"]})}),(0,t.jsx)("div",{className:"p-4",children:(0,t.jsx)("p",{className:"text-[#6c7a89]",children:s.notas})})]})]}),(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"bg-white rounded-lg border border-[#e0e6e5] overflow-hidden",children:[(0,t.jsx)("div",{className:"px-4 py-3 bg-[#f5f9f8] border-b border-[#e0e6e5]",children:(0,t.jsxs)("h2",{className:"font-medium text-[#313D52] flex items-center",children:[(0,t.jsx)(A.A,{size:18,className:"mr-2 text-[#6c7a89]"}),"Estado Actual"]})}),(0,t.jsxs)("div",{className:"p-4 text-center",children:[(0,t.jsx)("div",{className:"text-lg font-semibold text-[#313D52] mb-3",children:s.estado_actual}),(0,t.jsxs)("button",{onClick:()=>G(!0),className:"inline-flex items-center px-4 py-2 bg-[#78f3d3] text-[#313D52] rounded-lg hover:bg-[#4de0c0] transition-colors text-sm",children:[(0,t.jsx)(b.A,{size:16,className:"mr-2"}),"Cambiar Estado"]})]})]}),(0,t.jsxs)("div",{className:"bg-white rounded-lg border border-[#e0e6e5] overflow-hidden",children:[(0,t.jsx)("div",{className:"px-4 py-3 bg-[#f5f9f8] border-b border-[#e0e6e5]",children:(0,t.jsxs)("h2",{className:"font-medium text-[#313D52] flex items-center",children:[(0,t.jsx)(C.A,{size:18,className:"mr-2 text-[#6c7a89]"}),"Historial de Estado"]})}),(0,t.jsx)("div",{className:"p-4",children:0===s.historial.length?(0,t.jsx)("div",{className:"text-center py-4 text-[#6c7a89]",children:(0,t.jsx)("p",{children:"No hay historial disponible"})}):(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("div",{className:"absolute left-2.5 top-0 bottom-0 w-0.5 bg-[#e0e6e5]"}),(0,t.jsx)("div",{className:"space-y-6",children:s.historial.map((e,s)=>(0,t.jsxs)("div",{className:"relative ml-7",children:[(0,t.jsx)("div",{className:"absolute -left-7 top-0 w-5 h-5 rounded-full border-2 flex items-center justify-center",style:{backgroundColor:e.estado_color?"#".concat(e.estado_color,"20"):"#e0e6e5",borderColor:e.estado_color?"#".concat(e.estado_color):"#6c7a89"},children:0===s&&(0,t.jsx)("div",{className:"w-2 h-2 rounded-full",style:{backgroundColor:e.estado_color?"#".concat(e.estado_color):"#6c7a89"}})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"font-medium text-[#313D52]",children:e.estado_nombre}),(0,t.jsx)("p",{className:"text-sm text-[#6c7a89]",children:et(e.fecha_cambio)}),(0,t.jsxs)("p",{className:"text-sm text-[#6c7a89]",children:["Por: ",e.empleado_nombre]}),e.comentario&&(0,t.jsxs)("p",{className:"mt-1 text-sm italic text-[#6c7a89] bg-[#f5f9f8] p-2 rounded",children:['"',e.comentario,'"']})]})]},e.historial_id))})]})})]}),(0,t.jsxs)("div",{className:"bg-white rounded-lg border border-[#e0e6e5] overflow-hidden",children:[(0,t.jsx)("div",{className:"px-4 py-3 bg-[#f5f9f8] border-b border-[#e0e6e5]",children:(0,t.jsxs)("h2",{className:"font-medium text-[#313D52] flex items-center",children:[(0,t.jsx)(i.A,{size:18,className:"mr-2 text-[#6c7a89]"}),"Pagos Registrados"]})}),(0,t.jsx)("div",{className:"p-4",children:0===s.pagos.length?(0,t.jsxs)("div",{className:"text-center py-4 text-[#6c7a89]",children:[(0,t.jsx)("p",{children:"No hay pagos registrados"}),(0,t.jsxs)("button",{onClick:()=>U(!0),className:"mt-3 inline-flex items-center px-3 py-1.5 bg-[#78f3d3] text-[#313D52] rounded-lg hover:bg-[#4de0c0] transition-colors text-sm",disabled:em<=0,children:[(0,t.jsx)(p.A,{size:16,className:"mr-1.5"}),"Registrar Pago"]})]}):(0,t.jsxs)("div",{className:"space-y-4",children:[s.pagos.map(e=>(0,t.jsx)("div",{className:"border-b border-[#e0e6e5] pb-4 last:border-b-0 last:pb-0",children:(0,t.jsxs)("div",{className:"flex justify-between items-start",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"flex items-center",children:[el(e.metodo),(0,t.jsx)("h3",{className:"font-medium text-[#313D52] ml-2",children:ei(e.metodo)})]}),(0,t.jsx)("p",{className:"text-sm text-[#6c7a89] mt-1",children:et(e.fecha_pago)}),(0,t.jsxs)("p",{className:"text-xs text-[#6c7a89]",children:["Por: ",e.empleado_nombre]}),e.referencia&&(0,t.jsxs)("p",{className:"text-xs text-[#6c7a89]",children:["Ref: ",e.referencia]})]}),(0,t.jsx)("span",{className:"font-medium text-[#313D52]",children:er(e.monto)})]})},e.pago_id)),em>0&&(0,t.jsxs)("button",{onClick:()=>U(!0),className:"w-full mt-2 py-2 bg-[#313D52] text-white rounded-lg flex items-center justify-center hover:bg-[#3e4a61] transition-colors text-sm",children:[(0,t.jsx)(p.A,{size:16,className:"mr-1.5"}),"Registrar Pago"]})]})})]})]})]}),B&&(0,t.jsx)(M,{currentStatus:s.estado_actual_id,onClose:()=>G(!1),onSubmit:en}),X&&(0,t.jsx)(O,{total:s.total,amountPaid:eo(),onClose:()=>U(!1),onSubmit:ec}),q&&(0,t.jsx)(L,{onClose:()=>H(!1),onSubmit:ed}),W&&$&&(0,t.jsx)(J,{shoeId:$.id,shoeName:$.name,onClose:()=>{K(!1),Q(null)},onSubmit:ee}),Y&&s&&(0,t.jsx)(V,{isOpen:Y,onClose:()=>Z(!1),order:{orden_id:s.orden_id,codigo_orden:s.codigo_orden,cliente_nombre:s.cliente_nombre,cliente_apellidos:s.cliente_apellidos,cliente_email:s.cliente_email,total:s.total}})]})}},90092:(e,s,a)=>{Promise.resolve().then(a.bind(a,10976))}},e=>{var s=s=>e(e.s=s);e.O(0,[95,8952,8441,1684,7358],()=>s(90092)),_N_E=e.O()}]);