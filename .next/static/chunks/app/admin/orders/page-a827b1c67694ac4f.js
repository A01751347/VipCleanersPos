(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4798],{13052:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(19946).A)("chevron-right",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]])},13717:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(19946).A)("square-pen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]])},14186:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(19946).A)("clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},16370:(e,t,s)=>{"use strict";s.d(t,{A:()=>c});var a=s(95155),l=s(12115),r=s(66932);let n=(0,s(19946).A)("check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]),c=e=>{var t;let{selectedStatus:s,onChange:c}=e,[i,d]=(0,l.useState)(!1),o=[{value:"pending",label:"Pendiente",color:"bg-yellow-100 text-yellow-800"},{value:"completed",label:"Completado",color:"bg-green-100 text-green-800"},{value:"cancelled",label:"Cancelado",color:"bg-red-100 text-red-800"}],x=e=>{s.includes(e)?c(s.filter(t=>t!==e)):c([...s,e])};return(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("button",{onClick:()=>d(!i),className:"inline-flex items-center justify-between px-4 py-2 w-48 rounded-lg border border-[#e0e6e5] bg-white hover:bg-[#f5f9f8] focus:outline-none focus:ring-2 focus:ring-[#78f3d3]",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(r.A,{size:16,className:"mr-2 text-[#6c7a89]"}),(0,a.jsx)("span",{className:"text-sm",children:0===s.length?"Todos los estados":1===s.length?null===(t=o.find(e=>e.value===s[0]))||void 0===t?void 0:t.label:"".concat(s.length," estados")})]})}),i&&(0,a.jsx)("div",{className:"absolute mt-1 w-64 bg-white border border-[#e0e6e5] rounded-lg shadow-lg z-10",children:(0,a.jsxs)("div",{className:"p-2",children:[(0,a.jsxs)("button",{onClick:()=>{s.length===o.length?c([]):c(o.map(e=>e.value))},className:"flex items-center justify-between w-full px-3 py-2 text-sm text-left rounded-md hover:bg-[#f5f9f8]",children:[(0,a.jsx)("span",{children:s.length===o.length?"Deseleccionar todos":"Seleccionar todos"}),s.length===o.length&&(0,a.jsx)(n,{size:16,className:"text-[#78f3d3]"})]}),(0,a.jsx)("div",{className:"h-px bg-[#e0e6e5] my-1"}),o.map(e=>(0,a.jsxs)("button",{onClick:()=>x(e.value),className:"flex items-center justify-between w-full px-3 py-2 text-sm text-left rounded-md hover:bg-[#f5f9f8]",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("span",{className:"inline-block w-2 h-2 rounded-full mr-2 ".concat(e.color.split(" ")[0])}),(0,a.jsx)("span",{children:e.label})]}),s.includes(e.value)&&(0,a.jsx)(n,{size:16,className:"text-[#78f3d3]"})]},e.value))]})})]})}},27414:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(19946).A)("banknote",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"2",key:"9lu3g6"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M6 12h.01M18 12h.01",key:"113zkx"}]])},37108:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(19946).A)("package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]])},40646:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(19946).A)("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},42355:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(19946).A)("chevron-left",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]])},44020:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(19946).A)("ellipsis-vertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]])},47924:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(19946).A)("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]])},51154:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(19946).A)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},53904:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(19946).A)("refresh-cw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]])},54416:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(19946).A)("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},62525:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(19946).A)("trash-2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},66474:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(19946).A)("chevron-down",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]])},66514:(e,t,s)=>{Promise.resolve().then(s.bind(s,81053))},66932:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(19946).A)("funnel",[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]])},71007:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(19946).A)("user",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},81053:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>M});var a=s(95155),l=s(12115),r=s(86151),n=s(91788),c=s(51154),i=s(53904),d=s(47924),o=s(37108),x=s(42355),m=s(13052),h=s(85339),u=s(97108),p=s(40646),f=s(54416),g=s(66474),j=s(71007),y=s(27414),b=s(44020),v=s(92657),N=s(13717),k=s(14186),w=s(62525),A=s(6874),z=s.n(A);let _=e=>{let{orders:t=[],onStatusChange:s}=e,[r,n]=(0,l.useState)("fecha_recepcion"),[i,d]=(0,l.useState)("desc"),[x,m]=(0,l.useState)(null),[A,_]=(0,l.useState)(null),C=e=>{if("string"!=typeof e)return"bg-gray-100 text-gray-500";switch(e.toLowerCase()){case"pendiente":return"bg-yellow-100 text-yellow-800";case"recibido":return"bg-blue-100 text-blue-800";case"en proceso":return"bg-orange-100 text-orange-800";case"listo para entrega":return"bg-green-100 text-green-600";case"entregado":return"bg-green-100 text-green-800";case"cancelado":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},M=e=>{switch(e.toLowerCase()){case"pendiente":return"bg-yellow-100 text-yellow-800";case"parcial":return"bg-blue-100 text-blue-800";case"completado":return"bg-green-100 text-green-800";default:return"bg-gray-100 text-gray-800"}},D=e=>{if("string"!=typeof e)return(0,a.jsx)(h.A,{size:14,className:"text-gray-400"});switch(e.toLowerCase()){case"pendiente":case"listo para entrega":return(0,a.jsx)(o.A,{size:14});case"recibido":return(0,a.jsx)(u.A,{size:14});case"en proceso":return(0,a.jsx)(c.A,{size:14,className:"animate-spin"});case"entregado":return(0,a.jsx)(p.A,{size:14});case"cancelado":return(0,a.jsx)(f.A,{size:14});default:return(0,a.jsx)(h.A,{size:14})}},S=e=>e?new Date(e).toLocaleDateString("es-MX",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"",E=e=>new Intl.NumberFormat("es-MX",{style:"currency",currency:"MXN"}).format(e),P=e=>{r===e?d("asc"===i?"desc":"asc"):(n(e),d("asc"))},I=e=>{m(x===e?null:e)},V=async e=>{if(confirm("\xbfEst\xe1s seguro de que deseas eliminar esta orden?"))try{_(e),console.log("Deleting order with ID: ".concat(e)),s&&s()}catch(e){console.error("Error al eliminar la orden:",e),alert("Error al eliminar la orden")}finally{m(null),_(null)}},H=async(e,t)=>{try{if(_(e),!(await fetch("/api/admin/orders/".concat(e,"/status"),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({estadoId:t})})).ok)throw Error("Error al actualizar el estado de la orden");s&&s()}catch(e){console.error("Error al actualizar el estado de la orden:",e),alert("Error al actualizar el estado de la orden")}finally{m(null),_(null)}};return(0,a.jsx)("div",{className:"overflow-x-auto",style:{minHeight:"400px"},children:(0,a.jsxs)("table",{className:"min-w-full divide-y divide-[#e0e6e5]",children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-[#6c7a89] uppercase tracking-wider cursor-pointer hover:bg-[#f5f9f8]",onClick:()=>P("codigo_orden"),children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("span",{children:"C\xf3digo"}),"codigo_orden"===r&&(0,a.jsx)(g.A,{size:16,className:"ml-1 transform ".concat("asc"===i?"rotate-180":"")})]})}),(0,a.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-[#6c7a89] uppercase tracking-wider cursor-pointer hover:bg-[#f5f9f8]",onClick:()=>P("cliente_nombre"),children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("span",{children:"Cliente"}),"cliente_nombre"===r&&(0,a.jsx)(g.A,{size:16,className:"ml-1 transform ".concat("asc"===i?"rotate-180":"")})]})}),(0,a.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-[#6c7a89] uppercase tracking-wider cursor-pointer hover:bg-[#f5f9f8]",onClick:()=>P("fecha_recepcion"),children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("span",{children:"Fecha"}),"fecha_recepcion"===r&&(0,a.jsx)(g.A,{size:16,className:"ml-1 transform ".concat("asc"===i?"rotate-180":"")})]})}),(0,a.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-[#6c7a89] uppercase tracking-wider cursor-pointer hover:bg-[#f5f9f8]",onClick:()=>P("total"),children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("span",{children:"Total"}),"total"===r&&(0,a.jsx)(g.A,{size:16,className:"ml-1 transform ".concat("asc"===i?"rotate-180":"")})]})}),(0,a.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-[#6c7a89] uppercase tracking-wider cursor-pointer hover:bg-[#f5f9f8]",onClick:()=>P("estado_actual"),children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("span",{children:"Estado"}),"estado_actual"===r&&(0,a.jsx)(g.A,{size:16,className:"ml-1 transform ".concat("asc"===i?"rotate-180":"")})]})}),(0,a.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-[#6c7a89] uppercase tracking-wider cursor-pointer hover:bg-[#f5f9f8]",onClick:()=>P("estado_pago"),children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("span",{children:"Pago"}),"estado_pago"===r&&(0,a.jsx)(g.A,{size:16,className:"ml-1 transform ".concat("asc"===i?"rotate-180":"")})]})}),(0,a.jsx)("th",{className:"px-4 py-3 text-right text-xs font-medium text-[#6c7a89] uppercase tracking-wider",children:"Acciones"})]})}),(0,a.jsx)("tbody",{className:"bg-white divide-y divide-[#e0e6e5]",children:t.map(e=>(0,a.jsxs)("tr",{className:"hover:bg-[#f5f9f8] ".concat(A===e.orden_id?"opacity-50":""),children:[(0,a.jsx)("td",{className:"px-4 py-3 whitespace-nowrap text-sm font-medium text-[#313D52]",children:e.codigo_orden}),(0,a.jsx)("td",{className:"px-4 py-3 whitespace-nowrap",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"flex-shrink-0 h-8 w-8 bg-[#f5f9f8] rounded-full flex items-center justify-center",children:(0,a.jsx)(j.A,{size:16,className:"text-[#6c7a89]"})}),(0,a.jsxs)("div",{className:"ml-3",children:[(0,a.jsxs)("div",{className:"text-sm font-medium text-[#313D52]",children:[e.cliente_nombre," ",e.cliente_apellidos]}),(0,a.jsx)("div",{className:"text-xs text-[#6c7a89]",children:e.cliente_email})]})]})}),(0,a.jsx)("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-[#6c7a89]",children:S(e.fecha_recepcion)}),(0,a.jsx)("td",{className:"px-4 py-3 whitespace-nowrap text-sm font-medium text-[#313D52]",children:E(e.total)}),(0,a.jsx)("td",{className:"px-4 py-3 whitespace-nowrap",children:A===e.orden_id?(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(c.A,{size:16,className:"animate-spin mr-2 text-[#78f3d3]"}),(0,a.jsx)("span",{className:"text-[#6c7a89] text-xs",children:"Actualizando..."})]}):(0,a.jsxs)("span",{className:"px-2 py-1 inline-flex items-center text-xs leading-5 font-semibold rounded-full ".concat(C(e.estado_servicio)),children:[(0,a.jsx)("span",{className:"mr-1",children:D(e.estado_servicio)}),e.estado_servicio]})}),(0,a.jsx)("td",{className:"px-4 py-3 whitespace-nowrap",children:(0,a.jsxs)("span",{className:"px-2 py-1 inline-flex items-center text-xs leading-5 font-semibold rounded-full ".concat(M(e.estado_pago)),children:[(0,a.jsx)(y.A,{size:14,className:"mr-1"}),e.estado_pago]})}),(0,a.jsx)("td",{className:"px-4 py-3 whitespace-nowrap text-right text-sm font-medium",children:(0,a.jsxs)("div",{className:"relative inline-block text-left",children:[(0,a.jsx)("button",{onClick:()=>I(e.orden_id),className:"p-1 rounded-full hover:bg-[#e0e6e5] text-[#6c7a89]",disabled:A===e.orden_id,children:(0,a.jsx)(b.A,{size:16})}),x===e.orden_id&&(0,a.jsxs)("div",{className:"absolute right-0 mt-2 w-56 rounded-md shadow-lg bg-white z-50 ring-1 ring-[#e0e6e5] divide-y divide-[#e0e6e5]",children:[(0,a.jsxs)("div",{className:"py-1",children:[(0,a.jsxs)(z(),{href:"/admin/orders/".concat(e.orden_id),className:"flex items-center px-4 py-2 text-sm text-[#313D52] hover:bg-[#f5f9f8]",children:[(0,a.jsx)(v.A,{size:16,className:"mr-3 text-[#6c7a89]"}),"Ver detalles"]}),(0,a.jsxs)(z(),{href:"/admin/orders/".concat(e.orden_id,"/edit"),className:"flex items-center px-4 py-2 text-sm text-[#313D52] hover:bg-[#f5f9f8]",children:[(0,a.jsx)(N.A,{size:16,className:"mr-3 text-[#6c7a89]"}),"Editar"]})]}),(0,a.jsxs)("div",{className:"py-1",children:[(0,a.jsxs)("button",{onClick:()=>H(e.orden_id,9),className:"flex items-center px-4 py-2 text-sm text-[#313D52] hover:bg-[#f5f9f8] w-full text-left",disabled:9===e.estado_servicio_id,children:[(0,a.jsx)("span",{className:"w-4 h-4 mr-3 rounded-full bg-purple-100 flex items-center justify-center",children:(0,a.jsx)(p.A,{size:12,className:"text-yellow-800"})}),"Marcar como Pendiente"]}),(0,a.jsxs)("button",{onClick:()=>H(e.orden_id,1),className:"flex items-center px-4 py-2 text-sm text-[#313D52] hover:bg-[#f5f9f8] w-full text-left",disabled:1===e.estado_servicio_id,children:[(0,a.jsx)("span",{className:"w-4 h-4 mr-3 rounded-full bg-blue-100 flex items-center justify-center",children:(0,a.jsx)(p.A,{size:12,className:"text-blue-800"})}),"Marcar como Recibido"]}),(0,a.jsxs)("button",{onClick:()=>H(e.orden_id,2),className:"flex items-center px-4 py-2 text-sm text-[#313D52] hover:bg-[#f5f9f8] w-full text-left",disabled:2===e.estado_servicio_id,children:[(0,a.jsx)("span",{className:"w-4 h-4 mr-3 rounded-full bg-orange-100 flex items-center justify-center",children:(0,a.jsx)(k.A,{size:12,className:"text-orange-800"})}),"Marcar como En Proceso"]}),(0,a.jsxs)("button",{onClick:()=>H(e.orden_id,6),className:"flex items-center px-4 py-2 text-sm text-[#313D52] hover:bg-[#f5f9f8] w-full text-left",disabled:6===e.estado_servicio_id,children:[(0,a.jsx)("span",{className:"w-4 h-4 mr-3 rounded-full bg-green-100 flex items-center justify-center",children:(0,a.jsx)(p.A,{size:12,className:"text-green-800"})}),"Marcar como Completado"]}),(0,a.jsxs)("button",{onClick:()=>H(e.orden_id,7),className:"flex items-center px-4 py-2 text-sm text-[#313D52] hover:bg-[#f5f9f8] w-full text-left",disabled:7===e.estado_servicio_id,children:[(0,a.jsx)("span",{className:"w-4 h-4 mr-3 rounded-full bg-green-100 flex items-center justify-center",children:(0,a.jsx)(p.A,{size:12,className:"text-green-800"})}),"Marcar como Entregado"]}),(0,a.jsxs)("button",{onClick:()=>H(e.orden_id,8),className:"flex items-center px-4 py-2 text-sm text-[#313D52] hover:bg-[#f5f9f8] w-full text-left",disabled:8===e.estado_servicio_id,children:[(0,a.jsx)("span",{className:"w-4 h-4 mr-3 rounded-full bg-red-100 flex items-center justify-center",children:(0,a.jsx)(p.A,{size:12,className:"text-red-800"})}),"Marcar como Cancelado"]})]}),(0,a.jsx)("div",{className:"py-1",children:(0,a.jsxs)("button",{onClick:()=>V(e.orden_id),className:"flex items-center px-4 py-2 text-sm text-red-600 hover:bg-red-50 w-full text-left",children:[(0,a.jsx)(w.A,{size:16,className:"mr-3"}),"Eliminar"]})})]})]})})]},e.orden_id))})]})})};var C=s(16370);function M(){let[e,t]=(0,l.useState)(""),[s,h]=(0,l.useState)(1),[u,p]=(0,l.useState)([]),[f,g]=(0,l.useState)(""),[j,y]=(0,l.useState)({start:"",end:""}),[b,v]=(0,l.useState)([]),[N,k]=(0,l.useState)(0),[w,A]=(0,l.useState)(1),[M]=(0,l.useState)(10),[D,S]=(0,l.useState)(!0),[E,P]=(0,l.useState)(!1),[I,V]=(0,l.useState)(null),H=async function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:u,l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:f,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e,n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:j;try{P(!0);let e="/api/admin/orders?page=".concat(t,"&pageSize=").concat(M);a&&a.length>0&&(e+="&estadoId=".concat(a.join(","))),l&&(e+="&estadoPago=".concat(l)),r&&(e+="&search=".concat(encodeURIComponent(r))),n.start&&(e+="&fechaInicio=".concat(encodeURIComponent(n.start))),n.end&&(e+="&fechaFin=".concat(encodeURIComponent(n.end)));let s=await fetch(e);if(!s.ok)throw Error("Error al cargar las \xf3rdenes");let c=await s.json();v(c.orders||[]),k(c.total||0),A(c.totalPages||1),V(null)}catch(e){console.error("Error fetching orders:",e),V("Error al cargar las \xf3rdenes. Intente nuevamente.")}finally{S(!1),P(!1)}};(0,l.useEffect)(()=>{H()},[]);let q=t=>{let{name:s,value:a}=t.target,l={...j,[s]:a};y(l),("start"===s&&a&&j.end||"end"===s&&a&&j.start)&&(h(1),H(1,u,f,e,l))},F=()=>{H(s,u,f,e,j)};return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex flex-col md:flex-row md:justify-between md:items-center gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-xl font-semibold text-[#313D52]",children:"Administrar \xd3rdenes"}),(0,a.jsx)("p",{className:"text-sm text-[#6c7a89]",children:"Visualiza y gestiona las \xf3rdenes de servicio y venta"})]}),(0,a.jsxs)("div",{className:"flex flex-wrap gap-3",children:[(0,a.jsxs)(z(),{href:"/admin/pos",className:"inline-flex items-center px-4 py-2 bg-[#313D52] text-white rounded-lg border border-[#313D52] hover:bg-[#3e4a61] transition-colors",children:[(0,a.jsx)(r.A,{size:16,className:"mr-2"}),"Punto de Venta"]}),(0,a.jsxs)("button",{onClick:()=>{console.log("Exportando datos..."),alert("Funcionalidad de exportaci\xf3n no implementada a\xfan")},className:"inline-flex items-center px-4 py-2 bg-[#f5f9f8] text-[#313D52] rounded-lg border border-[#e0e6e5] hover:bg-[#e0e6e5] transition-colors",children:[(0,a.jsx)(n.A,{size:16,className:"mr-2"}),"Exportar"]}),(0,a.jsx)("button",{className:"inline-flex items-center px-4 py-2 bg-[#78f3d3] text-[#313D52] rounded-lg hover:bg-[#4de0c0] transition-colors disabled:opacity-50 disabled:cursor-not-allowed",onClick:F,disabled:E,children:E?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(c.A,{size:16,className:"mr-2 animate-spin"}),"Actualizando..."]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(i.A,{size:16,className:"mr-2"}),"Actualizar"]})})]})]}),(0,a.jsx)("div",{className:"bg-white rounded-lg border border-[#e0e6e5] p-4",children:(0,a.jsxs)("div",{className:"flex flex-col md:flex-row gap-4",children:[(0,a.jsx)("div",{className:"md:flex-1",children:(0,a.jsxs)("form",{onSubmit:t=>{t.preventDefault(),h(1),H(1,u,f,e,j)},className:"flex items-center relative",children:[(0,a.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,a.jsx)(d.A,{size:18,className:"text-[#6c7a89]"})}),(0,a.jsx)("input",{type:"text",placeholder:"Buscar por cliente, c\xf3digo o empleado...",value:e,onChange:e=>{t(e.target.value)},className:"py-2 pl-10 pr-4 rounded-lg border border-[#e0e6e5] focus:outline-none focus:ring-2 focus:ring-[#78f3d3] text-sm w-full"})]})}),(0,a.jsx)("div",{className:"flex-shrink-0",children:(0,a.jsx)(C.A,{selectedStatus:u,onChange:t=>{p(t),h(1),H(1,t,f,e,j)}})}),(0,a.jsx)("div",{className:"flex-shrink-0",children:(0,a.jsxs)("select",{value:f,onChange:t=>{let s=t.target.value;g(s),h(1),H(1,u,s,e,j)},className:"py-2 px-4 rounded-lg border border-[#e0e6e5] focus:outline-none focus:ring-2 focus:ring-[#78f3d3] text-sm",children:[(0,a.jsx)("option",{value:"",children:"Todos los pagos"}),(0,a.jsx)("option",{value:"pendiente",children:"Pago pendiente"}),(0,a.jsx)("option",{value:"parcial",children:"Pago parcial"}),(0,a.jsx)("option",{value:"completado",children:"Pago completado"})]})}),(0,a.jsxs)("div",{className:"flex-shrink-0 flex flex-col sm:flex-row gap-2",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"startDate",className:"block text-xs text-[#6c7a89] mb-1",children:"Desde"}),(0,a.jsx)("input",{type:"date",id:"startDate",name:"start",value:j.start,onChange:q,className:"py-2 px-3 rounded-lg border border-[#e0e6e5] focus:outline-none focus:ring-2 focus:ring-[#78f3d3] text-sm w-full"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"endDate",className:"block text-xs text-[#6c7a89] mb-1",children:"Hasta"}),(0,a.jsx)("input",{type:"date",id:"endDate",name:"end",value:j.end,onChange:q,className:"py-2 px-3 rounded-lg border border-[#e0e6e5] focus:outline-none focus:ring-2 focus:ring-[#78f3d3] text-sm w-full"})]})]})]})}),(0,a.jsxs)("div",{className:"bg-white rounded-lg border border-[#e0e6e5] overflow-hidden",children:[D?(0,a.jsx)("div",{className:"flex justify-center items-center py-20",children:(0,a.jsx)(c.A,{size:40,className:"animate-spin text-[#78f3d3]"})}):I?(0,a.jsxs)("div",{className:"text-center py-10 text-red-500",children:[(0,a.jsx)("p",{children:I}),(0,a.jsx)("button",{onClick:F,className:"mt-4 px-4 py-2 bg-[#78f3d3] text-[#313D52] rounded-lg hover:bg-[#4de0c0] transition-colors",children:"Reintentar"})]}):0===b.length?(0,a.jsxs)("div",{className:"text-center py-20",children:[(0,a.jsx)(o.A,{size:48,className:"mx-auto text-[#e0e6e5] mb-4"}),(0,a.jsx)("p",{className:"text-[#6c7a89] font-medium",children:"No se encontraron \xf3rdenes"}),(0,a.jsx)("p",{className:"text-sm text-[#6c7a89]",children:"Intenta con otros filtros o crea una nueva orden en el punto de venta"}),(0,a.jsxs)(z(),{href:"/admin/pos",className:"inline-flex items-center px-4 py-2 mt-4 bg-[#78f3d3] text-[#313D52] rounded-lg hover:bg-[#4de0c0] transition-colors",children:[(0,a.jsx)(r.A,{size:16,className:"mr-2"}),"Ir al Punto de Venta"]})]}):(0,a.jsx)(_,{orders:b,onStatusChange:F}),!D&&!I&&b.length>0&&(0,a.jsxs)("div",{className:"px-4 py-3 flex items-center justify-between border-t border-[#e0e6e5]",children:[(0,a.jsxs)("div",{className:"text-sm text-[#6c7a89]",children:["Mostrando ",(0,a.jsx)("span",{className:"font-medium",children:(s-1)*M+1})," a ",(0,a.jsx)("span",{className:"font-medium",children:Math.min(s*M,N)})," de ",(0,a.jsx)("span",{className:"font-medium",children:N})," resultados"]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("button",{onClick:()=>{if(s>1){let t=s-1;h(t),H(t,u,f,e,j)}},disabled:1===s,className:"p-2 rounded-lg ".concat(1===s?"text-[#e0e6e5] cursor-not-allowed":"text-[#313D52] hover:bg-[#f5f9f8]"),children:(0,a.jsx)(x.A,{size:20})}),(0,a.jsxs)("span",{className:"text-sm text-[#313D52]",children:["P\xe1gina ",(0,a.jsx)("span",{className:"font-medium",children:s})," de ",(0,a.jsx)("span",{className:"font-medium",children:w})]}),(0,a.jsx)("button",{onClick:()=>{if(s<w){let t=s+1;h(t),H(t,u,f,e,j)}},disabled:s===w,className:"p-2 rounded-lg ".concat(s===w?"text-[#e0e6e5] cursor-not-allowed":"text-[#313D52] hover:bg-[#f5f9f8]"),children:(0,a.jsx)(m.A,{size:20})})]})]})]})]})}},85339:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(19946).A)("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},86151:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(19946).A)("shopping-bag",[["path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z",key:"hou9p0"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}]])},91788:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(19946).A)("download",[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]])},92657:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(19946).A)("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},97108:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(19946).A)("inbox",[["polyline",{points:"22 12 16 12 14 15 10 15 8 12 2 12",key:"o97t9d"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}]])}},e=>{var t=t=>e(e.s=t);e.O(0,[95,8441,1684,7358],()=>t(66514)),_N_E=e.O()}]);