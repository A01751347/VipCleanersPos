(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7085],{4516:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(19946).A)("map-pin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]])},13717:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(19946).A)("square-pen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]])},19420:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(19946).A)("phone",[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]])},28883:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(19946).A)("mail",[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]])},31838:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>g});var a=t(95155),l=t(12115),c=t(51154),r=t(35169),i=t(13717),d=t(86151),n=t(71007),x=t(19420),o=t(28883),m=t(4516),h=t(69074),p=t(33109);let u=(0,t(19946).A)("award",[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]]);var f=t(37108),j=t(81586),N=t(6874),y=t.n(N),v=t(35695);function g(){let e=(0,v.useParams)().id,[s,t]=(0,l.useState)(null),[N,g]=(0,l.useState)(!0),[b,w]=(0,l.useState)(null),k=async()=>{try{g(!0);let s=await fetch("/api/admin/clients?id=".concat(e));if(!s.ok)throw Error("Error al cargar los detalles del cliente");let a=await s.json();t(a.client),w(null)}catch(e){console.error("Error fetching client details:",e),w("Error al cargar los detalles del cliente. Intente nuevamente.")}finally{g(!1)}};(0,l.useEffect)(()=>{k()},[e]);let A=e=>new Date(e).toLocaleDateString("es-MX",{year:"numeric",month:"long",day:"numeric"}),_=e=>new Intl.NumberFormat("es-MX",{style:"currency",currency:"MXN"}).format(e),D=e=>{switch(e.toLowerCase()){case"pendiente":return"bg-yellow-100 text-yellow-800";case"parcial":return"bg-blue-100 text-blue-800";case"completado":return"bg-green-100 text-green-800";default:return"bg-gray-100 text-gray-800"}};return N?(0,a.jsx)("div",{className:"flex justify-center items-center h-64",children:(0,a.jsx)(c.A,{size:40,className:"animate-spin text-[#78f3d3]"})}):b||!s?(0,a.jsxs)("div",{className:"text-center py-10 text-red-500",children:[(0,a.jsx)("p",{children:b||"Cliente no encontrado"}),(0,a.jsxs)(y(),{href:"/admin/clients",className:"mt-4 inline-flex items-center px-4 py-2 bg-[#78f3d3] text-[#313D52] rounded-lg hover:bg-[#4de0c0] transition-colors",children:[(0,a.jsx)(r.A,{size:16,className:"mr-2"}),"Volver a clientes"]})]}):(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center mb-2",children:[(0,a.jsx)(y(),{href:"/admin/clients",className:"mr-2 text-[#6c7a89] hover:text-[#313D52] transition-colors",children:(0,a.jsx)(r.A,{size:20})}),(0,a.jsxs)("h1",{className:"text-xl font-semibold text-[#313D52]",children:[s.nombre," ",s.apellidos]})]}),(0,a.jsxs)("p",{className:"text-sm text-[#6c7a89]",children:["Cliente desde ",A(s.fecha_creacion)]})]}),(0,a.jsxs)("div",{className:"flex flex-wrap gap-3",children:[(0,a.jsxs)(y(),{href:"/admin/clients/".concat(s.cliente_id,"/edit"),className:"inline-flex items-center px-4 py-2 bg-[#78f3d3] text-[#313D52] rounded-lg hover:bg-[#4de0c0] transition-colors",children:[(0,a.jsx)(i.A,{size:16,className:"mr-2"}),"Editar Cliente"]}),(0,a.jsxs)(y(),{href:"/admin/pos",className:"inline-flex items-center px-4 py-2 bg-[#313D52] text-white rounded-lg hover:bg-[#3e4a61] transition-colors",children:[(0,a.jsx)(d.A,{size:16,className:"mr-2"}),"Nueva Orden"]})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,a.jsxs)("div",{className:"bg-white rounded-lg border border-[#e0e6e5] overflow-hidden",children:[(0,a.jsx)("div",{className:"px-4 py-3 bg-[#f5f9f8] border-b border-[#e0e6e5]",children:(0,a.jsxs)("h2",{className:"font-medium text-[#313D52] flex items-center",children:[(0,a.jsx)(n.A,{size:18,className:"mr-2 text-[#6c7a89]"}),"Informaci\xf3n Personal"]})}),(0,a.jsxs)("div",{className:"p-4 space-y-3",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-xs text-[#6c7a89]",children:"Nombre completo"}),(0,a.jsxs)("p",{className:"text-[#313D52] font-medium",children:[s.nombre," ",s.apellidos]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-xs text-[#6c7a89]",children:"Tel\xe9fono"}),(0,a.jsxs)("p",{className:"text-[#313D52] flex items-center",children:[(0,a.jsx)(x.A,{size:14,className:"mr-1 text-[#6c7a89]"}),s.telefono]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-xs text-[#6c7a89]",children:"Email"}),(0,a.jsxs)("p",{className:"text-[#313D52] flex items-center",children:[(0,a.jsx)(o.A,{size:14,className:"mr-1 text-[#6c7a89]"}),s.email||"No registrado"]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-xs text-[#6c7a89]",children:"Direcci\xf3n"}),s.direccion?(0,a.jsxs)("div",{className:"text-[#313D52] flex items-start",children:[(0,a.jsx)(m.A,{size:14,className:"mr-1 mt-0.5 text-[#6c7a89] flex-shrink-0"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{children:s.direccion}),(0,a.jsxs)("p",{className:"text-sm",children:[s.ciudad&&"".concat(s.ciudad,", "),s.estado&&"".concat(s.estado," "),s.codigo_postal]})]})]}):(0,a.jsx)("p",{className:"text-[#6c7a89]",children:"No registrada"})]}),s.fecha_nacimiento&&(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-xs text-[#6c7a89]",children:"Fecha de nacimiento"}),(0,a.jsxs)("p",{className:"text-[#313D52] flex items-center",children:[(0,a.jsx)(h.A,{size:14,className:"mr-1 text-[#6c7a89]"}),A(s.fecha_nacimiento)]})]})]})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg border border-[#e0e6e5] overflow-hidden",children:[(0,a.jsx)("div",{className:"px-4 py-3 bg-[#f5f9f8] border-b border-[#e0e6e5]",children:(0,a.jsxs)("h2",{className:"font-medium text-[#313D52] flex items-center",children:[(0,a.jsx)(p.A,{size:18,className:"mr-2 text-[#6c7a89]"}),"Estad\xedsticas"]})}),(0,a.jsxs)("div",{className:"p-4 space-y-4",children:[(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"text-3xl font-bold text-[#313D52]",children:s.total_ordenes}),(0,a.jsx)("p",{className:"text-sm text-[#6c7a89]",children:"\xd3rdenes totales"})]}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"text-3xl font-bold text-[#313D52]",children:_(s.total_gastado)}),(0,a.jsx)("p",{className:"text-sm text-[#6c7a89]",children:"Total gastado"})]}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"text-3xl font-bold text-[#313D52]",children:_(s.total_ordenes>0?s.total_gastado/s.total_ordenes:0)}),(0,a.jsx)("p",{className:"text-sm text-[#6c7a89]",children:"Ticket promedio"})]})]})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg border border-[#e0e6e5] overflow-hidden",children:[(0,a.jsx)("div",{className:"px-4 py-3 bg-[#f5f9f8] border-b border-[#e0e6e5]",children:(0,a.jsxs)("h2",{className:"font-medium text-[#313D52] flex items-center",children:[(0,a.jsx)(u,{size:18,className:"mr-2 text-[#6c7a89]"}),"Programa de Fidelidad"]})}),(0,a.jsxs)("div",{className:"p-4",children:[(0,a.jsxs)("div",{className:"text-center mb-4",children:[(0,a.jsx)("div",{className:"text-4xl font-bold text-[#78f3d3]",children:s.puntos_fidelidad}),(0,a.jsx)("p",{className:"text-sm text-[#6c7a89]",children:"Puntos acumulados"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,a.jsx)("span",{className:"text-[#6c7a89]",children:"Nivel actual:"}),(0,a.jsx)("span",{className:"font-medium text-[#313D52]",children:s.puntos_fidelidad<100?"Bronce":s.puntos_fidelidad<500?"Plata":s.puntos_fidelidad<1e3?"Oro":"Platino"})]}),(0,a.jsx)("div",{className:"w-full bg-[#f5f9f8] rounded-full h-2",children:(0,a.jsx)("div",{className:"bg-[#78f3d3] h-2 rounded-full transition-all duration-300",style:{width:"".concat(Math.min(s.puntos_fidelidad%100,100),"%")}})}),(0,a.jsxs)("p",{className:"text-xs text-[#6c7a89] text-center",children:[100-s.puntos_fidelidad%100," puntos para el siguiente nivel"]})]})]})]})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg border border-[#e0e6e5] overflow-hidden",children:[(0,a.jsxs)("div",{className:"px-4 py-3 bg-[#f5f9f8] border-b border-[#e0e6e5] flex justify-between items-center",children:[(0,a.jsxs)("h2",{className:"font-medium text-[#313D52] flex items-center",children:[(0,a.jsx)(f.A,{size:18,className:"mr-2 text-[#6c7a89]"}),"\xdaltimas \xd3rdenes"]}),(0,a.jsx)(y(),{href:"/admin/orders?clientId=".concat(s.cliente_id),className:"text-sm text-[#78f3d3] hover:underline",children:"Ver todas"})]}),(0,a.jsx)("div",{className:"overflow-x-auto",children:s.ultimas_ordenes&&s.ultimas_ordenes.length>0?(0,a.jsxs)("table",{className:"min-w-full divide-y divide-[#e0e6e5]",children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-[#6c7a89] uppercase tracking-wider",children:"C\xf3digo"}),(0,a.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-[#6c7a89] uppercase tracking-wider",children:"Fecha"}),(0,a.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-[#6c7a89] uppercase tracking-wider",children:"Total"}),(0,a.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-[#6c7a89] uppercase tracking-wider",children:"Estado"}),(0,a.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-[#6c7a89] uppercase tracking-wider",children:"Pago"}),(0,a.jsx)("th",{className:"px-4 py-3"})]})}),(0,a.jsx)("tbody",{className:"divide-y divide-[#e0e6e5]",children:s.ultimas_ordenes.map(e=>(0,a.jsxs)("tr",{className:"hover:bg-[#f5f9f8]",children:[(0,a.jsx)("td",{className:"px-4 py-3 whitespace-nowrap text-sm font-medium text-[#313D52]",children:e.codigo_orden}),(0,a.jsx)("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-[#6c7a89]",children:A(e.fecha_recepcion)}),(0,a.jsx)("td",{className:"px-4 py-3 whitespace-nowrap text-sm font-medium text-[#313D52]",children:_(e.total)}),(0,a.jsx)("td",{className:"px-4 py-3 whitespace-nowrap",children:(0,a.jsx)("span",{className:"px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full",style:{backgroundColor:"#".concat(e.estado_color,"20"),color:"#".concat(e.estado_color)},children:e.estado_nombre})}),(0,a.jsx)("td",{className:"px-4 py-3 whitespace-nowrap",children:(0,a.jsxs)("span",{className:"px-2 py-1 inline-flex items-center text-xs leading-5 font-semibold rounded-full ".concat(D(e.estado_pago)),children:[(0,a.jsx)(j.A,{size:12,className:"mr-1"}),e.estado_pago]})}),(0,a.jsx)("td",{className:"px-4 py-3 whitespace-nowrap text-right text-sm font-medium",children:(0,a.jsx)(y(),{href:"/admin/orders/".concat(e.orden_id),className:"text-[#78f3d3] hover:text-[#4de0c0]",children:"Ver detalle"})})]},e.orden_id))})]}):(0,a.jsxs)("div",{className:"text-center py-8 text-[#6c7a89]",children:[(0,a.jsx)(f.A,{size:48,className:"mx-auto mb-4 text-[#e0e6e5]"}),(0,a.jsx)("p",{children:"No hay \xf3rdenes registradas para este cliente"}),(0,a.jsxs)(y(),{href:"/admin/pos",className:"inline-flex items-center px-4 py-2 mt-4 bg-[#78f3d3] text-[#313D52] rounded-lg hover:bg-[#4de0c0] transition-colors",children:[(0,a.jsx)(d.A,{size:16,className:"mr-2"}),"Crear primera orden"]})]})})]})]})}},33109:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(19946).A)("trending-up",[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]])},35169:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(19946).A)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},35695:(e,s,t)=>{"use strict";var a=t(18999);t.o(a,"useParams")&&t.d(s,{useParams:function(){return a.useParams}}),t.o(a,"usePathname")&&t.d(s,{usePathname:function(){return a.usePathname}}),t.o(a,"useRouter")&&t.d(s,{useRouter:function(){return a.useRouter}}),t.o(a,"useSearchParams")&&t.d(s,{useSearchParams:function(){return a.useSearchParams}})},37108:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(19946).A)("package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]])},40343:(e,s,t)=>{Promise.resolve().then(t.bind(t,31838))},51154:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(19946).A)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},69074:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(19946).A)("calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]])},71007:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(19946).A)("user",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},81586:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(19946).A)("credit-card",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]])},86151:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(19946).A)("shopping-bag",[["path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z",key:"hou9p0"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}]])}},e=>{var s=s=>e(e.s=s);e.O(0,[95,8441,1684,7358],()=>s(40343)),_N_E=e.O()}]);