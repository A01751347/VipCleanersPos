(()=>{var e={};e.id=1048,e.ids=[1048],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},3498:e=>{"use strict";e.exports=require("mysql2/promise")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},25521:(e,r,o)=>{"use strict";o.r(r),o.d(r,{patchFetch:()=>g,routeModule:()=>u,serverHooks:()=>m,workAsyncStorage:()=>l,workUnitAsyncStorage:()=>p});var s={};o.r(s),o.d(s,{POST:()=>c});var t=o(96559),n=o(48088),a=o(37719),i=o(32190),d=o(7462);async function c(e){console.log("\uD83D\uDD25 API /admin/pos - Recibiendo POST request");try{let r=await e.json();console.log("\uD83D\uDCE6 Datos recibidos del frontend:",JSON.stringify(r,null,2));let{cliente:o,servicios:s=[],productos:t=[],subtotal:n,iva:a,total:c,metodoPago:u,monto:l,tieneIdentificacion:p=!1,notas:m=null}=r;if(!o||!o.cliente_id)return console.error("❌ Cliente no proporcionado o inv\xe1lido"),i.NextResponse.json({success:!1,error:"Cliente requerido"},{status:400});if(0===s.length)return console.error("❌ No hay servicios en la orden"),i.NextResponse.json({success:!1,error:"Al menos un servicio es requerido"},{status:400});if(!n||!a||!c)return console.error("❌ Totales no proporcionados o inv\xe1lidos"),i.NextResponse.json({success:!1,error:"Totales de orden requeridos"},{status:400});if(!u||!l)return console.error("❌ Informaci\xf3n de pago incompleta"),i.NextResponse.json({success:!1,error:"Informaci\xf3n de pago requerida"},{status:400});console.log("✅ Validaciones pasadas, creando orden..."),console.log("\uD83D\uDCB0 Totales que se enviar\xe1n a DB:",{subtotal:n,iva:a,total:c});let g=new Date;g.setDate(g.getDate()+3);let x=await (0,d.VV)({clienteId:o.cliente_id,empleadoId:1,servicios:s,productos:t,requiereIdentificacion:!1,tieneIdentificacionRegistrada:p,fechaEntregaEstimada:g,metodoPago:u,monto:l,notasOrder:m,subtotal:n,iva:a,total:c});return console.log("\uD83C\uDF89 Orden creada exitosamente:",x),console.log("\uD83D\uDCCA Totales finales enviados a DB:",{subtotal:n,iva:a,total:c}),i.NextResponse.json({success:!0,ordenId:x.ordenId,codigoOrden:x.codigoOrden,message:"Orden creada exitosamente"})}catch(e){return console.error("\uD83D\uDCA5 Error en API /admin/pos:",e),i.NextResponse.json({success:!1,error:e instanceof Error?e.message:"Error interno del servidor"},{status:500})}}let u=new t.AppRouteRouteModule({definition:{kind:n.RouteKind.APP_ROUTE,page:"/api/admin/pos/route",pathname:"/api/admin/pos",filename:"route",bundlePath:"app/api/admin/pos/route"},resolvedPagePath:"/Users/santiserrano/Documents/GitHub/VipCleanersPos/app/api/admin/pos/route.ts",nextConfigOutput:"",userland:s}),{workAsyncStorage:l,workUnitAsyncStorage:p,serverHooks:m}=u;function g(){return(0,a.patchFetch)({workAsyncStorage:l,workUnitAsyncStorage:p})}},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},44870:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},78335:()=>{},96487:()=>{}};var r=require("../../../../webpack-runtime.js");r.C(e);var o=e=>r(r.s=e),s=r.X(0,[4243,580,7462],()=>o(25521));module.exports=s})();