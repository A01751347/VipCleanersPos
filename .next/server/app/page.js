(()=>{var e={};e.id=8974,e.ids=[8974],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},3498:e=>{"use strict";e.exports=require("mysql2/promise")},7699:(e,s,r)=>{"use strict";r.d(s,{N:()=>l});var t=r(13581),i=r(7462),n=r(85663);async function a(e){try{let s=e.toLowerCase().trim(),r=`
      SELECT 
        u.usuario_id, 
        u.email, 
        u.password, 
        u.rol, 
        u.activo,
        e.nombre,
        e.apellidos
      FROM usuarios u
      LEFT JOIN empleados e ON u.usuario_id = e.usuario_id
      WHERE u.email = ? AND u.activo = TRUE
    `,t=await (0,i.eW)({query:r,values:[s]});if(0===t.length)return null;return t[0]}catch(e){return console.error("Error al obtener usuario por email:",e),null}}async function o(e,s){try{return await (0,n.UD)(e,s)}catch(e){return console.error("Error al verificar la contrase\xf1a:",e),!1}}let l={providers:[(0,t.A)({name:"Credentials",credentials:{email:{label:"Email",type:"email"},password:{label:"Password",type:"password"}},async authorize(e){if(!e?.email||!e?.password)return null;try{let s=await a(e.email);if(!s||!await o(e.password,s.password))return null;return{id:s.usuario_id.toString(),name:s.nombre?`${s.nombre} ${s.apellidos||""}`.trim():s.email,email:s.email,role:s.rol}}catch(e){return console.error("\uD83D\uDCA5 Error en autorizaci\xf3n:",e),null}}})],pages:{signIn:"/admin/login",error:"/admin/login"},session:{strategy:"jwt",maxAge:2592e3},callbacks:{jwt:async({token:e,user:s})=>(s&&(e.role=s.role,e.id=s.id),e),session:async({session:e,token:s})=>(e.user&&(e.user.role=s.role,e.user.id=s.id),e),redirect:async({url:e,baseUrl:s})=>e.includes("/admin/login")||e===s?`${s}/admin`:e.startsWith("/")?`${s}${e}`:e.startsWith(s)?e:`${s}/admin`},debug:!1,secret:"genera_un_secreto_aleatorio_largo"}},8392:(e,s,r)=>{Promise.resolve().then(r.t.bind(r,86346,23)),Promise.resolve().then(r.t.bind(r,27924,23)),Promise.resolve().then(r.t.bind(r,35656,23)),Promise.resolve().then(r.t.bind(r,40099,23)),Promise.resolve().then(r.t.bind(r,38243,23)),Promise.resolve().then(r.t.bind(r,28827,23)),Promise.resolve().then(r.t.bind(r,62763,23)),Promise.resolve().then(r.t.bind(r,97173,23))},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},11723:e=>{"use strict";e.exports=require("querystring")},12412:e=>{"use strict";e.exports=require("assert")},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},21544:(e,s,r)=>{Promise.resolve().then(r.t.bind(r,16444,23)),Promise.resolve().then(r.t.bind(r,16042,23)),Promise.resolve().then(r.t.bind(r,88170,23)),Promise.resolve().then(r.t.bind(r,49477,23)),Promise.resolve().then(r.t.bind(r,29345,23)),Promise.resolve().then(r.t.bind(r,12089,23)),Promise.resolve().then(r.t.bind(r,46577,23)),Promise.resolve().then(r.t.bind(r,31307,23))},21632:(e,s,r)=>{"use strict";r.d(s,{default:()=>n});var t=r(60687),i=r(82136);function n({children:e,session:s}){return(0,t.jsx)(i.SessionProvider,{session:s,children:e})}},26527:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>l});var t=r(60687),i=r(82136);r(43210);var n=r(99891),a=r(58869),o=r(40083);function l(){let{data:e,status:s}=(0,i.useSession)();return"loading"===s?(0,t.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-[#f5f9f8]",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[#78f3d3] mx-auto"}),(0,t.jsx)("p",{className:"mt-4 text-[#313D52]",children:"Cargando panel de administraci\xf3n..."})]})}):"unauthenticated"===s?(0,t.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-[#f5f9f8]",children:(0,t.jsxs)("div",{className:"bg-white p-8 rounded-xl shadow-lg text-center max-w-md",children:[(0,t.jsx)(n.A,{className:"w-16 h-16 text-red-500 mx-auto mb-4"}),(0,t.jsx)("h1",{className:"text-2xl font-bold text-red-600 mb-4",children:"Error de Autenticaci\xf3n"}),(0,t.jsx)("p",{className:"text-[#6c7a89] mb-4",children:"No est\xe1s autenticado. Esto es un error del middleware."}),(0,t.jsx)("a",{href:"/admin/login",className:"inline-block px-6 py-3 bg-[#78f3d3] text-[#313D52] rounded-lg hover:bg-[#4de0c0]",children:"Ir al Login"})]})}):e?.user?.role!=="admin"?(0,t.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-[#f5f9f8]",children:(0,t.jsxs)("div",{className:"bg-white p-8 rounded-xl shadow-lg text-center max-w-md",children:[(0,t.jsx)(n.A,{className:"w-16 h-16 text-red-500 mx-auto mb-4"}),(0,t.jsx)("h1",{className:"text-2xl font-bold text-red-600 mb-4",children:"Acceso Denegado"}),(0,t.jsx)("p",{className:"text-[#6c7a89] mb-4",children:"No tienes permisos de administrador."}),(0,t.jsx)("button",{onClick:()=>(0,i.signOut)({callbackUrl:"/admin/login"}),className:"px-6 py-3 bg-[#78f3d3] text-[#313D52] rounded-lg hover:bg-[#4de0c0]",children:"Cerrar Sesi\xf3n"})]})}):(0,t.jsxs)("div",{className:"min-h-screen bg-[#f5f9f8]",children:[(0,t.jsx)("header",{className:"bg-white shadow-sm border-b border-[#e0e6e5]",children:(0,t.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,t.jsxs)("div",{className:"flex justify-between items-center h-16",children:[(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)(n.A,{className:"w-8 h-8 text-[#78f3d3] mr-3"}),(0,t.jsxs)("h1",{className:"text-xl font-bold text-[#313D52]",children:["Vip",(0,t.jsx)("span",{className:"text-[#78f3d3]",children:"Cleaners"})," Admin"]})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,t.jsxs)("div",{className:"flex items-center text-sm text-[#6c7a89]",children:[(0,t.jsx)(a.A,{className:"w-4 h-4 mr-2"}),e.user.name||e.user.email]}),(0,t.jsxs)("button",{onClick:()=>(0,i.signOut)({callbackUrl:"/admin/login"}),className:"flex items-center px-4 py-2 text-sm text-[#6c7a89] hover:text-[#313D52] hover:bg-[#f5f9f8] rounded-lg transition-colors",children:[(0,t.jsx)(o.A,{className:"w-4 h-4 mr-2"}),"Cerrar Sesi\xf3n"]})]})]})})}),(0,t.jsxs)("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,t.jsx)("div",{className:"bg-white rounded-xl shadow-sm p-8 mb-8",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"w-20 h-20 bg-[#e0f7f0] rounded-full flex items-center justify-center mx-auto mb-6",children:(0,t.jsx)(n.A,{className:"w-10 h-10 text-[#78f3d3]"})}),(0,t.jsx)("h2",{className:"text-3xl font-bold text-[#313D52] mb-4",children:"\xa1Bienvenido al Panel de Administraci\xf3n!"}),(0,t.jsx)("p",{className:"text-[#6c7a89] text-lg mb-6",children:"Has accedido exitosamente como administrador."}),(0,t.jsx)("div",{className:"inline-flex items-center px-4 py-2 bg-green-100 text-green-800 rounded-full text-sm font-medium",children:"âœ… Autenticaci\xf3n exitosa"})]})}),(0,t.jsxs)("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold text-[#313D52] mb-4",children:"Informaci\xf3n de la Sesi\xf3n"}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"bg-[#f5f9f8] p-4 rounded-lg",children:[(0,t.jsx)("p",{className:"text-sm text-[#6c7a89] mb-1",children:"Usuario"}),(0,t.jsx)("p",{className:"font-medium text-[#313D52]",children:e.user.name||"Sin nombre"})]}),(0,t.jsxs)("div",{className:"bg-[#f5f9f8] p-4 rounded-lg",children:[(0,t.jsx)("p",{className:"text-sm text-[#6c7a89] mb-1",children:"Email"}),(0,t.jsx)("p",{className:"font-medium text-[#313D52]",children:e.user.email})]}),(0,t.jsxs)("div",{className:"bg-[#f5f9f8] p-4 rounded-lg",children:[(0,t.jsx)("p",{className:"text-sm text-[#6c7a89] mb-1",children:"Rol"}),(0,t.jsx)("p",{className:"font-medium text-[#313D52]",children:e.user.role})]}),(0,t.jsxs)("div",{className:"bg-[#f5f9f8] p-4 rounded-lg",children:[(0,t.jsx)("p",{className:"text-sm text-[#6c7a89] mb-1",children:"ID de Usuario"}),(0,t.jsx)("p",{className:"font-medium text-[#313D52]",children:e.user.id})]})]})]}),(0,t.jsxs)("div",{className:"mt-8 bg-white rounded-xl shadow-sm p-6",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold text-[#313D52] mb-4",children:"Funciones de Administraci\xf3n"}),(0,t.jsx)("p",{className:"text-[#6c7a89]",children:"Aqu\xed ir\xe1n las funciones administrativas del sistema..."})]})]})]})}},28354:e=>{"use strict";e.exports=require("util")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},31150:(e,s,r)=>{"use strict";r.d(s,{default:()=>t});let t=(0,r(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/Users/santiserrano/Documents/GitHub/VipCleanersPos/components/SessionProvider.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/santiserrano/Documents/GitHub/VipCleanersPos/components/SessionProvider.tsx","default")},33873:e=>{"use strict";e.exports=require("path")},40083:(e,s,r)=>{"use strict";r.d(s,{A:()=>t});let t=(0,r(62688).A)("log-out",[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]])},55511:e=>{"use strict";e.exports=require("crypto")},55591:e=>{"use strict";e.exports=require("https")},58014:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>o});var t=r(37413),i=r(35426),n=r(7699),a=r(31150);async function o({children:e}){let s=await (0,i.getServerSession)(n.N);return console.log("\uD83C\uDFE0 Root Layout - Server session:",!!s,s?.user?.role),(0,t.jsx)("html",{lang:"es",children:(0,t.jsx)("body",{children:(0,t.jsx)(a.default,{session:s,children:e})})})}},58869:(e,s,r)=>{"use strict";r.d(s,{A:()=>t});let t=(0,r(62688).A)("user",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},62688:(e,s,r)=>{"use strict";r.d(s,{A:()=>m});var t=r(43210);let i=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),n=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,s,r)=>r?r.toUpperCase():s.toLowerCase()),a=e=>{let s=n(e);return s.charAt(0).toUpperCase()+s.slice(1)},o=(...e)=>e.filter((e,s,r)=>!!e&&""!==e.trim()&&r.indexOf(e)===s).join(" ").trim(),l=e=>{for(let s in e)if(s.startsWith("aria-")||"role"===s||"title"===s)return!0};var d={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let c=(0,t.forwardRef)(({color:e="currentColor",size:s=24,strokeWidth:r=2,absoluteStrokeWidth:i,className:n="",children:a,iconNode:c,...m},u)=>(0,t.createElement)("svg",{ref:u,...d,width:s,height:s,stroke:e,strokeWidth:i?24*Number(r)/Number(s):r,className:o("lucide",n),...!a&&!l(m)&&{"aria-hidden":"true"},...m},[...c.map(([e,s])=>(0,t.createElement)(e,s)),...Array.isArray(a)?a:[a]])),m=(e,s)=>{let r=(0,t.forwardRef)(({className:r,...n},l)=>(0,t.createElement)(c,{ref:l,iconNode:s,className:o(`lucide-${i(a(e))}`,`lucide-${e}`,r),...n}));return r.displayName=a(e),r}},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},67362:(e,s,r)=>{Promise.resolve().then(r.bind(r,31150))},74075:e=>{"use strict";e.exports=require("zlib")},79428:e=>{"use strict";e.exports=require("buffer")},79551:e=>{"use strict";e.exports=require("url")},80331:(e,s,r)=>{"use strict";r.r(s),r.d(s,{GlobalError:()=>a.a,__next_app__:()=>m,pages:()=>c,routeModule:()=>u,tree:()=>d});var t=r(65239),i=r(48088),n=r(88170),a=r.n(n),o=r(30893),l={};for(let e in o)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>o[e]);r.d(s,l);let d=["",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,90597)),"/Users/santiserrano/Documents/GitHub/VipCleanersPos/app/page.tsx"]}]},{layout:[()=>Promise.resolve().then(r.bind(r,58014)),"/Users/santiserrano/Documents/GitHub/VipCleanersPos/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,57398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(r.t.bind(r,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(r.t.bind(r,65284,23)),"next/dist/client/components/unauthorized-error"]}],c=["/Users/santiserrano/Documents/GitHub/VipCleanersPos/app/page.tsx"],m={require:r,loadChunk:()=>Promise.resolve()},u=new t.AppPageRouteModule({definition:{kind:i.RouteKind.APP_PAGE,page:"/page",pathname:"/",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},81630:e=>{"use strict";e.exports=require("http")},85514:(e,s,r)=>{Promise.resolve().then(r.bind(r,21632))},88086:(e,s,r)=>{Promise.resolve().then(r.bind(r,90597))},90597:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>t});let t=(0,r(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/Users/santiserrano/Documents/GitHub/VipCleanersPos/app/page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/santiserrano/Documents/GitHub/VipCleanersPos/app/page.tsx","default")},94735:e=>{"use strict";e.exports=require("events")},99710:(e,s,r)=>{Promise.resolve().then(r.bind(r,26527))},99891:(e,s,r)=>{"use strict";r.d(s,{A:()=>t});let t=(0,r(62688).A)("shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]])}};var s=require("../webpack-runtime.js");s.C(e);var r=e=>s(s.s=e),t=s.X(0,[4243,3104,4278,7462],()=>r(80331));module.exports=t})();