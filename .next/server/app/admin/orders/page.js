(()=>{var e={};e.id=4798,e.ids=[4798],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},3498:e=>{"use strict";e.exports=require("mysql2/promise")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},11579:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>l.a,__next_app__:()=>x,pages:()=>d,routeModule:()=>m,tree:()=>c});var r=t(65239),a=t(48088),n=t(88170),l=t.n(n),i=t(30893),o={};for(let e in i)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>i[e]);t.d(s,o);let c={children:["",{children:["admin",{children:["orders",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,71485)),"/Users/santiserrano/Documents/GitHub/VipCleanersPos/app/admin/orders/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,97786)),"/Users/santiserrano/Documents/GitHub/VipCleanersPos/app/admin/layout.tsx"]}]},{layout:[()=>Promise.resolve().then(t.bind(t,58014)),"/Users/santiserrano/Documents/GitHub/VipCleanersPos/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,57398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(t.t.bind(t,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(t.t.bind(t,65284,23)),"next/dist/client/components/unauthorized-error"]}]}.children,d=["/Users/santiserrano/Documents/GitHub/VipCleanersPos/app/admin/orders/page.tsx"],x={require:t,loadChunk:()=>Promise.resolve()},m=new r.AppPageRouteModule({definition:{kind:a.RouteKind.APP_PAGE,page:"/admin/orders/page",pathname:"/admin/orders",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},11723:e=>{"use strict";e.exports=require("querystring")},12412:e=>{"use strict";e.exports=require("assert")},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},28354:e=>{"use strict";e.exports=require("util")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},33873:e=>{"use strict";e.exports=require("path")},37094:(e,s,t)=>{Promise.resolve().then(t.bind(t,92721))},46699:(e,s,t)=>{"use strict";t.d(s,{A:()=>i});var r=t(60687),a=t(43210),n=t(80462),l=t(13964);let i=({selectedStatus:e,onChange:s})=>{let[t,i]=(0,a.useState)(!1),o=[{value:"pending",label:"Pendiente",color:"bg-yellow-100 text-yellow-800"},{value:"completed",label:"Completado",color:"bg-green-100 text-green-800"},{value:"cancelled",label:"Cancelado",color:"bg-red-100 text-red-800"}],c=t=>{e.includes(t)?s(e.filter(e=>e!==t)):s([...e,t])};return(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("button",{onClick:()=>i(!t),className:"inline-flex items-center justify-between px-4 py-2 w-48 rounded-lg border border-[#e0e6e5] bg-white hover:bg-[#f5f9f8] focus:outline-none focus:ring-2 focus:ring-[#78f3d3]",children:(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)(n.A,{size:16,className:"mr-2 text-[#6c7a89]"}),(0,r.jsx)("span",{className:"text-sm",children:0===e.length?"Todos los estados":1===e.length?o.find(s=>s.value===e[0])?.label:`${e.length} estados`})]})}),t&&(0,r.jsx)("div",{className:"absolute mt-1 w-64 bg-white border border-[#e0e6e5] rounded-lg shadow-lg z-10",children:(0,r.jsxs)("div",{className:"p-2",children:[(0,r.jsxs)("button",{onClick:()=>{e.length===o.length?s([]):s(o.map(e=>e.value))},className:"flex items-center justify-between w-full px-3 py-2 text-sm text-left rounded-md hover:bg-[#f5f9f8]",children:[(0,r.jsx)("span",{children:e.length===o.length?"Deseleccionar todos":"Seleccionar todos"}),e.length===o.length&&(0,r.jsx)(l.A,{size:16,className:"text-[#78f3d3]"})]}),(0,r.jsx)("div",{className:"h-px bg-[#e0e6e5] my-1"}),o.map(s=>(0,r.jsxs)("button",{onClick:()=>c(s.value),className:"flex items-center justify-between w-full px-3 py-2 text-sm text-left rounded-md hover:bg-[#f5f9f8]",children:[(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("span",{className:`inline-block w-2 h-2 rounded-full mr-2 ${s.color.split(" ")[0]}`}),(0,r.jsx)("span",{children:s.label})]}),e.includes(s.value)&&(0,r.jsx)(l.A,{size:16,className:"text-[#78f3d3]"})]},s.value))]})})]})}},55511:e=>{"use strict";e.exports=require("crypto")},55591:e=>{"use strict";e.exports=require("https")},62100:(e,s,t)=>{"use strict";t.d(s,{A:()=>r});let r=(0,t(62688).A)("banknote",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"2",key:"9lu3g6"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M6 12h.01M18 12h.01",key:"113zkx"}]])},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},63143:(e,s,t)=>{"use strict";t.d(s,{A:()=>r});let r=(0,t(62688).A)("square-pen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]])},69864:(e,s,t)=>{"use strict";t.d(s,{A:()=>r});let r=(0,t(62688).A)("inbox",[["polyline",{points:"22 12 16 12 14 15 10 15 8 12 2 12",key:"o97t9d"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}]])},71057:(e,s,t)=>{"use strict";t.d(s,{A:()=>r});let r=(0,t(62688).A)("shopping-bag",[["path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z",key:"hou9p0"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}]])},71485:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>r});let r=(0,t(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/Users/santiserrano/Documents/GitHub/VipCleanersPos/app/admin/orders/page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/santiserrano/Documents/GitHub/VipCleanersPos/app/admin/orders/page.tsx","default")},74075:e=>{"use strict";e.exports=require("zlib")},79428:e=>{"use strict";e.exports=require("buffer")},79551:e=>{"use strict";e.exports=require("url")},81630:e=>{"use strict";e.exports=require("http")},92721:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>D});var r=t(60687),a=t(43210),n=t(71057),l=t(31158),i=t(41862),o=t(78122),c=t(99270),d=t(19080),x=t(47033),m=t(14952),u=t(93613),p=t(69864),f=t(5336),h=t(11860),g=t(78272),j=t(58869),b=t(62100),v=t(81904),N=t(13861),y=t(63143),w=t(48730),_=t(88233),k=t(85814),A=t.n(k);let z=({orders:e=[],onStatusChange:s})=>{let[t,n]=(0,a.useState)("fecha_recepcion"),[l,o]=(0,a.useState)("desc"),[c,x]=(0,a.useState)(null),[m,k]=(0,a.useState)(null),z=e=>{if("string"!=typeof e)return"bg-gray-100 text-gray-500";switch(e.toLowerCase()){case"pendiente":return"bg-yellow-100 text-yellow-800";case"recibido":return"bg-blue-100 text-blue-800";case"en proceso":return"bg-orange-100 text-orange-800";case"listo para entrega":return"bg-green-100 text-green-600";case"entregado":return"bg-green-100 text-green-800";case"cancelado":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},C=e=>{switch(e.toLowerCase()){case"pendiente":return"bg-yellow-100 text-yellow-800";case"parcial":return"bg-blue-100 text-blue-800";case"completado":return"bg-green-100 text-green-800";default:return"bg-gray-100 text-gray-800"}},D=e=>{if("string"!=typeof e)return(0,r.jsx)(u.A,{size:14,className:"text-gray-400"});switch(e.toLowerCase()){case"pendiente":case"listo para entrega":return(0,r.jsx)(d.A,{size:14});case"recibido":return(0,r.jsx)(p.A,{size:14});case"en proceso":return(0,r.jsx)(i.A,{size:14,className:"animate-spin"});case"entregado":return(0,r.jsx)(f.A,{size:14});case"cancelado":return(0,r.jsx)(h.A,{size:14});default:return(0,r.jsx)(u.A,{size:14})}},P=e=>e?new Date(e).toLocaleDateString("es-MX",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"",q=e=>new Intl.NumberFormat("es-MX",{style:"currency",currency:"MXN"}).format(e),S=e=>{t===e?o("asc"===l?"desc":"asc"):(n(e),o("asc"))},$=e=>{x(c===e?null:e)},E=async e=>{if(confirm("\xbfEst\xe1s seguro de que deseas eliminar esta orden?"))try{k(e),console.log(`Deleting order with ID: ${e}`),s&&s()}catch(e){console.error("Error al eliminar la orden:",e),alert("Error al eliminar la orden")}finally{x(null),k(null)}},M=async(e,t)=>{try{if(k(e),!(await fetch(`/api/admin/orders/${e}/status`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({estadoId:t})})).ok)throw Error("Error al actualizar el estado de la orden");s&&s()}catch(e){console.error("Error al actualizar el estado de la orden:",e),alert("Error al actualizar el estado de la orden")}finally{x(null),k(null)}};return(0,r.jsx)("div",{className:"overflow-x-auto",style:{minHeight:"400px"},children:(0,r.jsxs)("table",{className:"min-w-full divide-y divide-[#e0e6e5]",children:[(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-[#6c7a89] uppercase tracking-wider cursor-pointer hover:bg-[#f5f9f8]",onClick:()=>S("codigo_orden"),children:(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("span",{children:"C\xf3digo"}),"codigo_orden"===t&&(0,r.jsx)(g.A,{size:16,className:`ml-1 transform ${"asc"===l?"rotate-180":""}`})]})}),(0,r.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-[#6c7a89] uppercase tracking-wider cursor-pointer hover:bg-[#f5f9f8]",onClick:()=>S("cliente_nombre"),children:(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("span",{children:"Cliente"}),"cliente_nombre"===t&&(0,r.jsx)(g.A,{size:16,className:`ml-1 transform ${"asc"===l?"rotate-180":""}`})]})}),(0,r.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-[#6c7a89] uppercase tracking-wider cursor-pointer hover:bg-[#f5f9f8]",onClick:()=>S("fecha_recepcion"),children:(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("span",{children:"Fecha"}),"fecha_recepcion"===t&&(0,r.jsx)(g.A,{size:16,className:`ml-1 transform ${"asc"===l?"rotate-180":""}`})]})}),(0,r.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-[#6c7a89] uppercase tracking-wider cursor-pointer hover:bg-[#f5f9f8]",onClick:()=>S("total"),children:(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("span",{children:"Total"}),"total"===t&&(0,r.jsx)(g.A,{size:16,className:`ml-1 transform ${"asc"===l?"rotate-180":""}`})]})}),(0,r.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-[#6c7a89] uppercase tracking-wider cursor-pointer hover:bg-[#f5f9f8]",onClick:()=>S("estado_actual"),children:(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("span",{children:"Estado"}),"estado_actual"===t&&(0,r.jsx)(g.A,{size:16,className:`ml-1 transform ${"asc"===l?"rotate-180":""}`})]})}),(0,r.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-[#6c7a89] uppercase tracking-wider cursor-pointer hover:bg-[#f5f9f8]",onClick:()=>S("estado_pago"),children:(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("span",{children:"Pago"}),"estado_pago"===t&&(0,r.jsx)(g.A,{size:16,className:`ml-1 transform ${"asc"===l?"rotate-180":""}`})]})}),(0,r.jsx)("th",{className:"px-4 py-3 text-right text-xs font-medium text-[#6c7a89] uppercase tracking-wider",children:"Acciones"})]})}),(0,r.jsx)("tbody",{className:"bg-white divide-y divide-[#e0e6e5]",children:e.map(e=>(0,r.jsxs)("tr",{className:`hover:bg-[#f5f9f8] ${m===e.orden_id?"opacity-50":""}`,children:[(0,r.jsx)("td",{className:"px-4 py-3 whitespace-nowrap text-sm font-medium text-[#313D52]",children:e.codigo_orden}),(0,r.jsx)("td",{className:"px-4 py-3 whitespace-nowrap",children:(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("div",{className:"flex-shrink-0 h-8 w-8 bg-[#f5f9f8] rounded-full flex items-center justify-center",children:(0,r.jsx)(j.A,{size:16,className:"text-[#6c7a89]"})}),(0,r.jsxs)("div",{className:"ml-3",children:[(0,r.jsxs)("div",{className:"text-sm font-medium text-[#313D52]",children:[e.cliente_nombre," ",e.cliente_apellidos]}),(0,r.jsx)("div",{className:"text-xs text-[#6c7a89]",children:e.cliente_email})]})]})}),(0,r.jsx)("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-[#6c7a89]",children:P(e.fecha_recepcion)}),(0,r.jsx)("td",{className:"px-4 py-3 whitespace-nowrap text-sm font-medium text-[#313D52]",children:q(e.total)}),(0,r.jsx)("td",{className:"px-4 py-3 whitespace-nowrap",children:m===e.orden_id?(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)(i.A,{size:16,className:"animate-spin mr-2 text-[#78f3d3]"}),(0,r.jsx)("span",{className:"text-[#6c7a89] text-xs",children:"Actualizando..."})]}):(0,r.jsxs)("span",{className:`px-2 py-1 inline-flex items-center text-xs leading-5 font-semibold rounded-full ${z(e.estado_servicio)}`,children:[(0,r.jsx)("span",{className:"mr-1",children:D(e.estado_servicio)}),e.estado_servicio]})}),(0,r.jsx)("td",{className:"px-4 py-3 whitespace-nowrap",children:(0,r.jsxs)("span",{className:`px-2 py-1 inline-flex items-center text-xs leading-5 font-semibold rounded-full ${C(e.estado_pago)}`,children:[(0,r.jsx)(b.A,{size:14,className:"mr-1"}),e.estado_pago]})}),(0,r.jsx)("td",{className:"px-4 py-3 whitespace-nowrap text-right text-sm font-medium",children:(0,r.jsxs)("div",{className:"relative inline-block text-left",children:[(0,r.jsx)("button",{onClick:()=>$(e.orden_id),className:"p-1 rounded-full hover:bg-[#e0e6e5] text-[#6c7a89]",disabled:m===e.orden_id,children:(0,r.jsx)(v.A,{size:16})}),c===e.orden_id&&(0,r.jsxs)("div",{className:"absolute right-0 mt-2 w-56 rounded-md shadow-lg bg-white z-50 ring-1 ring-[#e0e6e5] divide-y divide-[#e0e6e5]",children:[(0,r.jsxs)("div",{className:"py-1",children:[(0,r.jsxs)(A(),{href:`/admin/orders/${e.orden_id}`,className:"flex items-center px-4 py-2 text-sm text-[#313D52] hover:bg-[#f5f9f8]",children:[(0,r.jsx)(N.A,{size:16,className:"mr-3 text-[#6c7a89]"}),"Ver detalles"]}),(0,r.jsxs)(A(),{href:`/admin/orders/${e.orden_id}/edit`,className:"flex items-center px-4 py-2 text-sm text-[#313D52] hover:bg-[#f5f9f8]",children:[(0,r.jsx)(y.A,{size:16,className:"mr-3 text-[#6c7a89]"}),"Editar"]})]}),(0,r.jsxs)("div",{className:"py-1",children:[(0,r.jsxs)("button",{onClick:()=>M(e.orden_id,9),className:"flex items-center px-4 py-2 text-sm text-[#313D52] hover:bg-[#f5f9f8] w-full text-left",disabled:9===e.estado_servicio_id,children:[(0,r.jsx)("span",{className:"w-4 h-4 mr-3 rounded-full bg-purple-100 flex items-center justify-center",children:(0,r.jsx)(f.A,{size:12,className:"text-yellow-800"})}),"Marcar como Pendiente"]}),(0,r.jsxs)("button",{onClick:()=>M(e.orden_id,1),className:"flex items-center px-4 py-2 text-sm text-[#313D52] hover:bg-[#f5f9f8] w-full text-left",disabled:1===e.estado_servicio_id,children:[(0,r.jsx)("span",{className:"w-4 h-4 mr-3 rounded-full bg-blue-100 flex items-center justify-center",children:(0,r.jsx)(f.A,{size:12,className:"text-blue-800"})}),"Marcar como Recibido"]}),(0,r.jsxs)("button",{onClick:()=>M(e.orden_id,2),className:"flex items-center px-4 py-2 text-sm text-[#313D52] hover:bg-[#f5f9f8] w-full text-left",disabled:2===e.estado_servicio_id,children:[(0,r.jsx)("span",{className:"w-4 h-4 mr-3 rounded-full bg-orange-100 flex items-center justify-center",children:(0,r.jsx)(w.A,{size:12,className:"text-orange-800"})}),"Marcar como En Proceso"]}),(0,r.jsxs)("button",{onClick:()=>M(e.orden_id,6),className:"flex items-center px-4 py-2 text-sm text-[#313D52] hover:bg-[#f5f9f8] w-full text-left",disabled:6===e.estado_servicio_id,children:[(0,r.jsx)("span",{className:"w-4 h-4 mr-3 rounded-full bg-green-100 flex items-center justify-center",children:(0,r.jsx)(f.A,{size:12,className:"text-green-800"})}),"Marcar como Completado"]}),(0,r.jsxs)("button",{onClick:()=>M(e.orden_id,7),className:"flex items-center px-4 py-2 text-sm text-[#313D52] hover:bg-[#f5f9f8] w-full text-left",disabled:7===e.estado_servicio_id,children:[(0,r.jsx)("span",{className:"w-4 h-4 mr-3 rounded-full bg-green-100 flex items-center justify-center",children:(0,r.jsx)(f.A,{size:12,className:"text-green-800"})}),"Marcar como Entregado"]}),(0,r.jsxs)("button",{onClick:()=>M(e.orden_id,8),className:"flex items-center px-4 py-2 text-sm text-[#313D52] hover:bg-[#f5f9f8] w-full text-left",disabled:8===e.estado_servicio_id,children:[(0,r.jsx)("span",{className:"w-4 h-4 mr-3 rounded-full bg-red-100 flex items-center justify-center",children:(0,r.jsx)(f.A,{size:12,className:"text-red-800"})}),"Marcar como Cancelado"]})]}),(0,r.jsx)("div",{className:"py-1",children:(0,r.jsxs)("button",{onClick:()=>E(e.orden_id),className:"flex items-center px-4 py-2 text-sm text-red-600 hover:bg-red-50 w-full text-left",children:[(0,r.jsx)(_.A,{size:16,className:"mr-3"}),"Eliminar"]})})]})]})})]},e.orden_id))})]})})};var C=t(46699);function D(){let[e,s]=(0,a.useState)(""),[t,u]=(0,a.useState)(1),[p,f]=(0,a.useState)([]),[h,g]=(0,a.useState)(""),[j,b]=(0,a.useState)({start:"",end:""}),[v,N]=(0,a.useState)([]),[y,w]=(0,a.useState)(0),[_,k]=(0,a.useState)(1),[D]=(0,a.useState)(10),[P,q]=(0,a.useState)(!0),[S,$]=(0,a.useState)(!1),[E,M]=(0,a.useState)(null),I=async(s=t,r=p,a=h,n=e,l=j)=>{try{$(!0);let e=`/api/admin/orders?page=${s}&pageSize=${D}`;r&&r.length>0&&(e+=`&estadoId=${r.join(",")}`),a&&(e+=`&estadoPago=${a}`),n&&(e+=`&search=${encodeURIComponent(n)}`),l.start&&(e+=`&fechaInicio=${encodeURIComponent(l.start)}`),l.end&&(e+=`&fechaFin=${encodeURIComponent(l.end)}`);let t=await fetch(e);if(!t.ok)throw Error("Error al cargar las \xf3rdenes");let i=await t.json();N(i.orders||[]),w(i.total||0),k(i.totalPages||1),M(null)}catch(e){console.error("Error fetching orders:",e),M("Error al cargar las \xf3rdenes. Intente nuevamente.")}finally{q(!1),$(!1)}},V=s=>{let{name:t,value:r}=s.target,a={...j,[t]:r};b(a),("start"===t&&r&&j.end||"end"===t&&r&&j.start)&&(u(1),I(1,p,h,e,a))},G=()=>{I(t,p,h,e,j)};return(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"flex flex-col md:flex-row md:justify-between md:items-center gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-xl font-semibold text-[#313D52]",children:"Administrar \xd3rdenes"}),(0,r.jsx)("p",{className:"text-sm text-[#6c7a89]",children:"Visualiza y gestiona las \xf3rdenes de servicio y venta"})]}),(0,r.jsxs)("div",{className:"flex flex-wrap gap-3",children:[(0,r.jsxs)(A(),{href:"/admin/pos",className:"inline-flex items-center px-4 py-2 bg-[#313D52] text-white rounded-lg border border-[#313D52] hover:bg-[#3e4a61] transition-colors",children:[(0,r.jsx)(n.A,{size:16,className:"mr-2"}),"Punto de Venta"]}),(0,r.jsxs)("button",{onClick:()=>{console.log("Exportando datos..."),alert("Funcionalidad de exportaci\xf3n no implementada a\xfan")},className:"inline-flex items-center px-4 py-2 bg-[#f5f9f8] text-[#313D52] rounded-lg border border-[#e0e6e5] hover:bg-[#e0e6e5] transition-colors",children:[(0,r.jsx)(l.A,{size:16,className:"mr-2"}),"Exportar"]}),(0,r.jsx)("button",{className:"inline-flex items-center px-4 py-2 bg-[#78f3d3] text-[#313D52] rounded-lg hover:bg-[#4de0c0] transition-colors disabled:opacity-50 disabled:cursor-not-allowed",onClick:G,disabled:S,children:S?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(i.A,{size:16,className:"mr-2 animate-spin"}),"Actualizando..."]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(o.A,{size:16,className:"mr-2"}),"Actualizar"]})})]})]}),(0,r.jsx)("div",{className:"bg-white rounded-lg border border-[#e0e6e5] p-4",children:(0,r.jsxs)("div",{className:"flex flex-col md:flex-row gap-4",children:[(0,r.jsx)("div",{className:"md:flex-1",children:(0,r.jsxs)("form",{onSubmit:s=>{s.preventDefault(),u(1),I(1,p,h,e,j)},className:"flex items-center relative",children:[(0,r.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,r.jsx)(c.A,{size:18,className:"text-[#6c7a89]"})}),(0,r.jsx)("input",{type:"text",placeholder:"Buscar por cliente, c\xf3digo o empleado...",value:e,onChange:e=>{s(e.target.value)},className:"py-2 pl-10 pr-4 rounded-lg border border-[#e0e6e5] focus:outline-none focus:ring-2 focus:ring-[#78f3d3] text-sm w-full"})]})}),(0,r.jsx)("div",{className:"flex-shrink-0",children:(0,r.jsx)(C.A,{selectedStatus:p,onChange:s=>{f(s),u(1),I(1,s,h,e,j)}})}),(0,r.jsx)("div",{className:"flex-shrink-0",children:(0,r.jsxs)("select",{value:h,onChange:s=>{let t=s.target.value;g(t),u(1),I(1,p,t,e,j)},className:"py-2 px-4 rounded-lg border border-[#e0e6e5] focus:outline-none focus:ring-2 focus:ring-[#78f3d3] text-sm",children:[(0,r.jsx)("option",{value:"",children:"Todos los pagos"}),(0,r.jsx)("option",{value:"pendiente",children:"Pago pendiente"}),(0,r.jsx)("option",{value:"parcial",children:"Pago parcial"}),(0,r.jsx)("option",{value:"completado",children:"Pago completado"})]})}),(0,r.jsxs)("div",{className:"flex-shrink-0 flex flex-col sm:flex-row gap-2",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"startDate",className:"block text-xs text-[#6c7a89] mb-1",children:"Desde"}),(0,r.jsx)("input",{type:"date",id:"startDate",name:"start",value:j.start,onChange:V,className:"py-2 px-3 rounded-lg border border-[#e0e6e5] focus:outline-none focus:ring-2 focus:ring-[#78f3d3] text-sm w-full"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"endDate",className:"block text-xs text-[#6c7a89] mb-1",children:"Hasta"}),(0,r.jsx)("input",{type:"date",id:"endDate",name:"end",value:j.end,onChange:V,className:"py-2 px-3 rounded-lg border border-[#e0e6e5] focus:outline-none focus:ring-2 focus:ring-[#78f3d3] text-sm w-full"})]})]})]})}),(0,r.jsxs)("div",{className:"bg-white rounded-lg border border-[#e0e6e5] overflow-hidden",children:[P?(0,r.jsx)("div",{className:"flex justify-center items-center py-20",children:(0,r.jsx)(i.A,{size:40,className:"animate-spin text-[#78f3d3]"})}):E?(0,r.jsxs)("div",{className:"text-center py-10 text-red-500",children:[(0,r.jsx)("p",{children:E}),(0,r.jsx)("button",{onClick:G,className:"mt-4 px-4 py-2 bg-[#78f3d3] text-[#313D52] rounded-lg hover:bg-[#4de0c0] transition-colors",children:"Reintentar"})]}):0===v.length?(0,r.jsxs)("div",{className:"text-center py-20",children:[(0,r.jsx)(d.A,{size:48,className:"mx-auto text-[#e0e6e5] mb-4"}),(0,r.jsx)("p",{className:"text-[#6c7a89] font-medium",children:"No se encontraron \xf3rdenes"}),(0,r.jsx)("p",{className:"text-sm text-[#6c7a89]",children:"Intenta con otros filtros o crea una nueva orden en el punto de venta"}),(0,r.jsxs)(A(),{href:"/admin/pos",className:"inline-flex items-center px-4 py-2 mt-4 bg-[#78f3d3] text-[#313D52] rounded-lg hover:bg-[#4de0c0] transition-colors",children:[(0,r.jsx)(n.A,{size:16,className:"mr-2"}),"Ir al Punto de Venta"]})]}):(0,r.jsx)(z,{orders:v,onStatusChange:G}),!P&&!E&&v.length>0&&(0,r.jsxs)("div",{className:"px-4 py-3 flex items-center justify-between border-t border-[#e0e6e5]",children:[(0,r.jsxs)("div",{className:"text-sm text-[#6c7a89]",children:["Mostrando ",(0,r.jsx)("span",{className:"font-medium",children:(t-1)*D+1})," a ",(0,r.jsx)("span",{className:"font-medium",children:Math.min(t*D,y)})," de ",(0,r.jsx)("span",{className:"font-medium",children:y})," resultados"]}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)("button",{onClick:()=>{if(t>1){let s=t-1;u(s),I(s,p,h,e,j)}},disabled:1===t,className:`p-2 rounded-lg ${1===t?"text-[#e0e6e5] cursor-not-allowed":"text-[#313D52] hover:bg-[#f5f9f8]"}`,children:(0,r.jsx)(x.A,{size:20})}),(0,r.jsxs)("span",{className:"text-sm text-[#313D52]",children:["P\xe1gina ",(0,r.jsx)("span",{className:"font-medium",children:t})," de ",(0,r.jsx)("span",{className:"font-medium",children:_})]}),(0,r.jsx)("button",{onClick:()=>{if(t<_){let s=t+1;u(s),I(s,p,h,e,j)}},disabled:t===_,className:`p-2 rounded-lg ${t===_?"text-[#e0e6e5] cursor-not-allowed":"text-[#313D52] hover:bg-[#f5f9f8]"}`,children:(0,r.jsx)(m.A,{size:20})})]})]})]})]})}},93613:(e,s,t)=>{"use strict";t.d(s,{A:()=>r});let r=(0,t(62688).A)("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},94735:e=>{"use strict";e.exports=require("events")},96926:(e,s,t)=>{Promise.resolve().then(t.bind(t,71485))}};var s=require("../../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),r=s.X(0,[4243,3104,4278,3889,7333,7462,8528],()=>t(11579));module.exports=r})();